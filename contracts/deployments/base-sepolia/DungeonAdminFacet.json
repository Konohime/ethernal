{
  "address": "0x8A8bcEe351E8C6e38Da21c1c6A7f3cbDAe72d812",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "oldLocation",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "newLocation",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "mode",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "path",
          "type": "uint256"
        }
      ],
      "name": "CharacterMoved",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "monsterId",
          "type": "uint256"
        }
      ],
      "name": "Death",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "player",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "name",
          "type": "string"
        }
      ],
      "name": "Enter",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "gearId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "slotType",
          "type": "uint8"
        }
      ],
      "name": "Equip",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint16",
          "name": "hp",
          "type": "uint16"
        }
      ],
      "name": "Heal",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint16",
          "name": "newLevel",
          "type": "uint16"
        }
      ],
      "name": "LevelUp",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "uint64",
          "name": "id",
          "type": "uint64"
        },
        {
          "indexed": true,
          "internalType": "uint8",
          "name": "status",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "data",
          "type": "string"
        }
      ],
      "name": "QuestUpdate",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "areaLocation",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint64",
          "name": "blockNumber",
          "type": "uint64"
        }
      ],
      "name": "RandomEvent",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "gearId",
          "type": "uint256"
        }
      ],
      "name": "Recycle",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "deadCharacterId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newCharacterId",
          "type": "uint256"
        }
      ],
      "name": "Resurrect",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "location",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "bytes32",
          "name": "blockHash",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "exits",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "kind",
          "type": "uint8"
        }
      ],
      "name": "RoomActualised",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "location",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint64",
          "name": "blockNumber",
          "type": "uint64"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "direction",
          "type": "uint8"
        }
      ],
      "name": "RoomDiscovered",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "location",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "RoomIncome",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "location",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "name",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        }
      ],
      "name": "RoomName",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "tax",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newDueDate",
          "type": "uint256"
        }
      ],
      "name": "RoomTaxPay",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "id",
          "type": "uint256"
        },
        {
          "internalType": "address[]",
          "name": "players",
          "type": "address[]"
        },
        {
          "internalType": "uint256[]",
          "name": "amounts",
          "type": "uint256[]"
        }
      ],
      "name": "batchMineVaultElements",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "monsterId",
          "type": "uint256"
        }
      ],
      "name": "characterDefeated",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "monsterId",
          "type": "uint256"
        },
        {
          "internalType": "int16",
          "name": "hpChange",
          "type": "int16"
        }
      ],
      "name": "characterEscaped",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "location",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "internalType": "uint16[8]",
          "name": "amounts",
          "type": "uint16[8]"
        }
      ],
      "name": "claimBounty",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "to",
          "type": "address"
        },
        {
          "internalType": "bytes",
          "name": "data",
          "type": "bytes"
        }
      ],
      "name": "forward",
      "outputs": [
        {
          "internalType": "bool",
          "name": "success",
          "type": "bool"
        }
      ],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "location",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "benefactor",
          "type": "address"
        },
        {
          "internalType": "uint16[8]",
          "name": "income",
          "type": "uint16[8]"
        }
      ],
      "name": "generateRoomIncome",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "location",
          "type": "uint256"
        }
      ],
      "name": "monsterDefeated",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "blockHashRegister",
          "type": "address"
        },
        {
          "internalType": "contract Player",
          "name": "playerContract",
          "type": "address"
        },
        {
          "internalType": "address payable",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "adminContract",
          "type": "address"
        }
      ],
      "name": "postUpgrade",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "contract Characters",
          "name": "characters",
          "type": "address"
        },
        {
          "internalType": "contract Elements",
          "name": "elements",
          "type": "address"
        },
        {
          "internalType": "contract Gears",
          "name": "gears",
          "type": "address"
        },
        {
          "internalType": "contract Rooms",
          "name": "rooms",
          "type": "address"
        }
      ],
      "name": "start",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "location",
          "type": "uint256"
        }
      ],
      "name": "teleportCharacter",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "monsterId",
          "type": "uint256"
        },
        {
          "internalType": "int16",
          "name": "hpChange",
          "type": "int16"
        },
        {
          "internalType": "uint16",
          "name": "xpGained",
          "type": "uint16"
        },
        {
          "internalType": "uint256",
          "name": "gearData",
          "type": "uint256"
        },
        {
          "internalType": "int64",
          "name": "durabilityChange",
          "type": "int64"
        },
        {
          "internalType": "int16[8]",
          "name": "balanceChange",
          "type": "int16[8]"
        }
      ],
      "name": "updateCharacter",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "character",
          "type": "uint256"
        },
        {
          "internalType": "uint64",
          "name": "id",
          "type": "uint64"
        },
        {
          "internalType": "uint8",
          "name": "status",
          "type": "uint8"
        },
        {
          "internalType": "string",
          "name": "data",
          "type": "string"
        }
      ],
      "name": "updateQuest",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "characterId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "location",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "data",
          "type": "uint256"
        },
        {
          "internalType": "uint256[8]",
          "name": "amountsPayed",
          "type": "uint256[8]"
        }
      ],
      "name": "updateRoomData",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0x158ef9b266ef499626958f8801d049cd9cf6cf44d022ec43436e81deeae2a1c6",
  "receipt": {
    "to": "0x4e59b44847b379578588920cA78FbF26c0B4956C",
    "from": "0x78fAf6C26b364141fAd67c544A2DdE6Bc985baf4",
    "contractAddress": null,
    "transactionIndex": 13,
    "gasUsed": "4141459",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x1152689b76badab66937066ab3c19b54d6c17c54f2e1c3d8b1dcc6a244debbbb",
    "transactionHash": "0x158ef9b266ef499626958f8801d049cd9cf6cf44d022ec43436e81deeae2a1c6",
    "logs": [],
    "blockNumber": 36001081,
    "cumulativeGasUsed": "5329089",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 1,
  "linkedData": {
    "readOnlyDungeon": "0x60808060405234610016576119f4908161001c8239f35b600080fdfe608060408181526004918236101561001657600080fd5b600090813560e01c9081630ececfea14610e3457508063213ee14314610a235780632f58779614610a0457806330ad9329146109ba5780633683dee114610893578063467b47931461075557806356b5c381146106f25780637a923474146106c95780639f7cb08e14610649578063a48378ff1461062a578063acda69ca14610556578063b0ca9dfe1461053a578063c3aab23c146103f9578063d5763a80146103ad578063d667fd0414610356578063ed53a62414610318578063f090aca8146102fc578063f6940ac714610152578063fcaf8951146101285763ff5335fa1461010057600080fd5b34610125576020366003190112610125575061011e6020923561197a565b9051908152f35b80fd5b50903461014e5760209060ff61014661014036610f23565b9161153a565b915191168152f35b5080fd5b50346101255760031960603682011261014e578335906044359067ffffffffffffffff918281168091036102f85761018984611015565b505060001960079290920b828112159392846102e9575b50836102dd575b50826102cc575b5081156102c0575b50156101d157505050506020915060ff6006915b5191168152f35b6009826101dd85611253565b16029182169182036102ad57819082610286575b50601911905061027657606460ff6127108551602081019085825260243588820152600360fa1b60608201526041815261022a81611051565b5190200616116102765761023f600591611015565b5091505060070b0760ff166001019260ff841161026357505060ff602092916101ca565b634e487b7160e01b825260119052602490fd5b50506020915060ff6006916101ca565b9050810190811161029a57601990386101f1565b634e487b7160e01b835260118552602483fd5b634e487b7160e01b845260118652602484fd5b600a91501015386101b6565b600191925060070b131590386101ae565b600112159250386101a7565b600783900b12159350386101a0565b8480fd5b50903461014e5760209061011e61031236610f47565b9061194a565b50346101255760a036600319011261012557606435908115158203610125575060209261011e91610347610f13565b916044359060243590356110c5565b5091346103a95760203660031901126103a95760a092503581519161ffff808360e81c168452808360a81c1660208501528260b81c169083015263ffffffff8160c81c16606083015260f81c6080820152f35b8280fd5b5091346103a95760603660031901126103a957358060070b81036103a957602435908160070b82036103f557604435938460070b850361012557509261011e91602094610f91565b8380fd5b50903461014e57602036600319011261014e5782359160ff83169283810361014e578251610160810181811067ffffffffffffffff821117610527578452828152600a60208201526031848201526077606082015260d0608082015261014860a082015261020c60c082015261033a60e08201526104f5610100820152610e46610120820152611aee610140820152600b8510156105145790611fe0929161ffff93849260051b1601511693600881116000146104cd5750505060609250600a906101ec5b81519384526020840152820152f35b826005816104e6816104e0600896611937565b16611482565b1604160190828211610501575060609450600a9291166104be565b634e487b7160e01b815260118652602490fd5b634e487b7160e01b835260328652602483fd5b634e487b7160e01b845260418752602484fd5b50903461014e5760209061011e61055036610f47565b9061140b565b50903461014e5760c036600319011261014e57610571610f5d565b60243560ff811681036103f557610586610efe565b906064359161ffff9384841684036106265760843594851685036106265760a4359663ffffffff88168098036101255750602096936105fb610621946105e961011e989561060e9561ffff60e81b9060e81b169060ff60f81b9060f81b16610f6e565b60e09190911b60ff60e01b1690610f6e565b60d09190911b61ffff60d01b1690610f6e565b60c09190911b61ffff60c01b1690610f6e565b610f6e565b8680fd5b5034610125576020366003190112610125575061011e60209235611457565b5034610125576020366003190112610125575063ffffffff61069560c09335908160f81c61ffff808460e81c169360ff8160e01c169363ffffffff838360d01c16938360c01c16921690565b949190929660ff8151988161ffff97888097168c521660208b015216908801521660608601521660808401521660a0820152f35b50903461014e57602036600319011261014e5760209061ffff6106ea610f5d565b169051908152f35b509190346103a957600a919261070736610f47565b939004600101806001116107425783810293818504149015171561072f576020838351908152f35b634e487b7160e01b815260118452602490fd5b634e487b7160e01b825260118552602482fd5b50903461014e57602036600319011261014e5782359167ffffffffffffffff908184116101255736602385011215610125578385013591821161012557602494600594368785881b830101116103a95794929190819582945b8486106107bf576020888851908152f35b9091929394966107fd8989841b85010135908160f81c61ffff808460e81c169360ff8160e01c169363ffffffff838360d01c16938360c01c16921690565b509360019350617fff925061081590841c8316611937565b9061ffff80808416961691161461085c575b50505061083391610f6e565b96600019811461084a5760010194939291906107ae565b634e487b7160e01b8552601184528885fd5b8293921c16820180921161088157610833929161087891610f6e565b90913880610827565b634e487b7160e01b8752601186528a87fd5b5034610125576108a236610f23565b9091925060196108b18461136a565b0480156109b2575b6108f76108ee8287516020810190888252878a820152601960fa1b6060820152604181526108e681611051565b5190206110a5565b8260011c610f6e565b9182156109a9575b60ff169384600214610991575b61094e929360088311610988575b6109459183918851906020820192835289820152606560f81b6060820152604181526108e681611051565b9060011c610f6e565b91821561097f575b60011461096a575b82519182526020820152f35b90806109799160021c90610f6e565b9061095e565b60019250610956565b6008925061091a565b6109a28361094e9460021c90610f6e565b925061090c565b600192506108ff565b5060016108b9565b5034610125576020366003190112610125575067ffffffffffffffff6109e260809335611015565b92949182519560070b865260070b602086015260070b90840152166060820152f35b5034610125576020366003190112610125575061011e602092356111cb565b50903461014e5760c036600319011261014e57823592602492833593610a47610efe565b916064359360ff9485811681036103a957610a60610f13565b9060a435958787168097036102f857610a7a908a8c61153a565b9884610a90610a888d6111cb565b94939c611015565b50509060070b159081610e28575b5015610acc57505050505050505060609381600160029217915b818551961686521660208501521690820152f35b9a939699909294979598915b8681169b8b8d11610e12575082516020810187815260f89290921b6001600160f81b031916818501526041808201869052600360f81b606183015260428252608082019067ffffffffffffffff821183831017610e02575084525190206001908c90868316831415906014900689168180610df0575b15610b7f5750505080600295179b5b878114610b6d5701939a93610ad8565b634e487b7160e01b8a52601189528a8afd5b600292888416841415928380610dc4575b15610ba35750505050600395179b610b5d565b8c808b969394959616141580928193610d51575b5015610bcc575050505050878095179b610b5d565b60089485808c1614159485610bfc575b5050505050600014610bf257600595179b610b5d565b50939a8490610b5d565b600391929394955014938415610d46575b8415610d2d575b8415610d14575b8415610cfb575b8415610cd5575b8415610caf575b8415610c89575b8415610c4c575b505050508d38808080610bdc565b604d149350909183610c81575b5082610c79575b5081610c71575b5038808f80610c3e565b905038610c67565b915038610c60565b925038610c59565b9350604e841480610ca8575b80610ca1575b93610c37565b5080610c9b565b5082610c95565b9350604e841480610cce575b80610cc7575b93610c30565b5082610cc1565b5081610cbb565b9350604e841480610cf4575b80610ced575b93610c29565b5080610ce7565b5081610ce1565b9350604f841480610d0d575b93610c22565b5082610d07565b9350604f841480610d26575b93610c1b565b5080610d20565b9350604f841480610d3f575b93610c14565b5081610d39565b605081149450610c0d565b905084148015610dba575b8015610da8575b8015610d96575b8015610d77575b38610bb7565b50604e831480610d8f575b8015610d71575084610d71565b5080610d82565b50604f83148015610d6a575084610d6a565b50604f83148015610d63575080610d63565b5060508314610d5c565b508583148015610de6575b80610b905750604f82148015610b90575080610b90565b5060508214610dcf565b50801580610b4e575060508314610b4e565b634e487b7160e01b8c528a528b8bfd5b9550509850965050925060609650819350610ab8565b905060070b1538610a9e565b918491503461012557836003193601126101255750610ed5610eea610ef093610eda610ed5610ee4610eda963593610eca60ff60098c82826024359660208101908c82528885820152603360f91b606082015260418152610e9481611051565b51902006169481519060208201928b8452820152606760f81b606082015260418152610ebf81611051565b519020061695611015565b5099919890986119a9565b6112cb565b9060070b906111a3565b946119a9565b90610f91565b815190815260026020820152f35b6044359060ff82168203610f0e57565b600080fd5b6084359060ff82168203610f0e57565b6060906003190112610f0e57600435906024359060443560ff81168103610f0e5790565b6040906003190112610f0e576004359060243590565b6004359061ffff82168203610f0e57565b91908201809211610f7b57565b634e487b7160e01b600052601160045260246000fd5b909167ffffffffffffffff9067ffffffffffffffff60801b608082901b16908216808204600160801b1490151715610f7b57600160ff1b908101908110610f7b576fffffffffffffffff00000000000000008285169460401b1693808504600160401b1490151715610f7b576110129361100a91610f6e565b911690610f6e565b90565b67ffffffffffffffff9081811660070b92828260401c1660070b928260801c1660070b9160ff1c90565b60ff60019116019060ff8211610f7b57565b6080810190811067ffffffffffffffff82111761106d57604052565b634e487b7160e01b600052604160045260246000fd5b90601f8019910116810190811067ffffffffffffffff82111761106d57604052565b81156110af570690565b634e487b7160e01b600052601260045260246000fd5b9192909360ff600191160361115c57600f90611154575b60ff60646040516020810190858252876040820152600360f91b60608201526041815261110881611051565b5190200691161161111b57505050600090565b6111469260405190602082019283526040820152600760f81b6060820152604181526108e681611051565b60018101809111610f7b5790565b5060196110dc565b50505050600090565b60070b677fffffffffffffff198114610f7b5760000390565b60070b60040190677fffffffffffffff8213677fffffffffffffff19831217610f7b57565b9060070b9060070b0190677fffffffffffffff198212677fffffffffffffff831317610f7b57565b6111d761101291611015565b509160079190600081840b12611234576111f260099161117e565b830b05915b600082820b126112155761120c60099261117e565b900b0590610f91565b60099061122c611227610eea94611165565b61117e565b900b05611165565b600961124561122761124d93611165565b840b05611165565b916111f7565b61125c90611015565b50819050826000600782900b126112b9575b5060008160070b126112a9575b508060070b8260070b1360001461129a575067ffffffffffffffff1690565b905067ffffffffffffffff1690565b6112b39150611165565b3861127b565b6112c4919350611165565b913861126e565b60070b6003190190677fffffffffffffff198212677fffffffffffffff831317610f7b57565b60070b90677fffffffffffffff198212677fffffffffffffff831317610f7b57565b600791820b910b0390677fffffffffffffff198212677fffffffffffffff831317610f7b57565b600160ff1b8114610f7b5760000390565b90600160401b60008382039312818412811691841390151617610f7b57565b61137661137f91611015565b505091906112f1565b60070b90600082126113f6575b611395906112f1565b60070b600081126113e8575b6780000000000000008083136113d8575b81136113ca575b808213156113c5575090565b905090565b6113d39061134b565b6113b9565b916113e29061134b565b916113b2565b6113f19061133a565b6113a1565b906114036113959161133a565b91905061138c565b9061142d61141b61142593611015565b5050939092611015565b505092611313565b60070b9060008212611444575b6113959192611313565b6114506113959261133a565b915061143a565b600160ff1b81036114685750600090565b61147360199161136a565b0460010180600111610f7b5790565b801561151157808060011461150a57600214611504576001908161013382101682600b831016176114f357906003815b8082116114ca5750508161ffff048111610f7b570290565b90928061ffff048111610f7b578184166114ea575b800292811c906114b2565b809202916114df565b600391500a9061ffff8211610f7b57565b50600890565b5050600190565b50600090565b80156115345760ff8111610f7b576001901b9060ff8211610f7b57565b50600190565b909160ff916004916000908416838103611738575050600f935b8360646040516020810190858252846040820152606f60f81b60608201526041815261157f81611051565b5190200616600090603c811060001461171c5750508360005b168381106115ab57505050505060f01790565b8491906003810361163c5750604080516020810194855290810191909152600760fc1b60608201526007926115fe91600391906115f581606181015b03601f198101835282611083565b5190201661103f565b160291821691820361162757506015810361161a575060d01790565b601c036110125760b01790565b601190634e487b7160e01b6000525260246000fd5b909150600281036116b257506116898460066003946115e761167f8496604051928391602083019586909160419282526020820152600760fc1b60408201520190565b519020061661103f565b16029182169182036116275750600f81036116a5575060501790565b6012036110125760a01790565b6001919293959450146116c7575b5050905090565b604080516020810193845290810191909152600760fc1b6060820152611700916003916116f781606181016115e7565b51902016611517565b821b91610ff060f08416931683036116275750178038806116c0565b605a91501060001461173057836001611598565b836002611598565b6040959195856064825160208101908782528685820152600160f81b60608201526041815261176681611051565b5190200616605711611926575b856064825160208101908782528685820152600160f91b60608201526041815261179c81611051565b51902006166028116117b0575b5050611554565b85818487939995995183606460208301836117e1868d84909160419282526020820152600360f81b60408201520190565b03936117f5601f1995868101835282611083565b5190200616601911156118565750505050508015801561184c575b156118225750600a17935b38806117a9565b80600196929614908115611841575b501561181b57936005179361181b565b905060031438611831565b5080600214611810565b9151602081018881526040820192909252600360f81b6060820152606192830181526064926118859082611083565b5190200616603211156118da5750806118a257506008179361181b565b600181036118b55750600117935b61181b565b600281036118c757506002179361181b565b6003959195036118b0579382179361181b565b9190806118ed575060029150179361181b565b600181036118fd5750179361181b565b9091506002810361191257506008179361181b565b6003959195036118b057936001179361181b565b955061193181611517565b95611773565b9061ffff809216600101918211610f7b57565b906119549161140b565b6001600160ff1b0381168103610f7b5760059060011b0480156000146110125750600190565b6119839061136a565b6001600160ff1b0381168103610f7b5760069060011b0480156000146110125750600190565b60099060070b02908160070b918203610f7b5756fea26469706673582212203c4c43883a7319f368409400962e63e23b1d5d86c7925e44e3f62a0da6e003f964736f6c63430008140033"
  },
  "solcInputHash": "c3f7781b474a2ffb8b521db8cd0755da",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"oldLocation\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"newLocation\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"mode\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"path\",\"type\":\"uint256\"}],\"name\":\"CharacterMoved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"monsterId\",\"type\":\"uint256\"}],\"name\":\"Death\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"name\",\"type\":\"string\"}],\"name\":\"Enter\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"gearId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"slotType\",\"type\":\"uint8\"}],\"name\":\"Equip\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint16\",\"name\":\"hp\",\"type\":\"uint16\"}],\"name\":\"Heal\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint16\",\"name\":\"newLevel\",\"type\":\"uint16\"}],\"name\":\"LevelUp\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"uint64\",\"name\":\"id\",\"type\":\"uint64\"},{\"indexed\":true,\"internalType\":\"uint8\",\"name\":\"status\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"data\",\"type\":\"string\"}],\"name\":\"QuestUpdate\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"areaLocation\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"blockNumber\",\"type\":\"uint64\"}],\"name\":\"RandomEvent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"gearId\",\"type\":\"uint256\"}],\"name\":\"Recycle\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"deadCharacterId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newCharacterId\",\"type\":\"uint256\"}],\"name\":\"Resurrect\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"location\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"blockHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"exits\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"kind\",\"type\":\"uint8\"}],\"name\":\"RoomActualised\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"location\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"blockNumber\",\"type\":\"uint64\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"direction\",\"type\":\"uint8\"}],\"name\":\"RoomDiscovered\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"location\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"RoomIncome\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"location\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"name\",\"type\":\"string\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"}],\"name\":\"RoomName\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"tax\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newDueDate\",\"type\":\"uint256\"}],\"name\":\"RoomTaxPay\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"players\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"amounts\",\"type\":\"uint256[]\"}],\"name\":\"batchMineVaultElements\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"monsterId\",\"type\":\"uint256\"}],\"name\":\"characterDefeated\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"monsterId\",\"type\":\"uint256\"},{\"internalType\":\"int16\",\"name\":\"hpChange\",\"type\":\"int16\"}],\"name\":\"characterEscaped\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"location\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"internalType\":\"uint16[8]\",\"name\":\"amounts\",\"type\":\"uint16[8]\"}],\"name\":\"claimBounty\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"forward\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"success\",\"type\":\"bool\"}],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"location\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"benefactor\",\"type\":\"address\"},{\"internalType\":\"uint16[8]\",\"name\":\"income\",\"type\":\"uint16[8]\"}],\"name\":\"generateRoomIncome\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"location\",\"type\":\"uint256\"}],\"name\":\"monsterDefeated\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"blockHashRegister\",\"type\":\"address\"},{\"internalType\":\"contract Player\",\"name\":\"playerContract\",\"type\":\"address\"},{\"internalType\":\"address payable\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"adminContract\",\"type\":\"address\"}],\"name\":\"postUpgrade\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"contract Characters\",\"name\":\"characters\",\"type\":\"address\"},{\"internalType\":\"contract Elements\",\"name\":\"elements\",\"type\":\"address\"},{\"internalType\":\"contract Gears\",\"name\":\"gears\",\"type\":\"address\"},{\"internalType\":\"contract Rooms\",\"name\":\"rooms\",\"type\":\"address\"}],\"name\":\"start\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"location\",\"type\":\"uint256\"}],\"name\":\"teleportCharacter\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"monsterId\",\"type\":\"uint256\"},{\"internalType\":\"int16\",\"name\":\"hpChange\",\"type\":\"int16\"},{\"internalType\":\"uint16\",\"name\":\"xpGained\",\"type\":\"uint16\"},{\"internalType\":\"uint256\",\"name\":\"gearData\",\"type\":\"uint256\"},{\"internalType\":\"int64\",\"name\":\"durabilityChange\",\"type\":\"int64\"},{\"internalType\":\"int16[8]\",\"name\":\"balanceChange\",\"type\":\"int16[8]\"}],\"name\":\"updateCharacter\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"character\",\"type\":\"uint256\"},{\"internalType\":\"uint64\",\"name\":\"id\",\"type\":\"uint64\"},{\"internalType\":\"uint8\",\"name\":\"status\",\"type\":\"uint8\"},{\"internalType\":\"string\",\"name\":\"data\",\"type\":\"string\"}],\"name\":\"updateQuest\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"characterId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"location\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"data\",\"type\":\"uint256\"},{\"internalType\":\"uint256[8]\",\"name\":\"amountsPayed\",\"type\":\"uint256[8]\"}],\"name\":\"updateRoomData\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/dungeon/DungeonAdminFacet.sol\":\"DungeonAdminFacet\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[],\"viaIR\":true},\"sources\":{\"hardhat-deploy/solc_0.8/proxy/Proxied.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.0;\\n\\nabstract contract Proxied {\\n    /// @notice to be used by initialisation / postUpgrade function so that only the proxy's admin can execute them\\n    /// It also allows these functions to be called inside a contructor\\n    /// even if the contract is meant to be used without proxy\\n    modifier proxied() {\\n        address proxyAdminAddress = _proxyAdmin();\\n        // With hardhat-deploy proxies\\n        // the proxyAdminAddress is zero only for the implementation contract\\n        // if the implementation contract want to be used as a standalone/immutable contract\\n        // it simply has to execute the `proxied` function\\n        // This ensure the proxyAdminAddress is never zero post deployment\\n        // And allow you to keep the same code for both proxied contract and immutable contract\\n        if (proxyAdminAddress == address(0)) {\\n            // ensure can not be called twice when used outside of proxy : no admin\\n            // solhint-disable-next-line security/no-inline-assembly\\n            assembly {\\n                sstore(\\n                    0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103,\\n                    0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\\n                )\\n            }\\n        } else {\\n            require(msg.sender == proxyAdminAddress);\\n        }\\n        _;\\n    }\\n\\n    modifier onlyProxyAdmin() {\\n        require(msg.sender == _proxyAdmin(), \\\"NOT_AUTHORIZED\\\");\\n        _;\\n    }\\n\\n    function _proxyAdmin() internal view returns (address ownerAddress) {\\n        // solhint-disable-next-line security/no-inline-assembly\\n        assembly {\\n            ownerAddress := sload(0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103)\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xaaceeafeeaf0d200ca3942d8bf14c1c4f787a77f79cc87c08bb668e65acdee29\",\"license\":\"MIT\"},\"src/characters/Characters.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"hardhat-deploy/solc_0.8/proxy/Proxied.sol\\\";\\nimport \\\"./CharactersDataLayout.sol\\\";\\n\\ncontract Characters is Proxied, CharactersDataLayout {\\n    event CharacterUpdate(uint256 indexed id, address indexed owner, uint256 data);\\n    event Transfer(address indexed from, address indexed to, uint256 indexed id);\\n\\n    function postUpgrade() external proxied {\\n        if (nextId == 0) {\\n            nextId = 1;\\n        }\\n    }\\n\\n    function getSubOwner(uint256 id) external view returns (uint256) {\\n        return _subOwner[id][_owners[id]];\\n    }\\n\\n    function setSubOwner(uint256 id, uint256 subOwner) external {\\n        require(msg.sender == _owners[id], \\\"only owner is able to set sub owner\\\");\\n        _setSubOwnerFor(id, msg.sender, subOwner);\\n    }\\n\\n    function _setSubOwnerFor(\\n        uint256 id,\\n        address owner,\\n        uint256 subOwner\\n    ) internal {\\n        // TODO emit SubOwnerTransferEvent\\n        _subOwner[id][owner] = subOwner;\\n    }\\n\\n    function mintTo(address to) external returns (uint256) {\\n        return _mint(to);\\n    }\\n\\n    // subowner is uint(address) of player currently\\n    // when subowner == 0 character is considered not in the dungeon\\n    function mint(uint256 subOwner) external returns (uint256) {\\n        uint256 id = _mint(msg.sender);\\n        _setSubOwnerFor(id, msg.sender, subOwner);\\n        return id;\\n    }\\n\\n    function _mint(address to) internal returns (uint256) {\\n        uint256 id = nextId++;\\n        _owners[id] = to;\\n        _numPerOwners[to]++;\\n        emit Transfer(address(0), to, id);\\n        return id;\\n    }\\n\\n    function getData(uint256 id) external view returns (uint256) {\\n        return _data[id][msg.sender];\\n    }\\n\\n    function getDataFor(uint256 id, address owner) external view returns (uint256) {\\n        return _data[id][owner];\\n    }\\n\\n    // TODO only dungeon should be able to set data\\n    // currently this can be called by the player when characters is outside of dungeon\\n    function setData(uint256 id, uint256 data) external {\\n        require(msg.sender == _ownerOf(id), \\\"only owner is allowed to set data\\\");\\n        _setDataFor(id, msg.sender, data);\\n    }\\n\\n    function _setDataFor(\\n        uint256 id,\\n        address owner,\\n        uint256 data\\n    ) internal {\\n        _data[id][owner] = data;\\n        emit CharacterUpdate(id, owner, data);\\n    }\\n\\n    function _ownerOf(uint256 id) internal view returns (address) {\\n        return _owners[id];\\n    }\\n\\n    function fullOwnerOf(uint256 id) external view returns (address owner, uint256 subOwner) {\\n        owner = _ownerOf(id);\\n        subOwner = _subOwner[id][owner];\\n    }\\n\\n    // EIP-721 Standard\\n    function ownerOf(uint256 id) external view returns (address tokenOwner) {\\n        tokenOwner = _ownerOf(id);\\n        require(tokenOwner != address(0), \\\"token does not exist\\\");\\n    }\\n\\n    function balanceOf(address who) external view returns (uint256) {\\n        require(who != address(0), \\\"zero address\\\");\\n        return _numPerOwners[who];\\n    }\\n\\n    function transferFrom(\\n        address from,\\n        address to,\\n        uint256 id\\n    ) external {\\n        require(from != address(0), \\\"from is zero address\\\");\\n        require(to != address(0), \\\"to is zero address\\\");\\n        address owner = _owners[id];\\n        require(owner == from, \\\"from is not owner\\\");\\n        _subOwner[id][owner] = 0;\\n        _owners[id] = to;\\n        _numPerOwners[from]--;\\n        _numPerOwners[to]++;\\n    }\\n\\n    function supportsInterface(bytes4 id) external pure returns (bool) {\\n        // TODO metadata || id == 0x5b5e139f;\\n        return id == 0x01ffc9a7 || id == 0x80ac58cd;\\n    }\\n}\\n\",\"keccak256\":\"0xcc9355031d7447f7b27da41ff240cfdf96cc59c5d4e273d3f7940ce95b22ef30\",\"license\":\"MIT\"},\"src/characters/CharactersDataLayout.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\ncontract CharactersDataLayout {\\n    uint256 nextId;\\n    mapping(uint256 => address) _owners;\\n    mapping(address => uint256) _numPerOwners;\\n    mapping(uint256 => mapping(address => uint256)) _subOwner;\\n    mapping(uint256 => mapping(address => uint256)) _data;\\n}\\n\",\"keccak256\":\"0x8b2acf9ac90aabf99ea230bfdefd3a9fbe70851f94cc5be2c331543560d7f811\",\"license\":\"MIT\"},\"src/diamond/DiamondStorageContract.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\n/**\\n * @title DiamondStorageContract\\n * @dev Base contract for Diamond Standard (EIP-2535) storage pattern\\n * This is a recreation of the buidler-deploy DiamondStorageContract for Solidity 0.8+\\n */\\nabstract contract DiamondStorageContract {\\n    \\n    struct DiamondStorage {\\n        // Owner of the contract\\n        address contractOwner;\\n        // maps function selectors to the facets that execute the functions\\n        // and maps the selectors to their position in the selectorSlots array\\n        mapping(bytes4 => bytes32) facets;\\n        // array of slots of function selectors\\n        // each slot holds 8 function selectors\\n        mapping(uint256 => bytes32) selectorSlots;\\n        // The number of function selectors in selectorSlots\\n        uint16 selectorCount;\\n        // Used to query if a contract implements an interface\\n        // Used to implement ERC-165\\n        mapping(bytes4 => bool) supportedInterfaces;\\n    }\\n\\n    // Storage position for DiamondStorage\\n    // keccak256(\\\"diamond.standard.diamond.storage\\\")\\n    bytes32 constant DIAMOND_STORAGE_POSITION = 0xc8fcad8db84d3cc18b4c41d551ea0ee66dd599cde068d998e57d5e09332c131c;\\n\\n    /**\\n     * @dev Returns the DiamondStorage struct at the defined storage position\\n     */\\n    function diamondStorage() internal pure returns (DiamondStorage storage ds) {\\n        bytes32 position = DIAMOND_STORAGE_POSITION;\\n        assembly {\\n            ds.slot := position\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xc4527b6b62276e166e78e41c2f2562c9c1d312b3fded0e7784ecd349a0fd37f3\",\"license\":\"MIT\"},\"src/dungeon/DungeonAdminFacet.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"./DungeonFacetBase.sol\\\";\\nimport \\\"./PureDungeon.sol\\\";\\nimport \\\"../utils/BlockHashRegister.sol\\\";\\nimport \\\"../characters/Characters.sol\\\";\\nimport \\\"../tokens/Elements.sol\\\";\\nimport \\\"../tokens/Gears.sol\\\";\\nimport \\\"../player/Player.sol\\\";\\n\\ncontract DungeonAdminFacet is DungeonFacetBase {\\n    function postUpgrade(\\n        address blockHashRegister,\\n        Player playerContract,\\n        address payable owner,\\n        address adminContract\\n    ) external onlyOwner {\\n        _playerContract = playerContract;\\n        playerContract.register();\\n        _blockHashRegister = BlockHashRegister(blockHashRegister);\\n        _adminContract = adminContract;\\n    }\\n\\n    function forward(address to, bytes memory data) public payable onlyAdmin returns (bool success) {\\n        uint256 value = msg.value;\\n        assembly {\\n            success := call(gas(), to, value, add(data, 0x20), mload(data), 0, 0)\\n        }\\n        require(success, \\\"failed to forward\\\");\\n    }\\n\\n    function updateCharacter(\\n        uint256 characterId,\\n        uint256 monsterId,\\n        int16 hpChange,\\n        uint16 xpGained,\\n        uint256 gearData,\\n        int64 durabilityChange,\\n        int16[8] calldata balanceChange // 5 elements, coins, keys, fragments\\n    ) external onlyAdmin {\\n        _blockHashRegister.save();\\n        Character storage character = _characters[characterId];\\n        _actualiseRoom(character.location);\\n        if (gearData > 0) {\\n            require(_gearsContract.subBalanceOf(characterId) < MAX_GEARS, \\\"Too many gears\\\");\\n            _gearsContract.mint(characterId, gearData);\\n        }\\n        for (uint8 i = 0; i < balanceChange.length; i++) {\\n            int16 change = balanceChange[i];\\n            if (change > 0) {\\n                _elementsContract.mint(characterId, i + 1, uint256(uint16(change)));\\n            } else if (change < 0) {\\n                _elementsContract.subBurnFrom(characterId, i + 1, uint256(uint16(-change)));\\n            }\\n        }\\n        CharacterData memory characterData = _getCharacterData(characterId);\\n        if (hpChange != 0) {\\n            characterData.hp = PureDungeon._limitedChange(characterData.hp, characterData.maxHP, hpChange);\\n            if (characterData.hp == 0) {\\n                emit Death(characterId, monsterId);\\n            }\\n        }\\n        characterData.xp += xpGained;\\n        _setCharacterData(characterId, characterData);\\n        if (durabilityChange != 0) {\\n            GearData memory attackGear = _getGearData(character.slot_1);\\n            if (attackGear.maxDurability != 0) {\\n                attackGear.durability = PureDungeon._limitedChange(\\n                    attackGear.durability,\\n                    attackGear.maxDurability,\\n                    durabilityChange\\n                );\\n                _setGearData(character.slot_1, attackGear);\\n                if (attackGear.durability == 0) {\\n                    _gearsContract.subBurn(character.slot_1);\\n                }\\n            }\\n            GearData memory defenseGear = _getGearData(character.slot_2);\\n            if (defenseGear.maxDurability != 0) {\\n                defenseGear.durability = PureDungeon._limitedChange(\\n                    defenseGear.durability,\\n                    defenseGear.maxDurability,\\n                    durabilityChange\\n                );\\n                _setGearData(character.slot_2, defenseGear);\\n                if (defenseGear.durability == 0) {\\n                    _gearsContract.subBurn(character.slot_2);\\n                }\\n            }\\n        }\\n    }\\n\\n    function claimBounty(uint256 location, uint256 characterId, uint16[8] calldata amounts) external onlyAdmin {\\n        uint256 bounty = PureDungeon._locationToBounty(location);\\n        for (uint8 i = 0; i < amounts.length; i++) {\\n            if (amounts[i] > 0) {\\n                _elementsContract.subTransferFrom(bounty, characterId, i + 1, amounts[i]);\\n            }\\n        }\\n    }\\n\\n    function updateRoomData(uint256 characterId, uint256 location, uint256 data, uint256[8] calldata amountsPayed) external onlyAdmin {\\n        require(_isRoomActive(location), 'room is not active');\\n        uint256 owner = _roomsContract.subOwnerOf(location);\\n        uint256 player = _charactersContract.getSubOwner(characterId);\\n        require(owner == player, \\\"not owner\\\");\\n        for (uint256 i = 0; i < amountsPayed.length; i++) {\\n            _elementsContract.transferFrom(address(uint160(owner)), address(0), i+1, amountsPayed[i]);\\n        }\\n        _roomsContract.setData(location, data);\\n    }\\n\\n    function teleportCharacter(uint256 characterId, uint256 location) external onlyAdmin {\\n        _blockHashRegister.save();\\n        Character storage character = _characters[characterId];\\n        uint256 oldLocation = character.location;\\n        _actualiseRoom(oldLocation);\\n        emit CharacterMoved(characterId, oldLocation, location, 1, PureDungeon.DOWN);\\n        (, ,int64 floor, ) = PureDungeon._coordinates(location);\\n        if (character.floors < floor) {\\n            character.floors = floor;\\n        }\\n        _move(characterId, location, PureDungeon.DOWN);\\n    }\\n\\n    function monsterDefeated(uint256 location) external onlyAdmin {\\n        _blockHashRegister.save();\\n        _actualiseRoom(location);\\n        Room storage room = _rooms[location];\\n        if (room.monsterBlockNumber != 0) {\\n            room.monsterBlockNumber = 0;\\n        }\\n        if (room.randomEvent != 0) {\\n            room.randomEvent = 0;\\n        }\\n        if (_roomsContract.getData(location) > 0) {\\n            _roomsContract.setData(location, 0);\\n        }\\n    }\\n\\n    function characterDefeated(uint256 characterId, uint256 monsterId) external onlyAdmin {\\n        _blockHashRegister.save();\\n        Character storage character = _characters[characterId];\\n        _actualiseRoom(character.location);\\n        CharacterData memory characterData = _getCharacterData(characterId);\\n        characterData.hp = 0;\\n        _setCharacterData(characterId, characterData);\\n        emit Death(characterId, monsterId);\\n    }\\n\\n    function characterEscaped(\\n        uint256 characterId,\\n        uint256 monsterId,\\n        int16 hpChange\\n    ) external onlyAdmin {\\n        _blockHashRegister.save();\\n        Character storage character = _characters[characterId];\\n        uint256 location = character.location;\\n        _actualiseRoom(location);\\n        CharacterData memory characterData = _getCharacterData(characterId);\\n        int64 newHp = int64(uint64(characterData.hp)) + int64(hpChange);\\n        if (newHp > int64(uint64(characterData.maxHP))) {\\n            characterData.hp = characterData.maxHP;\\n        }\\n        if (newHp <= 0) {\\n            emit Death(characterId, monsterId);\\n            characterData.hp = 0;\\n        } else {\\n            characterData.hp = uint16(int16(newHp));\\n        }\\n        _setCharacterData(characterId, characterData);\\n        uint8 reverseDirection = (character.direction + 2) % 4;\\n        uint256 escapeTo = _moveTo(characterId, location, reverseDirection);\\n        emit CharacterMoved(characterId, character.location, escapeTo, 0, reverseDirection);\\n        _actualiseRoom(escapeTo);\\n        _rooms[character.location].numActiveCharacters--;\\n        _rooms[escapeTo].numActiveCharacters++;\\n        character.location = escapeTo;\\n        character.direction = reverseDirection;\\n    }\\n\\n    function updateQuest(uint256 character, uint64 id, uint8 status, string calldata data) external onlyAdmin {\\n        Quest storage quest = _quests[character][id];\\n        quest.status = status;\\n        quest.data = data;\\n        emit QuestUpdate(character, id, status, data);\\n    }\\n\\n    // TODO: remove when not needed\\n    function batchMineVaultElements(uint256 id, address[] calldata players, uint256[] calldata amounts) external onlyAdmin {\\n        for (uint256 i = 0; i < players.length; i++) {\\n            _elementsContract.mintVault(players[i], id, amounts[i]);\\n        }\\n    }\\n\\n    function generateRoomIncome(uint256 location, address benefactor, uint16[8] calldata income) external onlyAdmin {\\n        for (uint8 i = 0; i < income.length; i++) {\\n            uint256 id = i + 1;\\n            uint256 amount = uint256(income[i]);\\n            if (amount > 0) {\\n                _elementsContract.mintVault(benefactor, id, amount);\\n                emit RoomIncome(location, benefactor, id, amount);\\n            }\\n        }\\n    }\\n\\n    function start(\\n        Characters characters,\\n        Elements elements,\\n        Gears gears,\\n        Rooms rooms\\n    ) external onlyOwner {\\n        _charactersContract = characters;\\n        _elementsContract = elements;\\n        _gearsContract = gears;\\n        _roomsContract = rooms;\\n        Room storage room = _rooms[PureDungeon.LOCATION_ZERO];\\n        require(room.kind == 0, \\\"dungeon already started\\\");\\n        _discoverRoom(PureDungeon.LOCATION_ZERO, 0, PureDungeon.DOWN);\\n    }\\n}\\n\",\"keccak256\":\"0xf402b18d730b12766d4a288bc5327fb78101348988605f313bf538bf91a1b5a1\",\"license\":\"MIT\"},\"src/dungeon/DungeonDataLayout.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"../utils/BlockHashRegister.sol\\\";\\nimport \\\"../characters/Characters.sol\\\";\\nimport \\\"../tokens/Elements.sol\\\";\\nimport \\\"../tokens/Gears.sol\\\";\\nimport \\\"../tokens/Rooms.sol\\\";\\nimport \\\"../player/Player.sol\\\";\\n\\ncontract DungeonDataLayout {\\n    struct Room {\\n        uint64 blockNumber;\\n        uint64 monsterBlockNumber;\\n        uint64 numActiveCharacters;\\n        uint8 direction;\\n        uint8 exits;\\n        uint8 kind;\\n        uint8 areaAtDiscovery;\\n        uint8 lastRoomIndex;\\n        uint8 index;\\n        uint256 discoverer;\\n        uint64 randomEvent;\\n    }\\n\\n    struct Character {\\n        uint256 location;\\n        uint8 direction;\\n        int64 floors;\\n        uint256 slot_1; // attack // TODO store this on character NFT ?\\n        uint256 slot_2; // defense // TODO store this on character NFT ?\\n        uint256 slot_3; // accessory 1 // TODO store this on character NFT ?\\n        uint256 slot_4; // accessory 2 // TODO store this on character NFT ?5\\n        uint256 slot_5; // accessory 3 // TODO store this on character NFT ?\\n    }\\n\\n    struct Area {\\n        uint8 areaType;\\n        uint8 discovered; // record room types already discovered : temple, teleport ...\\n        uint8 lastRoomIndex; // track what was the index of the room discovered first in last block\\n        uint8 currentIndex; // track the index of room discovered in the same block\\n        uint256 lastRoom; // last room disovered in a block, used for area blockHash too\\n        uint64 eventBlockNumber;\\n    }\\n\\n    mapping(uint256 => Character) _characters;\\n    mapping(uint256 => Room) _rooms;\\n    mapping(uint256 => Area) _areas;\\n\\n    struct AreaCounter {\\n        uint64 lastPeriod;\\n        uint64 numAreas;\\n    }\\n    AreaCounter _areaCounter;\\n\\n    address _adminContract;\\n    BlockHashRegister _blockHashRegister;\\n    Characters _charactersContract;\\n    Elements _elementsContract;\\n    Gears _gearsContract;\\n    Rooms _roomsContract;\\n    Player _playerContract;\\n\\n    mapping(uint256 => mapping(uint256 => mapping(uint256 => bool))) _unlockedExits;\\n\\n    struct Quest {\\n        uint8 status;\\n        string data;\\n    }\\n    mapping(uint256 => mapping(uint64 => Quest)) _quests; // _quests[character][id]\\n\\n    mapping(address => uint256) _taxDueDate;\\n\\n    mapping(uint256 => string) _customRoomNames;\\n}\\n\",\"keccak256\":\"0x70162642f692c54d2566c92ab3822b4c6d2ed179591165037aaea975990dd2ab\",\"license\":\"MIT\"},\"src/dungeon/DungeonEvents.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\ncontract DungeonEvents {\\n    event RoomDiscovered(uint256 indexed location, uint64 blockNumber, uint8 direction);\\n    event RoomActualised(uint256 indexed location, bytes32 blockHash, uint8 exits, uint8 kind);\\n    event CharacterMoved(\\n        uint256 indexed characterId,\\n        uint256 indexed oldLocation,\\n        uint256 indexed newLocation,\\n        uint8 mode,\\n        uint256 path\\n    );\\n    event Enter(uint256 indexed characterId, address indexed player, string name);\\n    event Death(uint256 indexed characterId, uint256 monsterId);\\n    event LevelUp(uint256 indexed characterId, uint16 newLevel);\\n    event Equip(uint256 characterId, uint256 gearId, uint8 slotType);\\n    event Resurrect(uint256 indexed deadCharacterId, uint256 newCharacterId);\\n    event Heal(uint256 indexed characterId, uint16 hp);\\n    event RandomEvent(uint256 indexed areaLocation, uint64 blockNumber);\\n    event Recycle(uint256 indexed characterId, uint256 gearId);\\n    event QuestUpdate(uint256 indexed characterId, uint64 indexed id, uint8 indexed status, string data);\\n    event RoomTaxPay(address indexed owner, uint256 tax, uint256 newDueDate);\\n    event RoomIncome(uint256 indexed location, address indexed owner, uint256 id, uint256 amount);\\n    event RoomName(uint256 indexed location, string name, uint256 characterId);\\n}\\n\",\"keccak256\":\"0xf66026ea03c69423579146b584b537cce0b04de850375c415e1eac548fcb7b58\",\"license\":\"MIT\"},\"src/dungeon/DungeonFacetBase.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"../diamond/DiamondStorageContract.sol\\\";\\nimport \\\"./DungeonDataLayout.sol\\\";\\nimport \\\"./DungeonEvents.sol\\\";\\nimport \\\"./PureDungeon.sol\\\";\\nimport \\\"../utils/BlockHashRegister.sol\\\";\\nimport \\\"../characters/Characters.sol\\\";\\nimport \\\"../tokens/Elements.sol\\\";\\nimport \\\"../tokens/Gears.sol\\\";\\nimport \\\"../player/Player.sol\\\";\\n\\nabstract contract DungeonFacetBase is DungeonDataLayout, DungeonEvents, DiamondStorageContract {\\n    uint256 internal constant MAX_GEARS = 10;\\n\\n\\n    modifier onlyOwner() {\\n        DiamondStorage storage ds = diamondStorage();\\n        require(msg.sender == ds.contractOwner, \\\"Only owner is allowed to perform this action\\\");\\n        _;\\n    }\\n\\n    modifier onlyAdmin() {\\n        require(msg.sender == _adminContract, \\\"NOT_AUTHORIZED_ADMIN\\\");\\n        _;\\n    }\\n\\n    modifier onlyPlayer() {\\n        require(msg.sender == address(_playerContract), \\\"only players allowed\\\");\\n        _;\\n    }\\n\\n    function _actualiseRoom(uint256 location) internal {\\n        Room storage room = _rooms[location];\\n        require(room.blockNumber > 0, \\\"room not created yet\\\");\\n        if (room.kind == 0) {\\n            bytes32 blockHash = _blockHashRegister.get(room.blockNumber);\\n            if (blockHash == 0) {\\n                // skip as block is not actualised or not in register\\n                return;\\n            }\\n            _actualiseArea(location, blockHash);\\n            (uint8 exits, uint8 kind, uint8 area_discovered) = PureDungeon._generateRoom(\\n                location,\\n                blockHash,\\n                room.direction,\\n                room.areaAtDiscovery,\\n                room.lastRoomIndex,\\n                room.index\\n            );\\n            room.exits = exits;\\n            room.kind = kind;\\n            uint256 areaLoc = PureDungeon._getAreaLoc(location);\\n            Area storage area = _areas[areaLoc];\\n            if (area.discovered != area_discovered) {\\n                area.discovered = area_discovered;\\n            }\\n            emit RoomActualised(location, blockHash, exits, kind);\\n            uint8 areaType = _areas[areaLoc].areaType;\\n            if (room.discoverer != 0) {\\n                CharacterData memory characterData = _getCharacterData(room.discoverer);\\n                (uint256 numGold, uint256 numElements) = PureDungeon._computeRoomDiscoveryReward(\\n                    location,\\n                    blockHash,\\n                    characterData.class\\n                );\\n                if (areaType <= 5) {\\n                    _elementsContract.mint(room.discoverer, areaType, numElements);\\n                }\\n                _elementsContract.mint(room.discoverer, 6, numGold);\\n            }\\n        }\\n        _actualiseRandomEvent(PureDungeon._getAreaLoc(location)); // room actualisation take precedence // monster\\n    }\\n\\n    function _actualiseArea(uint256 location, bytes32 blockHash) internal {\\n        uint256 areaLoc = PureDungeon._getAreaLoc(location);\\n        uint8 areaType = _areas[areaLoc].areaType;\\n        if (areaType == 0) {\\n            uint64 currentNumAreas = _areaCounter.numAreas;\\n            areaType = PureDungeon._generateArea(areaLoc, blockHash, currentNumAreas);\\n            _areas[areaLoc].areaType = areaType;\\n            if (areaType != 6) {\\n                uint64 period = uint64(block.timestamp / 23 hours);\\n                if (_areaCounter.lastPeriod != period) {\\n                    _areaCounter.lastPeriod = period;\\n                    _areaCounter.numAreas = 1;\\n                } else {\\n                    _areaCounter.numAreas = currentNumAreas + 1;\\n                }\\n            }\\n        }\\n    }\\n\\n    struct CharacterData {\\n        uint8 class;\\n        uint16 level;\\n        uint32 xp;\\n        uint16 maxHP;\\n        uint16 hp;\\n    }\\n\\n    function _setCharacterData(uint256 characterId, CharacterData memory characterData) internal {\\n        uint256 data = ((uint256(characterData.class) << 248) +\\n            (uint256(characterData.level) << 232) +\\n            (uint256(characterData.xp) << 200) +\\n            (uint256(characterData.maxHP) << 184) +\\n            (uint256(characterData.hp) << 168));\\n        _charactersContract.setData(characterId, data);\\n    }\\n\\n    function _getCharacterData(uint256 characterId) internal view returns (CharacterData memory) {\\n        uint256 data = _charactersContract.getData(characterId);\\n        (uint16 level, uint16 hp, uint16 maxHP, uint32 xp, uint8 class) = PureDungeon._decodeCharacterData(data);\\n        return CharacterData(class, level, xp, maxHP, hp);\\n    }\\n\\n    function _actualiseRandomEvent(uint256 areaLoc) internal {\\n        Area storage area = _areas[areaLoc];\\n        uint64 blockNumber = area.eventBlockNumber;\\n        if (blockNumber != 0) {\\n            bytes32 blockHash = _blockHashRegister.get(blockNumber);\\n            if (blockHash == 0) {\\n                // skip as block is not actualised or not in register\\n                return;\\n            }\\n            (uint256 roomLocation, uint64 randomEvent) = PureDungeon._generateRandomEvent(areaLoc, blockHash);\\n            uint256 monsterIndex = _checkMonsterBlockNumber(roomLocation);\\n            Room storage room = _rooms[roomLocation];\\n            if (room.randomEvent != 2\\n                && room.numActiveCharacters == 0\\n                && monsterIndex == 0\\n                && room.kind != 0\\n            ) {\\n                room.randomEvent = randomEvent;\\n            }\\n            area.eventBlockNumber = 0;\\n        }\\n    }\\n\\n    /// @dev to be valid it require the room to be actualised first\\n    function _checkMonster(uint256 location) internal view returns (uint256) {\\n        uint256 monsterIndex = _checkMonsterBlockNumber(location);\\n        // if (monsterIndex == 0) {\\n        //     if (_roomEvents[location] == 1)  { //TODO monster indicator\\n        //         return 1;\\n        //     }\\n        //     return 0;\\n        // }\\n        return monsterIndex;\\n    }\\n\\n    function _checkMonsterBlockNumber(uint256 location) internal view returns (uint256) {\\n        uint64 monsterBlockNumber = _rooms[location].monsterBlockNumber;\\n        if (monsterBlockNumber == 0) {\\n            // no monsters\\n            return 0;\\n        }\\n        bytes32 monsterBlockHash = _blockHashRegister.get(monsterBlockNumber);\\n        if (monsterBlockHash == 0) {\\n            // skip as monster block is not actualised\\n            return 0;\\n        }\\n        bool newlyDiscoveredRoom = monsterBlockNumber == _rooms[location].blockNumber;\\n        return\\n            PureDungeon._generateMonsterIndex(\\n                location,\\n                monsterBlockHash,\\n                1,\\n                newlyDiscoveredRoom,\\n                _rooms[location].kind\\n            );\\n    }\\n\\n    struct GearData {\\n        uint16 level;\\n        uint8 slot;\\n        uint8 classBits; // bit array of allowed classes indexed by lsb\\n        uint16 durability;\\n        uint16 maxDurability; // gear is unbreakable when maxDurablity is 0\\n        uint32 template;\\n    }\\n\\n    function _setGearData(uint256 gearId, GearData memory gear) internal {\\n        uint256 data = PureDungeon._encodeGearData(\\n            gear.level,\\n            gear.slot,\\n            gear.classBits,\\n            gear.durability,\\n            gear.maxDurability,\\n            gear.template\\n        );\\n        _gearsContract.setData(gearId, data);\\n    }\\n\\n    function _getGearData(uint256 gearId) internal view returns (GearData memory) {\\n        uint256 data = _gearsContract.getData(gearId);\\n        (\\n            uint16 level,\\n            uint8 slot,\\n            uint8 classBits,\\n            uint16 durability,\\n            uint16 maxDurability,\\n            uint32 template\\n        ) = PureDungeon._decodeGearData(data);\\n        return GearData(level, slot, classBits, durability, maxDurability, template);\\n    }\\n\\n    function _addInitialGears(uint256 characterId) internal {\\n        uint256 attackGearData = PureDungeon._encodeGearData(0, 0, 15, 10, 10, 1);\\n        uint256 defenseGearData = PureDungeon._encodeGearData(0, 1, 15, 10, 10, 4);\\n        uint256 attackGear = _gearsContract.mint(characterId, attackGearData);\\n        _equip(characterId, 0, 0, attackGear, 0);\\n        uint256 defenseGear = _gearsContract.mint(characterId, defenseGearData);\\n        _equip(characterId, 0, 0, defenseGear, 1);\\n    }\\n\\n    // TODO restrict transfer of equiped items\\n    function _equip(\\n        uint256 characterId,\\n        uint16 level,\\n        uint8 class,\\n        uint256 id,\\n        uint8 slot\\n    ) internal {\\n        GearData memory gear = _getGearData(id);\\n        require(gear.level <= level, \\\"gear Level too high\\\");\\n        require((gear.classBits >> class) & 1 != 0, \\\"invalid class\\\");\\n        if (slot == 0) {\\n            require(gear.slot == 0, \\\"only attack gear on slot 0\\\");\\n            _characters[characterId].slot_1 = id;\\n        } else if (slot == 1) {\\n            require(gear.slot == 1, \\\"only defense gear on slot 1\\\");\\n            _characters[characterId].slot_2 = id;\\n        } else if (slot == 2) {\\n            require(gear.slot == 2, \\\"only accessories on slot 2\\\");\\n            _characters[characterId].slot_3 = id;\\n        } else if (slot == 3) {\\n            require(gear.slot == 2, \\\"only accessories on slot 3\\\");\\n            _characters[characterId].slot_4 = id;\\n        } else if (slot == 4) {\\n            require(gear.slot == 2, \\\"only accessories on slot 4\\\");\\n            _characters[characterId].slot_5 = id;\\n        }\\n        emit Equip(characterId, id, gear.slot);\\n    }\\n\\n    function _handleKey(\\n        uint256 characterId,\\n        uint256 location,\\n        uint256 location2\\n    ) internal {\\n        uint256 location1 = location;\\n        if (location1 > location2) {\\n            location1 = location2;\\n            location2 = location;\\n        }\\n        if (!_isUnlocked(characterId, location1, location2)) {\\n            require(_elementsContract.subBalanceOf(characterId, PureDungeon.KEYS) > 0, \\\"no key\\\");\\n            _elementsContract.subBurnFrom(characterId, PureDungeon.KEYS, 1);\\n            _unlockedExits[characterId][location1][location2] = true;\\n        }\\n    }\\n\\n    function _isUnlocked(\\n        uint256 characterId,\\n        uint256 location1,\\n        uint256 location2\\n    ) internal view returns (bool) {\\n        return _unlockedExits[characterId][location1][location2];\\n    }\\n\\n    function _getAreaTypeForRoom(uint256 location) internal view returns (uint8) {\\n        return _areas[PureDungeon._getAreaLoc(location)].areaType;\\n    }\\n\\n    function _moveTo(\\n        uint256 characterId,\\n        uint256 oldLocation,\\n        uint8 direction\\n    ) internal returns (uint256) {\\n        (int64 x, int64 y, int64 z, ) = PureDungeon._coordinates(oldLocation);\\n        if (PureDungeon.NORTH == direction) {\\n            y--;\\n        } else if (PureDungeon.EAST == direction) {\\n            x++;\\n        } else if (PureDungeon.SOUTH == direction) {\\n            y++;\\n        } else if (PureDungeon.WEST == direction) {\\n            x--;\\n        } else {\\n            revert(\\\"impossible direction\\\");\\n        }\\n        uint256 newLocation = PureDungeon._location(x, y, z);\\n        Room storage currentRoom = _rooms[oldLocation];\\n        Room storage nextRoom = _rooms[newLocation];\\n        uint64 cb = currentRoom.blockNumber;\\n        uint64 nb = nextRoom.blockNumber;\\n        uint8 exitMask = uint8(2) ** direction;\\n        uint8 opositeExitMask = uint8(2) ** ((direction + 2) % 4);\\n        if (cb < nb || nb == 0) {\\n            if ((currentRoom.exits & exitMask) == exitMask) {\\n                if ((currentRoom.exits / 2 ** 4) & exitMask == exitMask) {\\n                    _handleKey(characterId, oldLocation, newLocation);\\n                }\\n                return newLocation;\\n            }\\n        } else if (cb > nb) {\\n            if ((nextRoom.exits & opositeExitMask) == opositeExitMask) {\\n                if ((nextRoom.exits / 2 ** 4) & opositeExitMask == opositeExitMask) {\\n                    _handleKey(characterId, oldLocation, newLocation);\\n                }\\n                return newLocation;\\n            }\\n        } else {\\n            if ((currentRoom.exits & exitMask) == exitMask || (nextRoom.exits & opositeExitMask) == opositeExitMask) {\\n                if (oldLocation > newLocation) {\\n                    if ((nextRoom.exits / 2 ** 4) & opositeExitMask == opositeExitMask) {\\n                        _handleKey(characterId, oldLocation, newLocation);\\n                    }\\n                } else {\\n                    if ((currentRoom.exits / 2 ** 4) & exitMask == exitMask) {\\n                        _handleKey(characterId, oldLocation, newLocation);\\n                    }\\n                }\\n                return newLocation;\\n            }\\n        }\\n        revert(\\\"cant move this way\\\");\\n    }\\n\\n    function _move(\\n        uint256 characterId,\\n        uint256 location,\\n        uint8 direction\\n    ) internal {\\n        Character storage character = _characters[characterId];\\n        Room storage currentRoom = _rooms[character.location];\\n        Room storage nextRoom = _rooms[location];\\n        uint64 blockNumber;\\n        if (nextRoom.blockNumber == 0) {\\n            _discoverRoom(location, characterId, direction);\\n        } else {\\n            // TODO should we actualiseRoom first, before monster ?\\n            // TODO can we remove num active characters check?\\n            if (\\n                nextRoom.monsterBlockNumber == 0\\n                    && nextRoom.numActiveCharacters == 0\\n                    && nextRoom.randomEvent != 2\\n                    && _roomsContract.getData(location) == 0\\n            ) {\\n                blockNumber = uint64(block.number);\\n                _blockHashRegister.request();\\n                if (nextRoom.monsterBlockNumber == 0) {\\n                    nextRoom.monsterBlockNumber = blockNumber;\\n                }\\n            }\\n            _actualiseRoom(location);\\n            address benefactor = _roomBenefactor(location);\\n            if (benefactor != address(0) && uint256(uint160(benefactor)) != _charactersContract.getSubOwner(characterId)) {\\n                _elementsContract.mintVault(benefactor, PureDungeon.FRAGMENTS, 1);\\n                emit RoomIncome(location, benefactor, PureDungeon.FRAGMENTS, 1);\\n            }\\n        }\\n        uint256 areaLoc = PureDungeon._getAreaLoc(location);\\n        Area storage area = _areas[areaLoc];\\n        if (area.eventBlockNumber == 0 && block.number % 3 == 0) {\\n            if (blockNumber == 0) {\\n                blockNumber = uint64(block.number);\\n                _blockHashRegister.request();\\n            }\\n            area.eventBlockNumber = blockNumber;\\n            emit RandomEvent(areaLoc, blockNumber);\\n        }\\n        currentRoom.numActiveCharacters--;\\n        nextRoom.numActiveCharacters++;\\n        character.location = location;\\n        character.direction = direction;\\n        _increaseHPXP(characterId);\\n    }\\n\\n    function _increaseHPXP(uint256 characterId) internal {\\n        CharacterData memory characterData = _getCharacterData(characterId);\\n        if (characterData.hp < characterData.maxHP) {\\n            characterData.hp += 1;\\n            _setCharacterData(characterId, characterData);\\n        }\\n    }\\n\\n    function _isRoomActive(uint256 location) internal view returns (bool) {\\n        address owner = _roomsContract.ownerOf(location);\\n        return owner == address(this);\\n    }\\n\\n    function _roomBenefactor(uint256 location) internal view returns (address) {\\n        if (_isRoomActive(location)) {\\n            return address(uint160(_roomsContract.subOwnerOf(location)));\\n        } else {\\n            return address(0);\\n        }\\n    }\\n\\n    function _pay(uint256 characterId, uint256 location, uint256 id, uint256 amount) internal {\\n        address benefactor = _roomBenefactor(location);\\n        if (benefactor != address(0)) {\\n            uint256 share = amount / 5;\\n            if (share > 0) {\\n                _elementsContract.subTransferFrom(characterId, 0, id, share);\\n                _elementsContract.transferFrom(address(this), benefactor, id, share);\\n                emit RoomIncome(location, benefactor, id, share);\\n            }\\n            _elementsContract.subBurnFrom(characterId, id, amount - share);\\n        } else {\\n            _elementsContract.subBurnFrom(characterId, id, amount);\\n        }\\n    }\\n\\n    function _discoverRoom(\\n        uint256 location,\\n        uint256 discoverer,\\n        uint8 direction\\n    ) internal {\\n        Area storage area = _areas[PureDungeon._getAreaLoc(location)];\\n        if (area.lastRoom > 0) {\\n            // area is also actualised with room when necessary\\n            _actualiseRoom(area.lastRoom);\\n            area.lastRoomIndex = area.currentIndex;\\n            area.lastRoom = 0;\\n        }\\n        _elementsContract.subBurnFrom(discoverer, PureDungeon.FRAGMENTS, PureDungeon._discoveryCost(location));\\n        Room storage nextRoom = _rooms[location];\\n        nextRoom.blockNumber = uint64(block.number);\\n        nextRoom.monsterBlockNumber = uint64(block.number);\\n        nextRoom.direction = direction;\\n        nextRoom.areaAtDiscovery = area.discovered;\\n        nextRoom.index = area.currentIndex++;\\n        nextRoom.lastRoomIndex = area.lastRoomIndex;\\n        nextRoom.discoverer = discoverer;\\n        area.lastRoom = location;\\n        _blockHashRegister.request();\\n        uint256 discovererOwner = _charactersContract.getSubOwner(discoverer);\\n        _initializeTaxDueDate(discovererOwner);\\n        _roomsContract.mintId(location, discovererOwner);\\n        emit RoomDiscovered(location, uint64(block.number), nextRoom.direction);\\n    }\\n\\n    function _initializeTaxDueDate(uint256 owner) internal {\\n        if (owner != 0 && _roomsContract.subBalanceOf(owner) == 0) {\\n            uint256 dueDate = block.timestamp + 5 days;\\n            _taxDueDate[address(uint160(owner))] = dueDate;\\n            emit RoomTaxPay(address(uint160(owner)), 0, dueDate);\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x733160bc199104f585801b788acc558c02dc856858344d32a731427b4cb3ca96\",\"license\":\"MIT\"},\"src/dungeon/PureDungeon.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nlibrary PureDungeon {\\n    uint256 internal constant LOCATION_ZERO = 2**255;\\n    uint256 internal constant BOUNTY = 2**254;\\n\\n    uint8 internal constant ROOM_TYPE_NORMAL = 1;\\n    uint8 internal constant ROOM_TYPE_TELEPORT = 2;\\n    uint8 internal constant ROOM_TYPE_TEMPLE = 3;\\n    uint8 internal constant ROOM_TYPE_LORE = 4;\\n    uint8 internal constant ROOM_TYPE_CARRIER = 5;\\n\\n    uint8 internal constant EXITS_INERTIA = 87;\\n    uint8 internal constant EXITS_BIFURCATION = 40;\\n    uint8 internal constant EXITS_BOTH_BIFURCATION = 25;\\n\\n    uint8 internal constant NORTH = 0;\\n    uint8 internal constant EAST = 1;\\n    uint8 internal constant SOUTH = 2;\\n    uint8 internal constant WEST = 3;\\n    uint8 internal constant DOWN = 4;\\n\\n    uint8 internal constant COINS = 6;\\n    uint8 internal constant KEYS = 7;\\n    uint8 internal constant FRAGMENTS = 8;\\n\\n    uint8 internal constant WARRIOR = 0;\\n    uint8 internal constant EXPLORER = 1;\\n    uint8 internal constant MAGE = 2;\\n    uint8 internal constant BARBARIAN = 3;\\n\\n    uint8 internal constant CLASS_BONUS = 4; // 100/4 = 25%\\n\\n    uint8 internal constant LEVEL_RING_WIDTH = 25;\\n    uint16 internal constant ELEMENT_AREA_10000_PROBA = 100; // 1%\\n    uint8 internal constant NUM_ELEMENT_AREA_PER_PERIOD = 10;\\n\\n    uint8 internal constant LOCK_PROBABILITY = 40;\\n    uint8 internal constant TWO_LOCK_PROBABILITY = 10;\\n\\n    uint8 internal constant MONSTER_SPAWN = 15;\\n\\n    uint8 internal constant INITIAL_HP = 16;\\n    uint8 internal constant HP_INCREASE = 10;\\n\\n    function coordinates(uint256 location)\\n        external\\n        pure\\n        returns (\\n            int64 x,\\n            int64 y,\\n            int64 z,\\n            uint64 a\\n        )\\n    {\\n        return _coordinates(location);\\n    }\\n\\n    function _coordinates(uint256 location)\\n        internal\\n        pure\\n        returns (\\n            int64 x,\\n            int64 y,\\n            int64 z,\\n            uint64 a\\n        )\\n    {\\n        x = int64(uint64(location));\\n        y = int64(uint64(location / 2**64));\\n        z = int64(uint64(location / 2**128));\\n        a = uint64(location / 2**255); // = 1 for valid location\\n    }\\n\\n    function location(\\n        int64 x,\\n        int64 y,\\n        int64 z\\n    ) external pure returns (uint256) {\\n        return _location(x, y, z);\\n    }\\n\\n    function _location(\\n        int64 x,\\n        int64 y,\\n        int64 z\\n    ) internal pure returns (uint256) {\\n        return 2**255 + uint256(uint64(z)) * 2**128 + uint256(uint64(y)) * 2**64 + uint64(x);\\n    }\\n\\n    function _locationToBounty(uint256 location) internal pure returns (uint256 bounty){\\n        return location - LOCATION_ZERO + BOUNTY;\\n    }\\n\\n    function _bountyToLocation(uint256 bounty) internal pure returns (uint256 location){\\n        return location - BOUNTY + LOCATION_ZERO;\\n    }\\n\\n    function generateMonsterIndex(\\n        uint256 location,\\n        bytes32 blockHash,\\n        uint256 numMonsters,\\n        bool newlyDiscoveredRoom,\\n        uint8 roomKind\\n    ) external pure returns (uint256) {\\n        return _generateMonsterIndex(location, blockHash, numMonsters, newlyDiscoveredRoom, roomKind);\\n    }\\n\\n    function _generateMonsterIndex(\\n        uint256 location,\\n        bytes32 blockHash,\\n        uint256 numMonsters,\\n        bool newlyDiscoveredRoom,\\n        uint8 roomKind\\n    ) internal pure returns (uint256) {\\n        if (roomKind != ROOM_TYPE_NORMAL) {\\n            return 0;\\n        }\\n        uint8 spawnRate = MONSTER_SPAWN;\\n        if (newlyDiscoveredRoom) {\\n            spawnRate += 10;\\n        }\\n        bool hasMonster = uint256(keccak256(abi.encodePacked(location, blockHash, uint8(6)))) % 100 < spawnRate;\\n        if (hasMonster) {\\n            return (uint256(keccak256(abi.encodePacked(location, blockHash, uint8(7)))) % numMonsters) + 1;\\n        }\\n        return 0;\\n    }\\n\\n    function computeRoomDiscoveryReward(\\n        uint256 location,\\n        bytes32 blockHash,\\n        uint8 class\\n    ) external pure returns (uint256 numGold, uint256 numElements) {\\n        return _computeRoomDiscoveryReward(location, blockHash, class);\\n    }\\n\\n    function _computeRoomDiscoveryReward(\\n        uint256 location,\\n        bytes32 blockHash,\\n        uint8 class\\n    ) internal pure returns (uint256 numGold, uint256 numElements) {\\n        uint256 ring = _getRing(location, 0);\\n        uint256 target = ring / LEVEL_RING_WIDTH;\\n        if (target == 0) {\\n            target = 1;\\n        }\\n        numElements = (target / 2) + (uint256(keccak256(abi.encodePacked(location, blockHash, uint8(100)))) % target);\\n        if (numElements == 0) {\\n            numElements = 1;\\n        }\\n        if (MAGE == class) {\\n            numElements = numElements + numElements / CLASS_BONUS;\\n        }\\n        if (target > 8) {\\n            target = 8;\\n        }\\n        numGold = (target / 2) + (uint256(keccak256(abi.encodePacked(location, blockHash, uint8(101)))) % target);\\n        if (numGold == 0) {\\n            numGold = 1;\\n        }\\n        if (EXPLORER == class) {\\n            numGold = numGold + numGold / CLASS_BONUS;\\n        }\\n    }\\n\\n    function discoveryCost(uint256 location) external pure returns (uint256 fragments) {\\n        return _discoveryCost(location);\\n    }\\n\\n    function _discoveryCost(uint256 location) internal pure returns (uint256 fragments) {\\n        if (location == LOCATION_ZERO) {\\n            return 0;\\n        } else {\\n            uint256 ring = _getRing(location, 0);\\n            return 1 + ring / LEVEL_RING_WIDTH;\\n        }\\n    }\\n\\n    function generateRandomEvent(uint256 areaLoc, bytes32 blockHash)\\n        external\\n        pure\\n        returns (uint256 roomLocation, uint64 randomEvent)\\n    {\\n        return _generateRandomEvent(areaLoc, blockHash);\\n    }\\n\\n    function _generateRandomEvent(uint256 areaLoc, bytes32 blockHash)\\n        internal\\n        pure\\n        returns (uint256 roomLocation, uint64 randomEvent)\\n    {\\n        roomLocation = _getRoomLoc(\\n            areaLoc,\\n            uint8(uint256(keccak256(abi.encodePacked(areaLoc, blockHash, uint8(102)))) % 9),\\n            uint8(uint256(keccak256(abi.encodePacked(areaLoc, blockHash, uint8(103)))) % 9)\\n        );\\n        randomEvent = 2; // for now always monster TODO :uint64(uint256(keccak256(abi.encodePacked(areaLoc, blockHash, uint8(104)))));\\n    }\\n\\n    function generateRoom(\\n        uint256 location,\\n        bytes32 blockHash,\\n        uint8 direction,\\n        uint8 areaAtDiscovery,\\n        uint8 lastIndex,\\n        uint8 index\\n    )\\n        external\\n        pure\\n        returns (\\n            uint8 exits,\\n            uint8 kind,\\n            uint8 area_discovered\\n        )\\n    {\\n        return _generateRoom(location, blockHash, direction, areaAtDiscovery, lastIndex, index);\\n    }\\n\\n    function _generateRoom(\\n        uint256 location,\\n        bytes32 blockHash,\\n        uint8 direction,\\n        uint8 areaAtDiscovery,\\n        uint8 lastIndex,\\n        uint8 index\\n    )\\n        internal\\n        pure\\n        returns (\\n            uint8 exits,\\n            uint8 kind,\\n            uint8 area_discovered\\n        )\\n    {\\n        exits = _generateExits(location, blockHash, direction);\\n        (kind, area_discovered) = _getRoomKind(location, blockHash, areaAtDiscovery, lastIndex, index);\\n    }\\n\\n    function _getRoomKind(\\n        uint256 location,\\n        bytes32 blockHash,\\n        uint8 areaAtDiscovery,\\n        uint8 lastIndex,\\n        uint8 index\\n    ) internal pure returns (uint8 kind, uint8 area_discovered) {\\n        uint256 areaLoc = _getAreaLoc(location);\\n        uint8 currentIndex = lastIndex;\\n        area_discovered = areaAtDiscovery;\\n        (int64 x, int64 y, , ) = _coordinates(location);\\n        if (x == 0 && y == 0) {\\n            // special case // cannot be discovered in batch in one block\\n            kind = ROOM_TYPE_TELEPORT;\\n            area_discovered = area_discovered | 1;\\n        } else {\\n            while (currentIndex <= index) {\\n                uint8 roll = uint8(\\n                    uint256(keccak256(abi.encodePacked(areaLoc, currentIndex, blockHash, uint8(3)))) % 20\\n                );\\n                if (!(area_discovered & 1 == 1) && (roll == 0 || currentIndex == 80)) {\\n                    // if roll or last room\\n                    kind = ROOM_TYPE_TELEPORT;\\n                    area_discovered = area_discovered | 1;\\n                } else if (\\n                    !(area_discovered & 2 == 2) &&\\n                    (roll == 1 ||\\n                        (currentIndex == 80) || // last room\\n                        (currentIndex == 79 && !(area_discovered & 1 == 1))) // second last room and teleport not found yet\\n                ) {\\n                    kind = ROOM_TYPE_TEMPLE;\\n                    area_discovered = area_discovered | 2;\\n                } else if (\\n                    !(area_discovered & 4 == 4) &&\\n                    (roll == 2 ||\\n                        (currentIndex == 80) || // last room\\n                        (currentIndex == 79 && !(area_discovered & 1 == 1)) || // second last room and teleport not found yet\\n                        (currentIndex == 79 && !(area_discovered & 2 == 2)) || // second last room and temple not found yet\\n                        (currentIndex == 78 && !(area_discovered & 1 == 1) && !(area_discovered & 2 == 2))) // third last room and neither teleport nor temple found yet\\n                ) {\\n                    kind = ROOM_TYPE_LORE;\\n                    area_discovered = area_discovered | 4;\\n                } else if (\\n                    !(area_discovered & 8 == 8) &&\\n                    (roll == 3 ||\\n                        (currentIndex == 80) || // last room\\n                        (currentIndex == 79 && !(area_discovered & 1 == 1)) || // second last room and teleport not found yet\\n                        (currentIndex == 79 && !(area_discovered & 2 == 2)) || // second last room and temple not found yet\\n                        (currentIndex == 79 && !(area_discovered & 4 == 4)) || // second last room and lore not found yet\\n                        (currentIndex == 78 && !(area_discovered & 1 == 1) && !(area_discovered & 2 == 2)) || // third last room and neither teleport nor temple found yet\\n                        (currentIndex == 78 && !(area_discovered & 1 == 1) && !(area_discovered & 4 == 4)) || // third last room and neither teleport nor lore found yet\\n                        (currentIndex == 78 && !(area_discovered & 4 == 4) && !(area_discovered & 2 == 2)) || // third last room and neither lore nor temple found yet\\n                        (currentIndex == 77 &&\\n                            !(area_discovered & 4 == 4) &&\\n                            !(area_discovered & 2 == 2) &&\\n                            !(area_discovered & 1 == 1))) // fourth last room and neither telport, temple nor lore found yet\\n                ) {\\n                    kind = ROOM_TYPE_CARRIER;\\n                    area_discovered = area_discovered | 8;\\n                } else {\\n                    kind = ROOM_TYPE_NORMAL;\\n                }\\n                currentIndex++;\\n            }\\n        }\\n    }\\n\\n    function toLevelUp(uint16 level)\\n        external\\n        pure\\n        returns (\\n            uint16 xpRequired,\\n            uint256 coinsRequired,\\n            uint8 hpIncrease\\n        )\\n    {\\n        return _toLevelUp(level);\\n    }\\n\\n    function _toLevelUp(uint16 level)\\n        internal\\n        pure\\n        returns (\\n            uint16 xpRequired,\\n            uint256 coinsRequired,\\n            uint8 hpIncrease\\n        )\\n    {\\n        uint16[11] memory xpRequirements = [0, 10, 49, 119, 208, 328, 524, 826, 1269, 3654, 6894];\\n        xpRequired = xpRequirements[level];\\n        if (level > 8) {\\n            coinsRequired = 492;\\n        } else {\\n            coinsRequired = (((1 + level) ** 3) / 5) + 8;\\n        }\\n        hpIncrease = HP_INCREASE;\\n    }\\n\\n    function generateArea(\\n        uint256 areaLoc,\\n        bytes32 blockHash,\\n        uint64 numElementalAreaInPeriod\\n    ) external pure returns (uint8 areaType) {\\n        return _generateArea(areaLoc, blockHash, numElementalAreaInPeriod);\\n    }\\n\\n    function _generateArea(\\n        uint256 areaLoc,\\n        bytes32 blockHash,\\n        uint64 numElementalAreaInPeriod\\n    ) internal pure returns (uint8 areaType) {\\n        if (_isCentreArea(areaLoc) || numElementalAreaInPeriod >= NUM_ELEMENT_AREA_PER_PERIOD) {\\n            areaType = 6;\\n        } else {\\n            uint256 roomRing = (_getAreaRing(areaLoc) * 9);\\n            if (roomRing > 0) {\\n                roomRing -= 4; // this set the value to be the one of the corner room nearest to the center\\n            }\\n            if (roomRing >= LEVEL_RING_WIDTH) {\\n                bool elementArea = uint8(uint256(keccak256(abi.encodePacked(areaLoc, blockHash, uint8(12)))) % 10000) <=\\n                    ELEMENT_AREA_10000_PROBA;\\n                if (elementArea) {\\n                    (, ,int64 z, ) = _coordinates(areaLoc);\\n                    areaType = 1 + uint8(int8(z % 5));\\n                } else {\\n                    areaType = 6;\\n                }\\n            } else {\\n                areaType = 6;\\n            }\\n        }\\n    }\\n\\n    // distance between 2 location * 0.4\\n    function teleportTax(uint256 p1, uint256 p2) external pure returns (uint256) {\\n        return _teleportTax(p1, p2);\\n    }\\n\\n    function _teleportTax(uint256 p1, uint256 p2) internal pure returns (uint256) {\\n        uint256 cost = (2 * _getRing(p1, p2)) / 5;\\n        if (cost == 0) {\\n            return 1;\\n        } else {\\n            return cost;\\n        }\\n    }\\n\\n    function carrierCost(uint256 location) external pure returns (uint256) {\\n        return _carrierCost(location);\\n    }\\n\\n    function _carrierCost(uint256 location) internal pure returns (uint256) {\\n        uint256 cost = (2 * _getRing(location, LOCATION_ZERO)) / 6;\\n        if (cost == 0) {\\n            return 1;\\n        } else {\\n            return cost;\\n        }\\n    }\\n\\n    function recyclingReward(uint256 gearData) external pure returns (uint256) {\\n        return _recyclingReward(gearData);\\n    }\\n\\n    function _recyclingReward(uint256 gearData) internal pure returns (uint256) {\\n        (uint16 level, , , uint16 durability, uint16 maxDurability, ) = _decodeGearData(gearData);\\n        uint256 reward = 1 + level / 2;\\n        if (durability == maxDurability) {\\n            reward += 1 + reward / 2;\\n        }\\n        return reward;\\n    }\\n\\n    function hpCost(uint16 hp) external pure returns (uint256) {\\n        return _hpCost(hp);\\n    }\\n\\n    function _hpCost(uint16 hp) internal pure returns (uint256) {\\n        return hp;\\n    }\\n\\n    function getRing(uint256 p1, uint256 p2) external pure returns (uint256) {\\n        return _getRing(p1, p2);\\n    }\\n\\n    function _getRing(uint256 p1, uint256 p2) internal pure returns (uint256) {\\n        (int64 x1, int64 y1, , ) = _coordinates(p1);\\n        (int64 x2, int64 y2, , ) = _coordinates(p2);\\n        int256 dx = x1 - x2;\\n        if (dx < 0) {\\n            dx = -dx;\\n        }\\n        int256 dy = y1 - y2;\\n        if (dy < 0) {\\n            dy = -dy;\\n        }\\n        if (dx > 2**64 / 2) {\\n            dx = int256(2**64) - dx;\\n        }\\n        if (dy > 2**64 / 2) {\\n            dy = int256(2**64) - dy;\\n        }\\n        if (dx > dy) {\\n            return uint256(dx);\\n        } else {\\n            return uint256(dy);\\n        }\\n    }\\n\\n    function _getAreaRing(uint256 areaLoc) internal pure returns (uint64) {\\n        (int64 x, int64 y, , ) = _coordinates(areaLoc);\\n        if (x < 0) {\\n            x = -x;\\n        }\\n        if (y < 0) {\\n            y = -y;\\n        }\\n        if (x > y) {\\n            return uint64(int64(x));\\n        } else {\\n            return uint64(int64(y));\\n        }\\n    }\\n\\n    // centre area is currently defined as the first 9 area (first area + 8 surrounding it)\\n    function _isCentreArea(uint256 areaLoc) internal pure returns (bool) {\\n        (int64 areaX, int64 areaY, , ) = _coordinates(areaLoc);\\n        return areaX >= -1 && areaY >= -1 && areaX <= 1 && areaY <= 1;\\n    }\\n\\n    function getAreaLoc(uint256 location) external pure returns (uint256) {\\n        return _getAreaLoc(location);\\n    }\\n\\n    function _getAreaLoc(uint256 location) internal pure returns (uint256) {\\n        (int64 x, int64 y, int64 z, ) = _coordinates(location);\\n        int64 areaX;\\n        if (x >= 0) {\\n            areaX = (x + 4) / 9;\\n        } else {\\n            areaX = -((-x + 4) / 9);\\n        }\\n\\n        int64 areaY;\\n        if (y >= 0) {\\n            areaY = (y + 4) / 9;\\n        } else {\\n            areaY = -((-y + 4) / 9);\\n        }\\n        return _location(areaX, areaY, z);\\n    }\\n\\n    function _getRoomLoc(\\n        uint256 areaLoc,\\n        uint8 x,\\n        uint8 y\\n    ) internal pure returns (uint256) {\\n        (int64 areaX, int64 areaY, int64 floor, ) = _coordinates(areaLoc);\\n        return _location(areaX * 9 - 4 + int64(uint64(x)), areaY * 9 - 4 + int64(uint64(y)), floor);\\n    }\\n\\n    // direction based exit generation\\n    // both exits and locks are generated\\n    // return value is encoded (uint4 locksBits, uint4 exitBits)\\n    function _generateExits(\\n        uint256 location,\\n        bytes32 blockHash,\\n        uint8 direction\\n    ) internal pure returns (uint8) {\\n        uint8 exits = 0;\\n        if (DOWN == direction) {\\n            exits = 0xF;\\n        } else {\\n            if (EXITS_INERTIA > uint8(uint256(keccak256(abi.encodePacked(location, blockHash, uint8(1)))) % 100)) {\\n                exits = uint8(2) ** direction;\\n            }\\n            if (EXITS_BIFURCATION > uint8(uint256(keccak256(abi.encodePacked(location, blockHash, uint8(2)))) % 100)) {\\n                if (\\n                    EXITS_BOTH_BIFURCATION >\\n                    uint8(uint256(keccak256(abi.encodePacked(location, blockHash, uint8(3)))) % 100)\\n                ) {\\n                    if (NORTH == direction || SOUTH == direction) {\\n                        exits = (exits | 8) | 2;\\n                    } else if (EAST == direction || WEST == direction) {\\n                        exits = (exits | 1) | 4;\\n                    }\\n                } else {\\n                    if (50 > uint8(uint256(keccak256(abi.encodePacked(location, blockHash, uint8(3)))) % 100)) {\\n                        if (NORTH == direction) {\\n                            exits |= 8;\\n                        } else if (EAST == direction) {\\n                            exits |= 1;\\n                        } else if (SOUTH == direction) {\\n                            exits |= 2;\\n                        } else if (WEST == direction) {\\n                            exits |= 4;\\n                        }\\n                    } else {\\n                        if (NORTH == direction) {\\n                            exits |= 2;\\n                        } else if (EAST == direction) {\\n                            exits |= 4;\\n                        } else if (SOUTH == direction) {\\n                            exits |= 8;\\n                        } else if (WEST == direction) {\\n                            exits |= 1;\\n                        }\\n                    }\\n                }\\n            }\\n        }\\n        uint8 randLock = uint8(uint256(keccak256(abi.encodePacked(location, blockHash, uint8(111)))) % 100);\\n        uint8 numLocks = randLock < (100 - LOCK_PROBABILITY) ? 0 : (randLock < (100 - TWO_LOCK_PROBABILITY) ? 1 : 2);\\n        if (numLocks >= 4) {\\n            exits = exits | (15 * uint8(2) ** 4);\\n        } else if (numLocks == 3) {\\n            uint8 chosenLocks = uint8(uint256(keccak256(abi.encodePacked(location, blockHash, uint8(112)))) % 4);\\n            uint8 locks = (chosenLocks + 1) * 7;\\n            if (locks == 21) {\\n                exits = exits | (13 * uint8(2) ** 4);\\n            } else if (locks == 28) {\\n                exits = exits | (11 * uint8(2) ** 4);\\n            }\\n            // 4 possibilities : 7 // 14 // 13 // 11\\n        } else if (numLocks == 2) {\\n            uint8 chosenLocks = uint8(uint256(keccak256(abi.encodePacked(location, blockHash, uint8(112)))) % 6);\\n            uint8 locks = (chosenLocks + 1) * 3;\\n            if (locks == 15) {\\n                exits = exits | (5 * uint8(2) ** 4);\\n            } else if (locks == 18) {\\n                exits = exits | (10 * uint8(2) ** 4);\\n            }\\n            // 3 // 6 // 9 // 12 // 5 // 10\\n        } else if (numLocks == 1) {\\n            uint8 chosenLocks = uint8(uint256(keccak256(abi.encodePacked(location, blockHash, uint8(112)))) % 4);\\n            exits = exits | (uint8(2) ** chosenLocks * uint8(2) ** 4);\\n        }\\n        return exits;\\n    }\\n\\n    function decodeCharacterData(uint256 data)\\n        external\\n        pure\\n        returns (\\n            uint16 level,\\n            uint16 hp,\\n            uint16 maxHP,\\n            uint32 xp,\\n            uint8 class\\n        )\\n    {\\n        return _decodeCharacterData(data);\\n    }\\n\\n    function _decodeCharacterData(uint256 data)\\n        internal\\n        pure\\n        returns (\\n            uint16 level,\\n            uint16 hp,\\n            uint16 maxHP,\\n            uint32 xp,\\n            uint8 class\\n        )\\n    {\\n        class = uint8(data >> 248);\\n        level = uint16((data >> 232) % 2**16);\\n        xp = uint32((data >> 200) % 2**32);\\n        maxHP = uint16((data >> 184) % 2**16);\\n        hp = uint16((data >> 168) % 2**16);\\n    }\\n\\n    function encodeGearData(\\n        uint16 level,\\n        uint8 slot,\\n        uint8 classBits,\\n        uint16 durability,\\n        uint16 maxDurability,\\n        uint32 template\\n    ) external pure returns (uint256 data) {\\n        return _encodeGearData(level, slot, classBits, durability, maxDurability, template);\\n    }\\n\\n    function _encodeGearData(\\n        uint16 level,\\n        uint8 slot,\\n        uint8 classBits,\\n        uint16 durability,\\n        uint16 maxDurability,\\n        uint32 template\\n    ) internal pure returns (uint256 data) {\\n        return ((uint256(classBits) << 248) +\\n            (uint256(level) << 232) +\\n            (uint256(slot) << 224) +\\n            (uint256(durability) << 208) +\\n            (uint256(maxDurability) << 192) +\\n            template);\\n    }\\n\\n    function decodeGearData(uint256 data)\\n        external\\n        pure\\n        returns (\\n            uint16 level,\\n            uint8 slot,\\n            uint8 classBits,\\n            uint16 durability,\\n            uint16 maxDurability,\\n            uint32 template\\n        )\\n    {\\n        return _decodeGearData(data);\\n    }\\n\\n    function _decodeGearData(uint256 data)\\n        internal\\n        pure\\n        returns (\\n            uint16 level,\\n            uint8 slot,\\n            uint8 classBits,\\n            uint16 durability,\\n            uint16 maxDurability,\\n            uint32 template\\n        )\\n    {\\n        classBits = uint8(data >> 248);\\n        level = uint16((data >> 232) % 2**16);\\n        slot = uint8((data >> 224) % 2**8);\\n        durability = uint16((data >> 208) % 2**16);\\n        maxDurability = uint16((data >> 192) % 2**16);\\n        template = uint32(data % 2**32);\\n    }\\n\\n    function limitedChange(\\n        uint16 value,\\n        uint16 max,\\n        int64 change\\n    ) external pure returns (uint16) {\\n        return _limitedChange(value, max, change);\\n    }\\n\\n    function _limitedChange(\\n        uint16 value,\\n        uint16 max,\\n        int64 change\\n    ) internal pure returns (uint16) {\\n        int64 updated = int64(uint64(value)) + int64(change);\\n        if (updated > int64(uint64(max))) {\\n            return max;\\n        }\\n        if (updated <= 0) {\\n            return 0;\\n        } else {\\n            return uint16(int16(updated));\\n        }\\n    }\\n\\n    function roomsTax(uint256 rooms, uint256 periods) external pure returns (uint256) {\\n        return _roomsTax(rooms, periods);\\n    }\\n    function _roomsTax(uint256 rooms, uint256 periods) internal pure returns (uint256) {\\n        return (1 + rooms / 10) * periods;\\n    }\\n}\\n\",\"keccak256\":\"0xf45e13daa39a0f6e285d8249db3fa24222b619a6e5897747060b8835fbec3868\",\"license\":\"MIT\"},\"src/player/Player.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"hardhat-deploy/solc_0.8/proxy/Proxied.sol\\\";\\nimport \\\"./PlayerDataLayout.sol\\\";\\nimport \\\"../utils/MetaTransactionReceiver.sol\\\";\\nimport \\\"./Pool.sol\\\";\\nimport \\\"../utils/Constants.sol\\\";\\n\\ncontract Player is Proxied, PlayerDataLayout, MetaTransactionReceiver, Constants {\\n    event Call(bool success, bytes returnData);\\n    event Refill(address indexed playerAddress, uint256 newEnergy);\\n\\n    function postUpgrade(\\n        Characters charactersContract,\\n        address payable feeRecipient,\\n        uint256 minBalance,\\n        Pool pool\\n    ) external proxied {\\n        // TODO _setTrustedForwarder(...);\\n        _charactersContract = charactersContract;\\n        _feeRecipient = feeRecipient;\\n        MIN_BALANCE = minBalance;\\n        _pool = pool;\\n        pool.register();\\n    }\\n\\n    function register() external {\\n        if (msg.sender != address(_holder)) {\\n            require(address(_holder) == address(0), \\\"holder already set\\\");\\n            _holder = Enterable(msg.sender);\\n        }\\n    }\\n\\n    function getLastCharacterId(address playerAddress) external view returns (uint256) {\\n        return _lastCharacterIds[playerAddress];\\n    }\\n\\n    function getEnergy(address playerAddress) external view returns (uint256 energy, uint256 freeEnergy) {\\n        PlayerStruct storage player = _players[playerAddress];\\n        energy = player.energy;\\n        freeEnergy = player.freeEnergy;\\n    }\\n\\n    // TODO remove ?\\n    function getPlayerInfo(address playerAddress, uint256 characterId)\\n        external\\n        view\\n        returns (uint256 energy, uint256 freeEnergy)\\n    {\\n        PlayerStruct storage player = _players[playerAddress];\\n        energy = player.energy;\\n        freeEnergy = player.freeEnergy;\\n    }\\n\\n    function createAndEnter(\\n        address payable newDelegate,\\n        uint256 value,\\n        string calldata name,\\n        uint8 class,\\n        uint256 location\\n    ) external payable {\\n        address payable sender = _msgSender();\\n        uint256 characterId = _charactersContract.mintTo(address(_holder));\\n        _enter(sender, newDelegate, characterId, value, name, class, location);\\n    }\\n\\n    function enter(\\n        address payable newDelegate,\\n        uint256 characterId,\\n        uint256 value,\\n        string calldata name,\\n        uint8 class,\\n        uint256 location\\n    ) external payable {\\n        address payable sender = _msgSender();\\n        _charactersContract.transferFrom(sender, address(_holder), characterId);\\n        _enter(sender, newDelegate, characterId, value, name, class, location);\\n    }\\n\\n    function _enter(\\n        address payable sender,\\n        address payable newDelegate,\\n        uint256 characterId,\\n        uint256 value,\\n        string memory name,\\n        uint8 class,\\n        uint256 location\\n    ) internal {\\n        require(msg.value >= value, \\\"msg.value < value\\\");\\n        if (msg.value > value) {\\n            _refill(sender, sender, msg.value - value);\\n        }\\n        if (newDelegate != address(0)) {\\n            _addDelegate(sender, newDelegate);\\n        }\\n        _holder.enter{value: value}(sender, characterId, name, class, location);\\n        _lastCharacterIds[sender] = characterId;\\n    }\\n\\n    function callAsCharacter(\\n        address destination,\\n        uint256 gasLimit,\\n        bytes calldata data\\n    ) external returns (bool success, bytes memory returnData) {\\n        address sender = _msgSender();\\n        // TODO check death ?\\n        require(destination != address(this), \\\"cannot call itself\\\");\\n        // TODO block data if == `enter(address sender, uint256 characterId, bytes data)`\\n        uint256 initialGas = gasleft();\\n        uint256 characterId = _getFirstParam(data);\\n        require(_charactersContract.ownerOf(characterId) == address(_holder), \\\"_holder does not own character\\\");\\n        uint256 playerAddress = _charactersContract.getSubOwner(characterId);\\n        if (uint256(uint160(sender)) != playerAddress) {\\n            require(uint256(uint160(_delegates[sender])) == playerAddress, \\\"sender is not delegate of character's player\\\");\\n        }\\n\\n        (success, returnData) = _executeWithSpecificGas(destination, gasLimit, data);\\n\\n        PlayerStruct storage player = _players[address(uint160(playerAddress))];\\n        uint256 energy = player.energy;\\n        uint256 txCharge = ((initialGas - gasleft()) + 10000) * tx.gasprice;\\n        uint256 freeEnergyFee = (txCharge * 10) / 100; // 10% extra is used for free energy\\n\\n        uint256 poolFee = txCharge * 10; // 1000% is used for UBF\\n\\n        require(energy >= freeEnergyFee + poolFee, \\\"not enough energy\\\");\\n        energy -= (freeEnergyFee + poolFee);\\n        _pool.recordCharge{value: poolFee}(sender, txCharge, poolFee);\\n\\n        if (msg.sender == sender) {\\n            // not metatx : use local private key so need to recharge local balance // TODO remove (once metatx is enabled)\\n            if (msg.sender.balance < MIN_BALANCE) {\\n                uint256 balanceToGive = MIN_BALANCE - msg.sender.balance;\\n                if (balanceToGive >= energy) {\\n                    balanceToGive = energy;\\n                    energy = 0;\\n                } else {\\n                    energy -= balanceToGive;\\n                }\\n\\n                if (balanceToGive > 0) {\\n                    payable(msg.sender).transfer(balanceToGive);\\n                }\\n            }\\n        }\\n        player.freeEnergy += uint128(freeEnergyFee);\\n        player.energy = uint128(energy);\\n\\n        emit Call(success, returnData);\\n    }\\n\\n    function isDelegateFor(address delegate, address playerAddress) external view returns (bool) {\\n        return _delegates[delegate] == playerAddress;\\n    }\\n\\n    function refillAccount(address account) public payable {\\n        address payable sender = _msgSender();\\n        _refill(sender, account, msg.value);\\n    }\\n\\n    function refill() public payable {\\n        address payable sender = _msgSender();\\n        _refill(sender, sender, msg.value);\\n    }\\n\\n    function _refill(\\n        address payable sender,\\n        address account,\\n        uint256 value\\n    ) internal returns (uint256 refund) {\\n        uint128 energy = _players[account].energy;\\n        energy += uint128(value);\\n        if (energy > uint128(MAX_FOOD)) {\\n            energy = uint128(MAX_FOOD);\\n            refund = energy - MAX_FOOD;\\n        }\\n        _players[account].energy = energy;\\n        emit Refill(account, energy);\\n        if (refund > 0) {\\n            sender.transfer(refund);\\n        }\\n    }\\n\\n    // TODO add Events for Delegates\\n    function addDelegate(address payable _delegate) public payable {\\n        address payable sender = _msgSender();\\n        if (msg.value > 0) {\\n            _refill(sender, sender, msg.value);\\n        }\\n        _addDelegate(sender, _delegate);\\n    }\\n\\n    function _addDelegate(address sender, address payable _delegate) internal {\\n        require(_delegate != address(0), \\\"no zero address delegate\\\");\\n        require(_players[sender].energy >= uint128(MIN_BALANCE), \\\"not enough energy\\\");\\n        _players[sender].energy -= uint128(MIN_BALANCE);\\n        _delegate.transfer(MIN_BALANCE);\\n        _delegates[_delegate] = sender;\\n    }\\n\\n    function _getFirstParam(bytes memory data) internal pure returns (uint256) {\\n        if (data.length < 36) {\\n            return 0;\\n        }\\n        uint256 value;\\n        // solhint-disable-next-line security/no-inline-assembly\\n        assembly {\\n            value := mload(add(data, 36))\\n        }\\n        return value;\\n    }\\n\\n    function _executeWithSpecificGas(\\n        address to,\\n        uint256 gasLimit,\\n        bytes memory data\\n    ) internal returns (bool success, bytes memory returnData) {\\n        (success, returnData) = to.call{gas: gasLimit}(data);\\n        assert(gasleft() > gasLimit / 63);\\n        // not enough gas provided, assert to throw all gas // TODO use EIP-1930\\n    }\\n}\\n\",\"keccak256\":\"0x49f830f50e3c428ccb861f9b72937daa6d7aac6f4911bc79dfb62aa3da670605\",\"license\":\"MIT\"},\"src/player/PlayerDataLayout.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"../characters/Characters.sol\\\";\\nimport \\\"./Pool.sol\\\";\\n\\ninterface Enterable {\\n    // TODO generalize?\\n    function enter(\\n        address sender,\\n        uint256 characterId,\\n        string calldata data,\\n        uint8 class,\\n        uint256 location\\n    ) external payable;\\n}\\n\\ncontract PlayerDataLayout {\\n    uint256 internal MIN_BALANCE; // = 5000000000000000;\\n\\n    struct PlayerStruct {\\n        uint128 energy;\\n        uint128 freeEnergy;\\n    }\\n\\n    address payable _feeRecipient;\\n    mapping(address => address) _delegates;\\n    mapping(address => PlayerStruct) _players;\\n    mapping(address => uint256) _lastCharacterIds;\\n\\n    Characters _charactersContract;\\n    Enterable _holder;\\n\\n    Pool _pool;\\n}\\n\",\"keccak256\":\"0x425a6f4162bfc88f62c9dde5a91ac1b4453aeff3ab8bd95c2d09f1ac0ed19b4b\",\"license\":\"MIT\"},\"src/player/Pool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\ninterface Pool {\\n    function register() external;\\n\\n    function recordCharge(\\n        address account,\\n        uint256 txCharge,\\n        uint256 poolFee\\n    ) external payable;\\n}\\n\",\"keccak256\":\"0x7d71d072fee4819c7665f60218a458806c67b9f38bd75566e12f2145cc3b549f\",\"license\":\"MIT\"},\"src/tokens/ERC1155Token.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"hardhat-deploy/solc_0.8/proxy/Proxied.sol\\\";\\nimport \\\"./ERC1155TokenDataLayout.sol\\\";\\n\\ncontract ERC1155Token is Proxied, ERC1155TokenDataLayout {\\n    event TransferSingle(address indexed from, address indexed to, uint256 indexed id, uint256 amount);\\n    event TransferBatch(address indexed from, address indexed to, uint256[] indexed ids, uint256[] amounts);\\n    event SubTransferSingle(uint256 indexed from, uint256 indexed to, uint256 indexed id, uint256 amount);\\n    event SubTransferBatch(uint256 indexed from, uint256 indexed to, uint256[] indexed ids, uint256[] amounts);\\n    event ApprovalForAll(address indexed owner, address indexed operator, bool approved);\\n\\n    function postUpgrade(address tokenOwner) public virtual proxied {\\n        _tokenOwner = tokenOwner;\\n    }\\n\\n    function mintVault(\\n        address owner,\\n        uint256 id,\\n        uint256 amount\\n    ) public {\\n        require(msg.sender == _tokenOwner, \\\"NOT_AUTHORIZED_MINT\\\");\\n        _balances[owner][id] += amount;\\n        _subBalances[0][id] += amount;\\n        emit TransferSingle(address(0), owner, id, amount);\\n        emit SubTransferSingle(0, 0, id, amount);\\n    }\\n\\n    // TODO remove after fix\\n    function mintTo(\\n        address owner,\\n        uint256 id,\\n        uint256 amount\\n    ) public {\\n        require(msg.sender == _tokenOwner, \\\"NOT_AUTHORIZED_MINT\\\");\\n        _balances[owner][id] += amount;\\n        emit TransferSingle(address(0), owner, id, amount);\\n    }\\n\\n    // TODO remove after fix\\n    function subMint(uint256 id, uint256 amount) public {\\n        require(msg.sender == _tokenOwner, \\\"NOT_AUTHORIZED_MINT\\\");\\n        _subBalances[0][id] += amount;\\n        emit SubTransferSingle(0, 0, id, amount);\\n    }\\n\\n    function mint(\\n        uint256 subOwner,\\n        uint256 id,\\n        uint256 amount\\n    ) public {\\n        require(msg.sender == _tokenOwner, \\\"NOT_AUTHORIZED_MINT\\\");\\n        _subBalances[subOwner][id] += amount;\\n        _balances[_tokenOwner][id] += amount;\\n        emit TransferSingle(address(0), _tokenOwner, id, amount);\\n        emit SubTransferSingle(0, subOwner, id, amount);\\n    }\\n\\n    function subBurnFrom(\\n        uint256 from,\\n        uint256 id,\\n        uint256 amount\\n    ) external {\\n        // cannot do any sender like in ERC721 because we would need to keep track of which owner is the balance coming from\\n        require(_tokenOwner == msg.sender || _operatorsForAll[_tokenOwner][msg.sender], \\\"NOT_AUTHORIZED_SUB_BURN\\\");\\n        uint256 currentBalance = _subBalances[from][id];\\n        require(currentBalance >= amount, \\\"does not own enough\\\");\\n        _subBalances[from][id] = currentBalance - amount;\\n        _balances[_tokenOwner][id] -= amount;\\n        emit TransferSingle(_tokenOwner, address(0), id, amount);\\n        emit SubTransferSingle(from, 0, id, amount);\\n    }\\n\\n    function batchSubBurnFrom(\\n        uint256 from,\\n        uint256[] calldata ids,\\n        uint256[] calldata amounts\\n    ) external {\\n        // cannot do any sender like in ERC721 because we would need to keep track of which owner is the balance coming from\\n        require(ids.length == amounts.length, \\\"Inconsistent length\\\");\\n        require(\\n            _tokenOwner == msg.sender || _operatorsForAll[_tokenOwner][msg.sender],\\n            \\\"NOT_AUTHORIZED_BATCH_SUB_BURN\\\"\\n        );\\n        for (uint256 i = 0; i < ids.length; i++) {\\n            uint256 id = ids[i];\\n            uint256 amount = amounts[i];\\n            uint256 currentBalance = _subBalances[from][id];\\n            require(currentBalance >= amount, \\\"does not own enough\\\");\\n            _subBalances[from][id] = currentBalance - amount;\\n            _balances[_tokenOwner][id] -= amount;\\n        }\\n        emit TransferBatch(_tokenOwner, address(0), ids, amounts);\\n        emit SubTransferBatch(from, 0, ids, amounts);\\n    }\\n\\n    function subBalanceOf(uint256 who, uint256 id) public view returns (uint256) {\\n        return _subBalances[who][id];\\n    }\\n\\n    function subBalanceOfBatch(uint256[] calldata owners, uint256[] calldata ids)\\n        external\\n        view\\n        returns (uint256[] memory)\\n    {\\n        require(owners.length == ids.length, \\\"Inconsistent array length between args\\\");\\n        uint256[] memory balances = new uint256[](ids.length);\\n        for (uint256 i = 0; i < ids.length; i++) {\\n            balances[i] = subBalanceOf(owners[i], ids[i]);\\n        }\\n        return balances;\\n    }\\n\\n    function subTransferFrom(\\n        uint256 from,\\n        uint256 to,\\n        uint256 id,\\n        uint256 amount\\n    ) external {\\n        // cannot do any sender like in ERC721 because we would need to keep track of which owner is the balance coming from\\n        require(_tokenOwner == msg.sender || _operatorsForAll[_tokenOwner][msg.sender], \\\"NOT_AUTHORIZED_SUB_TRANSFER\\\");\\n        uint256 currentBalance = _subBalances[from][id];\\n        require(currentBalance >= amount, \\\"does not own enough\\\");\\n        _subBalances[from][id] = currentBalance - amount;\\n        _subBalances[to][id] += amount;\\n        emit SubTransferSingle(from, to, id, amount);\\n    }\\n\\n    function balanceOf(address who, uint256 id) public view returns (uint256) {\\n        require(who != address(0), \\\"zero address\\\");\\n        return _balances[who][id];\\n    }\\n\\n    function balanceOfBatch(address[] calldata owners, uint256[] calldata ids)\\n        external\\n        view\\n        returns (uint256[] memory)\\n    {\\n        require(owners.length == ids.length, \\\"Inconsistent array length between args\\\");\\n        uint256[] memory balances = new uint256[](ids.length);\\n        for (uint256 i = 0; i < ids.length; i++) {\\n            balances[i] = balanceOf(owners[i], ids[i]);\\n        }\\n        return balances;\\n    }\\n\\n    // TODO ERC1155 use safe version only\\n\\n    // onwer need to take responsibility to subBurn before transfering out\\n    function transferFrom(\\n        address from,\\n        address to,\\n        uint256 id,\\n        uint256 amount\\n    ) external {\\n        require(from == msg.sender || _operatorsForAll[from][msg.sender], \\\"NOT_AUTHORIZED_TRANSFER\\\");\\n        uint256 currentBalance = _balances[from][id];\\n        require(currentBalance >= amount, \\\"does not own enough\\\");\\n        _balances[from][id] = currentBalance - amount;\\n        _balances[to][id] += amount;\\n        emit TransferSingle(from, to, id, amount);\\n    }\\n\\n    // onwer need to take responsibility to subBurn before transfering out\\n    function batchTransferFrom(\\n        address from,\\n        address to,\\n        uint256[] calldata ids,\\n        uint256[] calldata amounts\\n    ) external {\\n        require(ids.length == amounts.length, \\\"Inconsistent length\\\");\\n        require(to != address(0), \\\"invalid to\\\");\\n        require(from == msg.sender || _operatorsForAll[from][msg.sender], \\\"NOT_AUTHORIZED_BATCH_TRANSFER\\\");\\n        for (uint256 i = 0; i < ids.length; i++) {\\n            uint256 id = ids[i];\\n            uint256 amount = amounts[i];\\n            uint256 currentBalance = _balances[from][id];\\n            require(currentBalance >= amount, \\\"does not own enough\\\");\\n            _balances[from][id] = currentBalance - amount;\\n            _balances[to][id] += amount;\\n        }\\n        emit TransferBatch(from, to, ids, amounts);\\n    }\\n\\n    function setApprovalForAll(address operator, bool approved) external {\\n        _operatorsForAll[msg.sender][operator] = approved;\\n        emit ApprovalForAll(msg.sender, operator, approved);\\n    }\\n\\n    function isApprovedForAll(address owner, address operator) external view returns (bool) {\\n        return _operatorsForAll[owner][operator];\\n    }\\n}\\n\",\"keccak256\":\"0x52d08b3ea8077256f65fa6c867a96f1b60f1f22ab41dfb8c99b3dc353a7c067f\",\"license\":\"MIT\"},\"src/tokens/ERC1155TokenDataLayout.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\ncontract ERC1155TokenDataLayout {\\n    mapping(address => mapping(uint256 => uint256)) internal _balances; // TODO pack balances into one unit256\\n    mapping(uint256 => mapping(uint256 => uint256)) internal _subBalances; // TODO pack balances into one unit256\\n    mapping(address => mapping(address => bool)) internal _operatorsForAll;\\n\\n    address _tokenOwner; //the dungeon\\n}\\n\",\"keccak256\":\"0xa1dfa3730218e982f304849baa3ed802b1a12c5ce6146b650700b8181a24c258\",\"license\":\"MIT\"},\"src/tokens/ERC721Token.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"hardhat-deploy/solc_0.8/proxy/Proxied.sol\\\";\\nimport \\\"./ERC721TokenDataLayout.sol\\\";\\n\\ncontract ERC721Token is Proxied, ERC721TokenDataLayout {\\n    event Transfer(address indexed from, address indexed to, uint256 indexed id);\\n    event SubTransfer(uint256 indexed from, uint256 indexed to, uint256 indexed id);\\n    event ApprovalForAll(address indexed owner, address indexed operator, bool approved);\\n    event DataUpdate(uint256 indexed id, uint256 indexed data);\\n\\n    function postUpgrade(address dungeon) public virtual proxied {\\n        _minter = dungeon;\\n    }\\n\\n    function subBalanceOf(uint256 subOwner) external view returns (uint256) {\\n        return _subNumNFTPerAddress[subOwner];\\n    }\\n\\n    function mint(uint256 subOwner, uint256 data) public returns (uint256 id) {\\n        require(msg.sender == _minter, \\\"NOT_AUTHORIZED_MINT\\\");\\n        id = ++_lastId;\\n        _subOwners[id] = subOwner;\\n        _subNumNFTPerAddress[subOwner]++;\\n        _owners[id] = _minter;\\n        _data[id] = data;\\n        emit DataUpdate(id, data);\\n        emit Transfer(address(0), _minter, id);\\n        emit SubTransfer(0, subOwner, id);\\n    }\\n\\n    // TODO make sure that data of gear/room in vault cannot be changed\\n    function setData(uint256 id, uint256 data) external {\\n        address owner = _owners[id];\\n        require(owner == msg.sender || _operatorsForAll[owner][msg.sender], \\\"NOT_AUTHORIZED_SET_DATA\\\");\\n        _data[id] = data;\\n        emit DataUpdate(id, data);\\n    }\\n\\n    function getData(uint256 id) external view returns (uint256) {\\n        return _data[id];\\n    }\\n\\n    function subBurn(uint256 id) external {\\n        address owner = _owners[id];\\n        require(owner == msg.sender || _operatorsForAll[owner][msg.sender], \\\"NOT_AUTHORIZED_SUB_BURN\\\");\\n        uint256 subOwner = _subOwners[id];\\n        _subOwners[id] = 0;\\n        _subNumNFTPerAddress[subOwner]--;\\n        emit SubTransfer(subOwner, 0, id);\\n    }\\n\\n    function subOwnerOf(uint256 id) public view returns (uint256) {\\n        return _subOwners[id];\\n    }\\n\\n    function ownerOf(uint256 id) public view returns (address) {\\n        address owner = _owners[id];\\n        require(owner != address(0), \\\"token does not exist\\\");\\n        return owner;\\n    }\\n\\n    function subTransferFrom(\\n        address owner,\\n        uint256 from,\\n        uint256 to,\\n        uint256 id\\n    ) external {\\n        require(owner == msg.sender || _operatorsForAll[owner][msg.sender], \\\"NOT_AUTHORIZED_SUB_TRANSFER\\\");\\n        require(owner == _owners[id], \\\"not owner\\\");\\n        uint256 subOwner = _subOwners[id];\\n        require(subOwner == from, \\\"not subOnwer\\\");\\n        _subOwners[id] = to;\\n        _subNumNFTPerAddress[subOwner]--;\\n        _subNumNFTPerAddress[to]++;\\n        emit SubTransfer(from, to, id);\\n    }\\n\\n    function subBatchTransferFrom(\\n        address owner,\\n        uint256 from,\\n        uint256 to,\\n        uint256[] calldata ids\\n    ) external {\\n        require(owner == msg.sender || _operatorsForAll[owner][msg.sender], \\\"NOT_AUTHORIZED_SUB_BATCH_TRANSFER\\\");\\n        uint256 numIds = ids.length;\\n        for (uint256 i = 0; i < numIds; i++) {\\n            uint256 id = ids[i];\\n            require(owner == _owners[id], \\\"not owner\\\");\\n            uint256 subOwner = _subOwners[id];\\n            require(subOwner == from, \\\"not subOnwer\\\");\\n            _subOwners[id] = to;\\n            emit SubTransfer(from, to, id);\\n        }\\n        _subNumNFTPerAddress[from] -= numIds;\\n        _subNumNFTPerAddress[to] += numIds;\\n    }\\n\\n    function transferFrom(\\n        address from,\\n        address to,\\n        uint256 id\\n    ) external {\\n        require(to != address(0), \\\"invalid to\\\");\\n        require(from == msg.sender || _operatorsForAll[from][msg.sender], \\\"NOT_AUTHORIZED_TRANSFER\\\");\\n        address owner = _owners[id];\\n        require(owner == from, \\\"not owner\\\");\\n        _owners[id] = to;\\n        uint256 subOwner = _subOwners[id];\\n        if (_subOwners[id] != 0) {\\n            _subOwners[id] = 0;\\n            _subNumNFTPerAddress[subOwner]--;\\n            emit SubTransfer(subOwner, 0, id);\\n        }\\n        emit Transfer(from, to, id);\\n    }\\n\\n    function batchTransferFrom(\\n        address from,\\n        address to,\\n        uint256[] calldata ids\\n    ) external {\\n        require(to != address(0), \\\"invalid to\\\");\\n        require(from == msg.sender || _operatorsForAll[from][msg.sender], \\\"NOT_AUTHORIZED_BATCH_TRANSFER\\\");\\n        for (uint256 i = 0; i < ids.length; i++) {\\n            uint256 id = ids[i];\\n            address owner = _owners[id];\\n            require(owner == from, \\\"not owner\\\");\\n            _owners[id] = to;\\n            uint256 subOwner = _subOwners[id];\\n            if (_subOwners[id] != 0) {\\n                _subOwners[id] = 0;\\n                _subNumNFTPerAddress[subOwner]--;\\n                emit SubTransfer(subOwner, 0, id);\\n            }\\n            emit Transfer(from, to, id); // TODO extract function (same as transferFrom)\\n        }\\n    }\\n\\n    function setApprovalForAll(address operator, bool approved) external {\\n        _operatorsForAll[msg.sender][operator] = approved;\\n        emit ApprovalForAll(msg.sender, operator, approved);\\n    }\\n\\n    function isApprovedForAll(address owner, address operator) external view returns (bool) {\\n        return _operatorsForAll[owner][operator];\\n    }\\n}\\n\",\"keccak256\":\"0x686c41cfb49f8a706a754f3c299c11b22e84c4416c1cf8d405df2e44e7f0e24d\",\"license\":\"MIT\"},\"src/tokens/ERC721TokenDataLayout.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\ncontract ERC721TokenDataLayout {\\n    address internal _minter;\\n    uint256 internal _lastId;\\n    mapping(uint256 => address) internal _owners;\\n    mapping(uint256 => uint256) internal _subOwners;\\n\\n    mapping(uint256 => uint256) internal _subNumNFTPerAddress;\\n    mapping(address => uint256) internal _numNFTPerAddress;\\n    mapping(address => mapping(address => bool)) internal _operatorsForAll;\\n    mapping(uint256 => address) internal _operators;\\n\\n    mapping(uint256 => uint256) internal _data;\\n}\\n\",\"keccak256\":\"0x65eca9032ef1c725df7eacfc79958b094e833652befa8c4d7c06910d65f5ee05\",\"license\":\"MIT\"},\"src/tokens/Elements.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"./ERC1155Token.sol\\\";\\n\\ncontract Elements is ERC1155Token {\\n    function postUpgrade(address dungeon) public override {\\n        super.postUpgrade(dungeon);\\n    }\\n}\\n\",\"keccak256\":\"0x015b931e538552feea899d01804291e2f69d4320812e016e3b28e0c3687637ac\",\"license\":\"MIT\"},\"src/tokens/Gears.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"./ERC721Token.sol\\\";\\n\\ncontract Gears is ERC721Token {\\n    function postUpgrade(address dungeon) public override {\\n        super.postUpgrade(dungeon);\\n    }\\n}\\n\",\"keccak256\":\"0xe940d0e0374fdad101cab97f37e258cfe2c6f73e31394238f2125eec58ff2de7\",\"license\":\"MIT\"},\"src/tokens/Rooms.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"./ERC721Token.sol\\\";\\n\\ncontract Rooms is ERC721Token {\\n    function postUpgrade(address dungeon) public override {\\n        super.postUpgrade(dungeon);\\n    }\\n\\n    function mintId(uint256 id, uint256 subOwner) public {\\n        require(msg.sender == _minter, \\\"NOT_AUTHORIZED_MINT\\\");\\n        _subOwners[id] = subOwner;\\n        _subNumNFTPerAddress[subOwner]++;\\n        _owners[id] = _minter;\\n        emit Transfer(address(0), _minter, id);\\n        emit SubTransfer(0, subOwner, id);\\n    }\\n}\\n\",\"keccak256\":\"0xf0e626483958bb528f5b4922ea640b7a461c1df90884e666bc7e23c66d7d15df\",\"license\":\"MIT\"},\"src/utils/BlockHashRegister.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\ncontract BlockHashRegister {\\n    mapping(uint256 => bytes32) _blockHashes;\\n    uint256 _blockToActualise;\\n\\n    event HashRequest(uint256 blockNumber);\\n\\n    function get(uint256 blockNumber) external view returns (bytes32) {\\n        return _blockHashes[blockNumber];\\n    }\\n\\n    function getOrCompute(uint256 blockNumber) external view returns (bytes32) {\\n        bytes32 blockHash = _blockHashes[blockNumber];\\n        if (uint256(blockHash) == 0) {\\n            return _computeBlockHash(blockNumber);\\n        }\\n        return blockHash;\\n    }\\n\\n    function getBlockToActualise() external view returns (uint256) {\\n        return _blockToActualise;\\n    }\\n\\n    function request() external {\\n        uint256 blockNumber = _blockToActualise;\\n        if (blockNumber < block.number) {\\n            _save(blockNumber);\\n            _blockToActualise = block.number;\\n            emit HashRequest(block.number);\\n        }\\n    }\\n\\n    function save() external {\\n        uint256 blockNumber = _blockToActualise;\\n        if (blockNumber < block.number) {\\n            _save(blockNumber);\\n            _blockToActualise = 0;\\n        }\\n    }\\n\\n    function _computeBlockHash(uint256 blockNumber) internal view returns (bytes32) {\\n        if (blockNumber < 256 || blockNumber > block.number - 256) {\\n            return blockhash(blockNumber);\\n        } else {\\n            uint256 moduloBlockNumber = block.number - ((block.number - blockNumber - 1) % 256) + 1;\\n            return blockhash(moduloBlockNumber);\\n        }\\n    }\\n\\n    function _save(uint256 blockNumber) internal returns (bytes32) {\\n        bytes32 blockHash = _computeBlockHash(blockNumber);\\n        _blockHashes[blockNumber] = blockHash;\\n        return blockHash;\\n    }\\n}\\n\",\"keccak256\":\"0xf459998169e51b1d23409abbd6b4665fe58231e06d60c6c715dcb80a995d66db\",\"license\":\"MIT\"},\"src/utils/Constants.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\ncontract Constants {\\n    uint256 public constant MAX_FOOD = 1000000000000000;\\n}\\n\",\"keccak256\":\"0x1c472889b99bb7a6cbb81bca4961a0ab74f21409a367351234ee0b3a4d5097fa\",\"license\":\"MIT\"},\"src/utils/MetaTransactionReceiver.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nabstract contract MetaTransactionReceiver {\\n    bytes32 constant FORWARDER_STORAGE_POSITION = 0xbda473cae6459373242ba82cd14b3b8493956b600be62b2478f52616c8a283de;\\n\\n    function isTrustedForwarder(address forwarder) external view returns (bool) {\\n        return _isTrustedForwarder(forwarder);\\n    }\\n\\n    function _msgSender() internal view returns (address payable sender) {\\n        sender = payable(msg.sender);\\n        if (_isTrustedForwarder(msg.sender)) {\\n            bytes memory data = msg.data;\\n            uint256 length = msg.data.length;\\n            assembly {\\n                sender := mload(add(data, length))\\n            }\\n        }\\n    }\\n\\n    function _isTrustedForwarder(address trustedForwarder) internal view returns (bool) {\\n        address currentForwarder;\\n        // solhint-disable-next-line security/no-inline-assembly\\n        assembly {\\n            currentForwarder := sload(FORWARDER_STORAGE_POSITION)\\n        }\\n        return currentForwarder == trustedForwarder;\\n    }\\n\\n    function _setTrustedForwarder(address trustedForwarder) internal {\\n        // solhint-disable-next-line security/no-inline-assembly\\n        assembly {\\n            sstore(FORWARDER_STORAGE_POSITION, trustedForwarder)\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x42c77fecc9a7d2dcbc7c99d4fb9288e4a1812b25431b7475c1b5013c3a393993\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60808060405234610016576149c2908161001c8239f35b600080fdfe6080604052600436101561001257600080fd5b60003560e01c80630604ba13146100e757806322988b1d146100e2578063398f2168146100dd5780636fadcf72146100d85780637507a1c9146100d35780639434e4e8146100ce578063ab536060146100c9578063b2f2dff9146100c4578063cf747b49146100bf578063d8468f8f146100ba578063e6d48fe7146100b5578063e7691518146100b05763f3f543ba146100ab57600080fd5b611633565b61151e565b6113d5565b61127c565b610ff4565b610dbf565b610cdd565b610c6a565b610aae565b610a12565b610850565b6106ff565b610124565b8060010b036100f757565b600080fd5b61ffff8116036100f757565b90606491610164116100f757565b90604491610144116100f757565b346100f7576101c03660031901126100f75760048035604435610146816100ec565b60643591610153836100fc565b6084359360a4359260079084820b958686036100f757366101c4116100f75761018660018060a01b0385541633146117c4565b6005546101a3906001600160a01b03165b6001600160a01b031690565b95863b156100f7576040988951809863216d6a4f60e11b8252818860009b8c80945af180156102bf576106db575b50866101e7816000526000602052604060002090565b916101f28354611db5565b806105f0575b5050875b60ff811660088110156103735761021561021a9161190c565b611934565b90898260010b8181136000146102c85750508654610240906001600160a01b0316610197565b61024982611953565b92813b156102c4578d516302acc94b60e01b8152808b018c815260ff909516602086015261ffff919091166040850152928b91849182908490829060600103925af19182156102bf576102a1926102a6575b506118e0565b6101fc565b806102b36102b992610980565b806117ad565b3861029b565b6117b8565b8b80fd5b126102d8575b6102a191506118e0565b86546102ec906001600160a01b0316610197565b9161030c6103056103056102ff85611953565b93611976565b61ffff1690565b92803b156102c4578d5163c9b902e360e01b8152808b018c815260ff909316602084015260408301949094528b9184919082908490829060600103925af19182156102bf576102a192610360575b506102ce565b806102b361036d92610980565b3861035a565b5050926103c791945087999892959661038b816123fa565b9160010b8061057a575b506103c28a83016103b861ffff809a166103b3835163ffffffff1690565b611989565b63ffffffff169052565b6122f5565b6103cf578480f35b6002810180546103de8161283b565b608081015161ffff16918683166104d8575b50505050600301918254906104048261283b565b92610414608085015161ffff1690565b918216610422575b50508480f35b836103059361045261044a61045794606061045f990196610445885161ffff1690565b614950565b61ffff168552565b612789565b5161ffff1690565b1561046e575b8080808061041c565b600854610483906001600160a01b0316610197565b905491813b156104d4579351630301ea6560e51b8152938401918252839182908490829060200103925af180156102bf576104c1575b818180610465565b806102b36104ce92610980565b386104b9565b8380fd5b91610457826104fc9461045261044a8a6060610305980196610445885161ffff1690565b1561050a575b8080806103f0565b60085461051f906001600160a01b0316610197565b9054813b15610576578751630301ea6560e51b81528681019182529691879182908490829060200103925af19081156102bf578795600392610563575b5090610502565b806102b361057092610980565b3861055c565b8680fd5b6105af61ffff916104576105a76080870192610598845161ffff1690565b606089015161ffff1690614950565b61ffff168252565b16156105bc575b38610395565b8951602435815281907fd02b8bdc1eb9eb4a85fe2b27c68fbe1eec04f697f660cc4cf3bb2cee4456f49090602090a26105b6565b600854610605906001600160a01b0316610197565b8c519163c9a59e4760e01b8352898380610629602097889483019190602083019252565b0381855afa9182156102bf578b8f8c8f91610653600a8a986106799a86916106be575b501061188d565b5196879586948593630d9778e560e11b8552840160209093929193604081019481520152565b03925af180156102bf57610690575b8891506101f8565b816106af92903d106106b7575b6106a781836109b3565b81019061187e565b503880610688565b503d61069d565b6106d591508a3d8c116106b7576106a781836109b3565b3861064c565b806102b36106e892610980565b386101d1565b6001600160a01b038116036100f757565b346100f7576000608036600319011261081d576004359061071f826106ee565b60243561072b816106ee565b6107366044356106ee565b60643590610743826106ee565b7fc8fcad8db84d3cc18b4c41d551ea0ee66dd599cde068d998e57d5e09332c131c546001600160a01b0391829161077d908316331461174c565b16806001600160601b0360a01b600a541617600a55803b156104d457838091600460405180948193630354740160e31b83525af180156102bf57610804575b506107e49061080193941660018060a01b03166001600160601b0360a01b6005541617600555565b60018060a01b03166001600160601b0360a01b6004541617600455565b80f35b90610801936108156107e493610980565b9350906107bc565b80fd5b9181601f840112156100f7578235916001600160401b0383116100f7576020808501948460051b0101116100f757565b346100f75760603660031901126100f75760048035906001600160401b03906024358281116100f7576108869036908301610820565b9390926044359081116100f7576108a09036908401610820565b93909460018060a01b03906108b98286541633146117c4565b60005b8181106108c557005b60075483166001600160a01b0316906108e76108e2828588611d0c565b611d1c565b916108f3828a8c611d0c565b3592813b156100f7576040805163a41dab8160e01b81526001600160a01b03909216828b01908152602081018a90529081019490945292600091849182908490829060600103925af19182156102bf5761095292610957575b50611a24565b6108bc565b806102b361096492610980565b3861094c565b634e487b7160e01b600052604160045260246000fd5b6001600160401b03811161099357604052565b61096a565b608081019081106001600160401b0382111761099357604052565b90601f801991011681019081106001600160401b0382111761099357604052565b6040519060a082018281106001600160401b0382111761099357604052565b6040519060c082018281106001600160401b0382111761099357604052565b60403660031901126100f757600435610a2a816106ee565b6024356001600160401b03918282116100f757366023830112156100f75781600401359283116109935760405190610a6c601f8501601f1916602001836109b3565b83825236602485850101116100f7576000602085610aaa966024610a9897018387013784010152611807565b60405190151581529081906020820190565b0390f35b346100f75760203660031901126100f757600435610ad760018060a01b036004541633146117c4565b600554610aec906001600160a01b0316610197565b90813b156100f757604051809263216d6a4f60e11b82528160046000958680945af180156102bf57610c57575b50610b2381611db5565b6002610b39826000526001602052604060002090565b805460401c6001600160401b0316610c40575b01610b6d610b6182546001600160401b031690565b6001600160401b031690565b610c2b575b50600954610b88906001600160a01b0316610197565b604051630178fe3f60e01b81526004810183905291602083602481855afa80156102bf5784938491610c0d575b50610bbe575050f35b813b15610c0957604051634848b1a560e01b815260048101919091526000602482015291908290604490829084905af180156102bf57610bfc575080f35b806102b361080192610980565b5050fd5b610c25915060203d81116106b7576106a781836109b3565b38610bb5565b805467ffffffffffffffff1916905538610b72565b805467ffffffffffffffff60401b19168155610b4c565b806102b3610c6492610980565b38610b19565b346100f75760803660031901126100f7576024356001600160401b0380821682036100f7576044359160ff831683036100f757606435928284116100f757366023850112156100f75783600401359283116100f75736602484860101116100f7576024610cdb940191600435611ad9565b005b346100f75760403660031901126100f757600435610d1a60018060a01b03610d0a816004541633146117c4565b600554166001600160a01b031690565b803b156100f7576000809160046040518094819363216d6a4f60e11b83525af180156102bf57610dac575b50610d63610d5d826000526000602052604060002090565b54611db5565b610d7c610d6f826123fa565b60006080820152826122f5565b60405160243581527fd02b8bdc1eb9eb4a85fe2b27c68fbe1eec04f697f660cc4cf3bb2cee4456f49090602090a2005b806102b3610db992610980565b38610d45565b346100f7576101603660031901126100f757602435610ddd36610108565b600480546001600160a01b039290610df890841633146117c4565b610e09610e04856132ed565b6119ab565b600954610e1e906001600160a01b0316610197565b92604093845180916369f648a160e01b825260209182918180610e488c8b83019190602083019252565b03915afa9182156102bf57600092610fd5575b50600654610e71906001600160a01b0316610197565b8187518092630607176160e31b82528180610e948b358c83019190602083019252565b03915afa9081156102bf57610eb492600092610fb8575b505082146119ec565b60005b60088110610f26575050600954610ed992506001600160a01b03169050610197565b803b156100f7579151634848b1a560e01b8152908101928352604435602084015291600091839182908490829060400103925af180156102bf57610f1957005b806102b3610cdb92610980565b600754610f3b906001600160a01b0316610197565b90610f4581611a33565b610f4f8287611923565b35833b156100f7578851637f4c824d60e11b81526001600160a01b0386881616818a019081526000602082018190526040820194909452606081019290925293849182908490829060800103925af19182156102bf57610fb3926109575750611a24565b610eb7565b610fce9250803d106106b7576106a781836109b3565b3880610eab565b81610fed9293503d84116106b7576106a781836109b3565b9038610e5b565b346100f75760603660031901126100f757600435604435611014816100ec565b61102960018060a01b036004541633146117c4565b60055461103e906001600160a01b0316610197565b90813b156100f75760405192839263216d6a4f60e11b84528360046000968780945af19283156102bf5761080193611269575b50611086816000526000602052604060002090565b9061113382549361109685611db5565b866110a0846123fa565b916110d460808401916110ca6110bb610305855161ffff1690565b6001600160401b031660070b90565b9060010b90611a83565b606084015161ffff16838260070b61ffff9283811660070b821361125d575b501361124a575050604051602435815285907fd02b8bdc1eb9eb4a85fe2b27c68fbe1eec04f697f660cc4cf3bb2cee4456f49090602090a2525b826122f5565b600182019161115f61115761115161114c865460ff1690565b611941565b60031690565b8095846129a8565b80928254907f3042d0c278ec3b2d8bf290d27da7bb56226996146c187fc01f6f448b6283da72604051806111a48a82919091602060ff60408301946000845216910152565b0390a46111b082611db5565b61120c6111c882546000526001602052604060002090565b80546111e49060801c6001600160401b0316611aab565b611aab565b815467ffffffffffffffff60801b191660809190911b67ffffffffffffffff60801b16179055565b61123a611223836000526001602052604060002090565b80546111e49060801c6001600160401b0316611ac1565b559060ff1660ff19825416179055565b61125893501661ffff169052565b61112d565b61ffff168552386110f3565b806102b361127692610980565b38611071565b346100f7576101403660031901126100f7576004602435813561129e826106ee565b6112a736610116565b9060018060a01b03926112be8486541633146117c4565b60005b60ff8116906008821015610cdb576112f66103056112f16112ea6112e485611953565b60ff1690565b9488611923565b6119a1565b918261130d575b5061130891506118e0565b6112c1565b600754611322906001600160a01b0316610197565b803b156100f7576040805163a41dab8160e01b81526001600160a01b038716818c019081526020810185905280830187905291929091600091839182908490829060600103925af180156102bf576113089588937f41d17e4a29add7df9dab104b7b914e73209c448b1fd78b8ca04efc5e24df1abb936113b9936113c2575b50519485526020850152868a16939081906040820190565b0390a3386112fd565b806102b36113cf92610980565b386113a1565b346100f75760403660031901126100f75760043560243561140160018060a01b036004541633146117c4565b600554611416906001600160a01b0316610197565b91823b156100f7576000809360046040518096819363216d6a4f60e11b83525af19283156102bf57610cdb9361150b575b5061145c816000526000602052604060002090565b82815461146881611db5565b837f3042d0c278ec3b2d8bf290d27da7bb56226996146c187fc01f6f448b6283da72604051806114a48190600460206040840193600181520152565b0390a460016114b284613b12565b509391505001906114c7825460081c60070b90565b8160070b9060070b126114dc575b5050612dc6565b611504919081549060081b68ffffffffffffffff00169068ffffffffffffffff001916179055565b38806114d5565b806102b361151892610980565b38611447565b346100f7576101403660031901126100f75760243561153c36610116565b90600461155360018060a01b0382541633146117c4565b61155d8135613bc9565b9160005b60ff8116906008821015610cdb5761157f6103056112f18489611923565b611593575b61158e91506118e0565b611561565b6007546115a8906001600160a01b0316610197565b6115be6112f16115b784611953565b9489611923565b813b156100f757604080516311aa10fb60e01b81528088018981526020810188905260ff9096169186019190915261ffff909116606085015292600091849182908490829060800103925af19182156102bf5761158e92611620575b50611584565b806102b361162d92610980565b3861161a565b346100f75760803660031901126100f7576116fc600435611653816106ee565b60243590611660826106ee565b6044359161166d836106ee565b6064359261167a846106ee565b7fc8fcad8db84d3cc18b4c41d551ea0ee66dd599cde068d998e57d5e09332c131c546001600160a01b039283916116b4908316331461174c565b816001600160601b0360a01b9516856006541617600655168360075416176007551690600854161760085560018060a01b03166001600160601b0360a01b6009541617600955565b600160ff1b600052600160205261174460ff61173d7fe209ec102481142efb7be62c549d278b9d65c9410e465059ec2d8758d3fc5cf55b5460d01c60ff1690565b1615611d26565b610cdb6133e1565b1561175357565b60405162461bcd60e51b815260206004820152602c60248201527f4f6e6c79206f776e657220697320616c6c6f77656420746f20706572666f726d60448201526b103a3434b99030b1ba34b7b760a11b6064820152608490fd5b60009103126100f757565b6040513d6000823e3d90fd5b156117cb57565b60405162461bcd60e51b81526020600482015260146024820152732727aa2fa0aaaa2427a924ad22a22fa0a226a4a760611b6044820152606490fd5b600091829161182160018060a01b036004541633146117c4565b6020825192019034905af180156118355790565b60405162461bcd60e51b815260206004820152601160248201527019985a5b1959081d1bc8199bdc9dd85c99607a1b6044820152606490fd5b6000526002602052604060002090565b908160209103126100f7575190565b1561189457565b60405162461bcd60e51b815260206004820152600e60248201526d546f6f206d616e7920676561727360901b6044820152606490fd5b634e487b7160e01b600052601160045260246000fd5b60ff1660ff81146118f15760010190565b6118ca565b634e487b7160e01b600052603260045260246000fd5b600881101561191e5760051b60c40190565b6118f6565b90600881101561191e5760051b0190565b3561193e816100ec565b90565b60ff60029116019060ff82116118f157565b60ff60019116019060ff82116118f157565b60ff166001019060ff82116118f157565b60010b617fff1981146118f15760000390565b91909163ffffffff808094169116019182116118f157565b3561193e816100fc565b156119b257565b60405162461bcd60e51b8152602060048201526012602482015271726f6f6d206973206e6f742061637469766560701b6044820152606490fd5b156119f357565b60405162461bcd60e51b81526020600482015260096024820152683737ba1037bbb732b960b91b6044820152606490fd5b60001981146118f15760010190565b90600182018092116118f157565b906206978082018092116118f157565b919082018092116118f157565b60070b60040190677fffffffffffffff8213677fffffffffffffff198312176118f157565b9060070b9060070b0190677fffffffffffffff198212677fffffffffffffff8313176118f157565b6001600160401b031680156118f1576000190190565b6001600160401b038091169081146118f15760010190565b91909293611af260018060a01b036004541633146117c4565b600093838552602094600c865260408120956001600160401b038093169687835281526040822091611b2e86849060ff1660ff19825416179055565b600180930193851161099357611b4e85611b488654611c56565b86611c90565b8091601f8611600114611bbf5750928480611baf9460ff97947f3553d84d9f5bc81eeb57eac4d5a1fee928d026da4f389c33c1cebfaf3931fda0999793611bb4575b501b906000198460031b1c19161790555b604051938493169783611ce4565b0390a4565b8c0135925038611b90565b601f92919219861690611bd786600052602060002090565b93905b8b838310611c40575050509285927f3553d84d9f5bc81eeb57eac4d5a1fee928d026da4f389c33c1cebfaf3931fda097959260ff97611baf9610611c26575b505082811b019055611ba1565b8b0135600019600386901b60f8161c191690553880611c19565b8401358555938501939283019290810190611bda565b90600182811c92168015611c86575b6020831014611c7057565b634e487b7160e01b600052602260045260246000fd5b91607f1691611c65565b90601f8111611c9e57505050565b600091825260208220906020601f850160051c83019410611cda575b601f0160051c01915b828110611ccf57505050565b818155600101611cc3565b9092508290611cba565b90918060409360208452816020850152848401376000828201840152601f01601f1916010190565b919081101561191e5760051b0190565b3561193e816106ee565b15611d2d57565b60405162461bcd60e51b815260206004820152601760248201527f64756e67656f6e20616c726561647920737461727465640000000000000000006044820152606490fd5b15611d7957565b60405162461bcd60e51b81526020600482015260146024820152731c9bdbdb481b9bdd0818dc99585d1959081e595d60621b6044820152606490fd5b611dc9816000526001602052604060002090565b9081546001600160401b03811692611de2841515611d72565b60ff809260d01c1615611e07575b5050611e059150611e0090614803565b612521565b565b600554611e4e94602091611e23906001600160a01b0316610197565b6040518080988194634a83e9cd60e11b8352600483019190916001600160401b036020820193169052565b03915afa9384156102bf576000946120c0575b5083156120ba57611e7284846120f8565b6001611f6a611f6386867f8850140926f0260fe1b422b7a0d93e7d5734e521eae9ac8969ed512cc3834515611f50611ec688548a8160e81c16908b8160e01c16908c808260d81c169160c01c168888613e7a565b8a5460ff60d01b60d084901b1661ffff60c81b1990911660ff60c81b60c886901b1617178b5595919290611ef986614803565b96611f0e886000526002602052604060002090565b908d611f1f835460ff9060081c1690565b82821691160361209f575b50506040519384938491604091949360ff80926060860197865216602085015216910152565b0390a26000526002602052604060002090565b5460ff1690565b91019384549081611f7d575b5050611df0565b611f9d600591611f96611f8f856123fa565b5160ff1690565b9087613c6e565b9190948416111561202a575b5050600754611fc191506001600160a01b0316610197565b925490833b156100f7576040516302acc94b60e01b81526004810192909252600660248301526044820152916000908390606490829084905af19081156102bf57611e0592611e0092612017575b819281611f76565b806102b361202492610980565b3861200f565b60075461203f906001600160a01b0316610197565b803b156100f7576040516302acc94b60e01b8152600481019390935260ff9390931660248301526044820152906000908290606490829084905af180156102bf5761208c575b8080611fa9565b806102b361209992610980565b38612085565b815461ff00191660089190911b61ff00161790553880611f2a565b50505050565b6120d991945060203d81116106b7576106a781836109b3565b9238611e61565b9060016001600160401b03809316019182116118f157565b61210190614803565b60ff612117826000526002602052604060002090565b541615612122575050565b600660ff6121686121776001600160401b03948560035460401c1696612147826147ac565b80156122ea575b156122195750849283916000526002602052604060002090565b9060ff1660ff19825416179055565b1603612181575050565b8062014370420416809161219d6003546001600160401b031690565b16146121e3576121c491506001600160401b03166001600160401b03196003541617600355565b611e05600160401b67ffffffffffffffff60401b196003541617600355565b506121f0611e05916120e0565b67ffffffffffffffff60401b6003549160401b169067ffffffffffffffff60401b191617600355565b601961222f610b6161222a85614736565b6145e1565b806122dc575b106122d257846122886112e460649360405161227d8161226f60208201948a86909160419282526020820152600360fa1b60408201520190565b03601f1981018352826109b3565b519020612710900690565b16116122be576122ab600561229c83613b12565b5091505060070b078516611965565b9283916000526002602052604060002090565b849283916000526002602052604060002090565b508492839161186e565b6122e590613bba565b612235565b50600a88101561214e565b9061239790612340612391610305608061238761236c61234661232561231f6112e48a5160ff1690565b60f81b90565b61234061233a61030560208c015161ffff1690565b60e81b90565b90611a51565b61234061236661235d60408b015163ffffffff1690565b63ffffffff1690565b60c81b90565b61234061238161030560608a015161ffff1690565b60b81b90565b94015161ffff1690565b60a81b90565b6006549091906123af906001600160a01b0316610197565b91823b156100f757604051634848b1a560e01b815260048101929092526024820152906000908290604490829084905af180156102bf576123ed5750565b806102b3611e0592610980565b60405160a081018181106001600160401b038211176109935761246f9260809260209260405260009381858093528285820152826040820152826060820152015261244f61019760065460018060a01b031690565b6040518080968194630178fe3f60e01b8352600483019190602083019252565b03915afa80156102bf576124f86124bb6124e0926124ed9561193e9591612503575b50908160f81c9161ffff808260e81c169363ffffffff8360c81c1691808460b81c169360a81c1693565b9792959091936124d56124cc6109d4565b60ff909a168a52565b61ffff166020890152565b63ffffffff166040870152565b61ffff166060850152565b61ffff166080830152565b61251b915060203d81116106b7576106a781836109b3565b38612491565b6002612537826000526002602052604060002090565b0180546001600160401b0390811692836125515750505050565b60055461256d94602091611e23906001600160a01b0316610197565b03915afa9384156102bf5760009461265f575b5083156120ba576125f99361259491613dd4565b906125b26125a18261267f565b916000526001602052604060002090565b6002808201946125c986546001600160401b031690565b161415918261263e575b82612635575b5081612624575b50612602575b5050805467ffffffffffffffff19169055565b388080806120ba565b815467ffffffffffffffff19166001600160401b0390911617905538806125e6565b5460d01c60ff1615159050386125e0565b159150386125d9565b9150612658610b6182546001600160401b039060801c1690565b15916125d3565b61267891945060203d81116106b7576106a781836109b3565b9238612580565b6126a6612696826000526001602052604060002090565b5460401c6001600160401b031690565b906001600160401b038216918215612763576005546126ff916020916126d4906001600160a01b0316610197565b6040518080958194634a83e9cd60e11b8352600483019190916001600160401b036020820193169052565b03915afa9081156102bf5760009161276b575b5080156127635761193e92612744610b61612737856000526001602052604060002090565b546001600160401b031690565b149061275d611733846000526001602052604060002090565b92613be8565b505050600090565b612783915060203d81116106b7576106a781836109b3565b38612712565b906127e19061279a815161ffff1690565b906127a9602082015160ff1690565b604082015160ff16606083015161ffff16916127db60a06127cf608087015161ffff1690565b95015163ffffffff1690565b946148df565b6008549091906123af906001600160a01b0316610197565b6040519060c082018281106001600160401b03821117610993576040528160a06000918281528260208201528260408201528260608201528260808201520152565b602061287f916128496127f9565b5060085461285f906001600160a01b0316610197565b6040518080958194630178fe3f60e01b8352600483019190602083019252565b03915afa9081156102bf5761291161291c6128fc6128d46129069561193e95600091612929575b50908160f81c61ffff808460e81c169360ff8160e01c169363ffffffff838360d01c16938360c01c16921690565b9794999291936128f26128e89792976109f3565b61ffff909c168c52565b60ff1660208b0152565b60ff166040890152565b61ffff166060870152565b61ffff166080850152565b63ffffffff1660a0830152565b612941915060203d81116106b7576106a781836109b3565b386128a6565b60070b677fffffffffffffff1981146118f1576000190190565b60070b677fffffffffffffff81146118f15760010190565b80156129965760ff81116118f1576001901b9060ff82116118f157565b50600190565b60ff61193e9116612979565b90916129b383613b12565b5060ff848116969390929190828189612ba35750506129d46129db93612947565b905b613b3b565b946129f0836000526001602052604060002090565b90612a05876000526001602052604060002090565b82546001600160401b0380821693612a35612a30611151612a2a875495861694612979565b9b611941565b61299c565b948181108015612b9b575b15612ad157505050505050612a5a905460ff9060c81c1690565b81841680928583161614612aaa57505050505050505b60405162461bcd60e51b815260206004820152601260248201527163616e74206d6f766520746869732077617960701b6044820152606490fd5b8593600f9160041c161614612ac0575b50505090565b612ac992612c5e565b388181612aba565b90919395509791939711600014612b08575050905460c81c60ff16905081841680928583161614612aaa5750505050505050612a70565b8481979594939716918285838a60c81c161614908115612b88575b50612b375750505050505050505050612a70565b889687871115612b715750505082612b61612b5884935460ff9060c81c1690565b60041c600f1690565b169216911614612ac05750505090565b60cc1c16600f16149250612ac09150505750505090565b60c81c8616851686861614905038612b23565b508115612a40565b60018a03612bba575050916129d66129db93612961565b909360028a03612bd25750506129d46129db93612961565b9150925087600314600014612bed576129d66129db93612947565b60405162461bcd60e51b815260206004820152601460248201527334b6b837b9b9b4b13632903234b932b1ba34b7b760611b6044820152606490fd5b15612c3057565b60405162461bcd60e51b81526020600482015260066024820152656e6f206b657960d01b6044820152606490fd5b909182818111612d9d575b50612c9f612c9b611f6383612c8c87612c8c88600052600b602052604060002090565b90600052602052604060002090565b1590565b612ca857505050565b600754612cbd906001600160a01b0316610197565b604051635986e3e560e11b81526004810184905260076024820152602081604481855afa80156102bf57612cfb91600091612d7f575b501515612c29565b803b156100f75760405163c9b902e360e01b8152600481018490526007602482015260016044820152906000908290606490829084905af19384156102bf57612c8c612d5f94612c8c93611e0597612d6c575b50600052600b602052604060002090565b805460ff19166001179055565b806102b3612d7992610980565b38612d4e565b612d97915060203d81116106b7576106a781836109b3565b38612cf3565b92509138612c69565b8115612db0570690565b634e487b7160e01b600052601260045260246000fd5b612dda816000526000602052604060002090565b612def81546000526001602052604060002090565b92612e04816000526001602052604060002090565b80546001600160401b039590600090878116612fee5750612e258685613772565b612e2e84614803565b966002612e45896000526002602052604060002090565b0190612e5b610b6183546001600160401b031690565b1580612fe3575b612eab575b505050611e05955091612e96612ea69492611223856111e46111df600198546001600160401b039060801c1690565b815501805460ff19166004179055565b6132a1565b80831615612f36575b509261122360019593611e05997f644c4d4ff52c1efcb89d373879c1d7e01d3f8b7e60cc19f9bdf5da38cd90c14d612f2786612f0d612e9698612ea69d9b906001600160401b03166001600160401b0319825416179055565b6040516001600160401b0390911681529081906020820190565b0390a293955081949650612e67565b90949295939150431690612f5461019760055460018060a01b031690565b803b156100f7576000809160046040518094819363338cdca160e01b83525af19687156102bf57611e05997f644c4d4ff52c1efcb89d373879c1d7e01d3f8b7e60cc19f9bdf5da38cd90c14d612f2786612f0d612e969860019c61122398612ea69f612fd0575b50989b9d505050965050509950939550612eb4565b806102b3612fdd92610980565b38612fbb565b506003430615612e62565b604090888082841c16159182613293575b505080613274575b8061320b575b61316e575b61301b85611db5565b6130248561336e565b6001600160a01b03811691821515806130f6575b613045575b505050612e25565b60075461305a906001600160a01b0316610197565b803b156100f757815163a41dab8160e01b81526001600160a01b0393909316600484015260086024840152600160448401526000908390606490829084905af19081156102bf5787927f41d17e4a29add7df9dab104b7b914e73209c448b1fd78b8ca04efc5e24df1abb926130e3575b50516008815260016020820152604090a338808061303d565b806102b36130f092610980565b386130ca565b50600654613134906020908b90613115906001600160a01b0316610197565b84518080958194630607176160e31b8352600483019190602083019252565b03915afa9081156102bf57600091613150575b50831415613038565b613168915060203d81116106b7576106a781836109b3565b38613147565b6005544389169250613188906001600160a01b0316610197565b803b156100f75760008091600484518094819363338cdca160e01b83525af180156102bf576131f8575b5083546131ca9060401c6001600160401b0316610b61565b61301257835467ffffffffffffffff60401b1916604083901b67ffffffffffffffff60401b16178455613012565b806102b361320592610980565b386131b2565b50600954613221906001600160a01b0316610197565b8151630178fe3f60e01b81526004810187905290602090829060249082905afa9081156102bf578391613256575b501561300d565b61326e915060203d81116106b7576106a781836109b3565b3861324f565b5060028861328b828701546001600160401b031690565b161415613007565b60801c161590508838612fff565b6132aa816123fa565b608081019161ffff92838151168460608501511681106132cc575b5050505050565b600101938085116118f1576132e3941690526122f5565b38808080806132c5565b6009546040516331a9108f60e11b815260048101929092526001600160a01b03906020908390602490829085165afa9182156102bf57600092613332575b5016301490565b90916020823d8211613366575b8161334c602093836109b3565b8101031261081d57505161335f816106ee565b903861332b565b3d915061333f565b613377816132ed565b156133db576009546040516369f648a160e01b815260048101929092526001600160a01b0391906020908290602490829086165afa9081156102bf576000916133bf57501690565b6133d7915060203d81116106b7576106a781836109b3565b1690565b50600090565b600160ff1b60005260026020527f273ff7d24090d0ae93766d322996b27de23d70a15bfcdb2567df35a7695e10fd80547f273ff7d24090d0ae93766d322996b27de23d70a15bfcdb2567df35a7695e10fc9080613748575b5060075461344f906001600160a01b0316610197565b90813b156100f75760405163c9b902e360e01b815260006004820181905260086024830152604482018190529283908290606490829084905af180156102bf57613735575b50600160ff1b60005260016020527fe209ec102481142efb7be62c549d278b9d65c9410e465059ec2d8758d3fc5cf5805443604081901b67ffffffffffffffff60401b166001600160401b039190911678ff0000000000000000ffffffffffffffffffffffffffffffff19909216821717600160c21b17808355835460ff60d81b1990911660d09190911b60ff60d81b16178255916135a19061358790805461357d9060181c60ff16613563613549826118e0565b845463ff000000191660189190911b63ff00000016178455565b855460ff60e81b191660e89190911b60ff60e81b16178555565b5460101c60ff1690565b825460ff60e01b191660e09190911b60ff60e01b16178255565b60018101839055600160ff1b938490556005546135c6906001600160a01b0316610197565b803b156104d45783809160046040518094819363338cdca160e01b83525af180156102bf57613722575b50600654613606906001600160a01b0316610197565b604051630607176160e31b81526000600482015290602090829060249082905afa9081156102bf578491613704575b5061363f81613a33565b600954613654906001600160a01b0316610197565b90813b15613700576040516319846a3560e21b8152600160ff1b6004820152602481019190915293908490818381604481015b03925af19081156102bf577fa97399cd19a5b00b49b7d10d188180e100139a0501c9c9b4fe21dab5b915162f936136c8926136ed575b505460c01c60ff1690565b604080516001600160401b03909316835260ff9091166020830152819081015b0390a2565b806102b36136fa92610980565b386136bd565b8480fd5b61371c915060203d81116106b7576106a781836109b3565b38613635565b806102b361372f92610980565b386135f0565b806102b361374292610980565b38613494565b61375190611db5565b805462ff0000600882901c1662ff0000199091161781556000825538613439565b9061377f61186e83614803565b60018101805480613a09575b506007546137a1906001600160a01b0316610197565b926137ab85613da9565b843b156100f75760405163c9b902e360e01b81526004810183905260086024820152604481019190915260009485908290606490829084905af180156102bf576139f6575b5084613806816000526001602052604060002090565b926138da6138c06001600160401b034316966138388888906001600160401b03166001600160401b0319825416179055565b8654600160c21b78ff0000000000000000ffffffffffffffff00000000000000001990911667ffffffffffffffff60401b60408b901b161717808855815460ff60d81b60d09190911b1660ff60d81b19909116178755805461357d9060181c60ff166138a6613549826118e0565b885460ff60e81b191660e89190911b60ff60e81b16178855565b855460ff60e01b191660e09190911b60ff60e01b16178555565b60018401839055556005546138f7906001600160a01b0316610197565b803b15613700579084809260046040518095819363338cdca160e01b83525af19081156102bf57613960926020926139e3575b50600654613940906001600160a01b0316610197565b6040518080958194630607176160e31b8352600483019190602083019252565b03915afa9081156102bf5784916139c5575b5061397c81613a33565b600954613991906001600160a01b0316610197565b90813b15613700576040516319846a3560e21b81526004810187905260248101919091529390849081838160448101613687565b6139dd915060203d81116106b7576106a781836109b3565b38613972565b806102b36139f092610980565b3861392a565b806102b3613a0392610980565b386137f0565b613a1290611db5565b815462ff0000600882901c1662ff000019909116178255600081553861378b565b80151580613aa7575b613a435750565b7fc24affdb20f6529973515c5398461c1f6228edbfac531ab49e56a11433a86c9f6136e8613a7042611a41565b6001600160a01b039093166000818152600d6020526040902090939081905560405191829182919060206040840193600081520152565b50600954613abd906001600160a01b0316610197565b60405163c9a59e4760e01b81526004810183905290602090829060249082905afa9081156102bf57600091613af4575b5015613a3c565b613b0c915060203d81116106b7576106a781836109b3565b38613aed565b6001600160401b039081811660070b92828260401c1660070b928260801c1660070b9160ff1c90565b67ffffffffffffffff60801b608084901b16926001600160401b03908116808504600160801b14901517156118f157600160ff1b92848401948585116118f15767ffffffffffffffff60401b8383169260401b1691808304600160401b14901517156118f15701918383018095116118f1571601018091116118f15790565b6003198101919082116118f157565b600160ff1b8101908082116118f157600360fe1b019081106118f15790565b91909260ff600191160361276357600f90613c66575b60ff60646040516020810190858252866040820152600360f91b606082015260418152613c2a81610998565b51902006911611613c3c575050600090565b613c61916040519160208301526040820152600760f81b606082015260418152610998565b600190565b506019613bfe565b92919091613c85613c7e85614655565b6019900490565b8015613da1575b60405194613ce1613cd8836020890189613cbc8a8784909160419282526020820152601960fa1b60408201520190565b0399613cd0601f199b8c81018352826109b3565b519020612da6565b8360011c611a51565b938415613d98575b60ff169586600214613d7e575b613d4993949560088411613d75575b604080516020810194855290810191909152606560f81b6060820152613d40928492909190613cd09082606181015b039081018352826109b3565b9060011c611a51565b928315613d6c575b600114613d5a57565b9180613d699160021c90611a51565b91565b60019350613d51565b60089350613d05565b613d9085613d49959660021c90611a51565b949350613cf6565b60019450613ce9565b506001613c8c565b600160ff1b8103613dba5750600090565b613dc5601991614655565b04600101806001116118f15790565b613e5f6129d4613e6492613e64613e5f613e6e613e7497613e5460ff6009818160405160208101908b8252876040820152603360f91b606082015260418152613e1c81610998565b51902006169360405160208101918a83526040820152606760f81b606082015260418152613e4981610998565b519020061695613b12565b50999198909861488b565b6145fc565b9060070b90611a83565b9461488b565b90600290565b95949290613f12949260ff6000911680600414600014614079575050600f5b8760405160ff613ee86112e46020840184613eca898884909160419282526020820152606f60f81b60408201520190565b0394613ede601f19968781018352826109b3565b5190206064900690565b60009116603c81101561405b57505060ff60005b1660048110613f165750505060f0175b96614250565b9091565b60038103613f905750613f69613f646112e460ff94613f6e94613f5b6040519182613d348c602083019687909160419282526020820152600760fc1b60408201520190565b51902060031690565b611953565b6148b5565b1660158103613f81575060d0175b613f0c565b601c03613f7c5760b017613f0c565b600281036140055750613fdf613f646112e460ff94613fe494613fd56040519182613d348c602083019687909160419282526020820152600760fc1b60408201520190565b5190206006900690565b6148a0565b16600f8103613ff65750605017613f0c565b601203613f7c5760a017613f0c565b600114614014575b5050613f0c565b6040805160208101938452908101859052600760fc1b60608201526140539261404e92612a30926112e49291613f5b908260618101613d34565b6148ca565b17873861400d565b605a9150106000146140705760ff6001613efc565b60ff6002613efc565b60408051602081018b8152918101859052600160f81b6060820152906140a9906112e49081908460618101613eca565b60571161423f575b60408051602081018c8152918101869052600160f91b6060820152606183810182526140e7926112e4928392613ede90826109b3565b6028116140f6575b5050613e99565b60408051602081018c8152918101869052600360f81b6060820152606183810182528c92614130926112e49283929190613ede90826109b3565b6019111561418357505080158015614179575b156141545750600a175b38806140ef565b8060011490811561416e575b501561414d5760051761414d565b905060031438614160565b5080600214614143565b6040805160208101928352908101869052600360f81b60608201526141b8926112e49283929091613ede908260618101613d34565b6032111561420057806141ce575060081761414d565b600181036141e057506001175b61414d565b600281036141f1575060021761414d565b6003036141db5760041761414d565b8061420e575060021761414d565b6001810361421f575060041761414d565b60028103614230575060081761414d565b6003036141db5760011761414d565b915061424a81612979565b916140b1565b949390600061426961426188614803565b959497613b12565b50509060070b1590816145d5575b501561428b57505050505060016002921790565b959493955b60ff908185169082851682116145cc57509086916142f06112e48a6040516142e68161226f8a8d6020840196879160429391835260ff60f81b9060f81b1660208301526021820152600360f81b60418201520190565b5190206014900690565b91600192838086161415928380946145b8575b15614322575050505061431b915060029617936118e0565b9294614290565b6002949293868616861415808061458a575b1561434e5750505050505061431b915060039617936118e0565b6004969293949587808a16141580948195614515575b501561437f575050505050505061431b9150809617936118e0565b9091929394959650600880809916141595866143be575b5050505050506000146143b2575061431b9060059617936118e0565b61431b915095936118e0565b6003929394959650161493841561450a575b84156144f1575b84156144d8575b84156144bf575b8415614499575b8415614473575b841561444d575b8415614410575b50505050388080808080614396565b604d149350909183614445575b508261443d575b5081614435575b5038808080614401565b90503861442b565b915038614424565b92503861441d565b9350604e84148061446c575b80614465575b936143fa565b508061445f565b5082614459565b9350604e841480614492575b8061448b575b936143f3565b5082614485565b508161447f565b9350604e8414806144b8575b806144b1575b936143ec565b50806144ab565b50816144a5565b9350604f8414806144d1575b936143e5565b50826144cb565b9350604f8414806144ea575b936143de565b50806144e4565b9350604f841480614503575b936143d7565b50816144fd565b6050811494506143d0565b9050818716148015614580575b801561456e575b801561455c575b801561453d575b38614364565b50604e851480614555575b8015614537575081614537565b5082614548565b50604f85148015614530575081614530565b50604f85148015614529575082614529565b5060508514614522565b50848685161480156145ae575b806143345750604f83148015614334575081614334565b5060508314614597565b508282161580614303575060508114614303565b97505050505050565b905060070b1538614277565b9060096001600160401b03809316029182169182036118f157565b60070b6003190190677fffffffffffffff198212677fffffffffffffff8313176118f157565b60070b90677fffffffffffffff198212677fffffffffffffff8313176118f157565b600160ff1b81146118f15760000390565b61466161466a91613b12565b50509190614622565b60070b9060008212614708575b61468090614622565b60070b600081126146fa575b6780000000000000008083136146d7575b81136146b5575b808213156146b0575090565b905090565b600160401b60008282039212818312811691831390151617156146a4576118ca565b91600160401b600082820392128183128116918313901516176118f1579161469d565b61470390614644565b61468c565b9061471561468091614644565b919050614677565b60070b677fffffffffffffff1981146118f15760000390565b61473f90613b12565b50819050826000600782900b1261479a575b5060008160070b1261478a575b508060070b8260070b1360001461477c57506001600160401b031690565b90506001600160401b031690565b614794915061471d565b3861475e565b6147a591935061471d565b9138614751565b6147b590613b12565b505060001960079290920b8281121592836147f4575b50826147e8575b50816147dc575090565b6001915060070b131590565b600112159150386147d2565b600783900b12159250386147cb565b61480f61193e91613b12565b509160079190600081840b1261486c5761482a600991611a5e565b830b05915b600082820b1261484d57614844600992611a5e565b900b0590613b3b565b60099061486461485f6129d49461471d565b611a5e565b900b0561471d565b600961487d61485f6148859361471d565b840b0561471d565b9161482f565b60099060070b02908160070b9182036118f157565b60ff60039116029060ff82169182036118f157565b60ff60079116029060ff82169182036118f157565b60041b90610ff060f08316921682036118f157565b60e81b61ffff60e81b1660f89290921b6001600160f81b0319169182019493929185106118f15760e01b60ff60e01b1684019384106118f15760d01b61ffff60d01b1683019283106118f15760c01b61ffff60c01b1682019182106118f15763ffffffff1681018091116118f15790565b90916149649061ffff80931660070b611a83565b918260070b9082811660070b821361498557506000126133d7575050600090565b925050509056fea26469706673582212201d482d90cfa13a8a50a8ba3e3491fad45a7bb3f1688805ce60486aa90c6f127d64736f6c63430008140033",
  "deployedBytecode": "0x6080604052600436101561001257600080fd5b60003560e01c80630604ba13146100e757806322988b1d146100e2578063398f2168146100dd5780636fadcf72146100d85780637507a1c9146100d35780639434e4e8146100ce578063ab536060146100c9578063b2f2dff9146100c4578063cf747b49146100bf578063d8468f8f146100ba578063e6d48fe7146100b5578063e7691518146100b05763f3f543ba146100ab57600080fd5b611633565b61151e565b6113d5565b61127c565b610ff4565b610dbf565b610cdd565b610c6a565b610aae565b610a12565b610850565b6106ff565b610124565b8060010b036100f757565b600080fd5b61ffff8116036100f757565b90606491610164116100f757565b90604491610144116100f757565b346100f7576101c03660031901126100f75760048035604435610146816100ec565b60643591610153836100fc565b6084359360a4359260079084820b958686036100f757366101c4116100f75761018660018060a01b0385541633146117c4565b6005546101a3906001600160a01b03165b6001600160a01b031690565b95863b156100f7576040988951809863216d6a4f60e11b8252818860009b8c80945af180156102bf576106db575b50866101e7816000526000602052604060002090565b916101f28354611db5565b806105f0575b5050875b60ff811660088110156103735761021561021a9161190c565b611934565b90898260010b8181136000146102c85750508654610240906001600160a01b0316610197565b61024982611953565b92813b156102c4578d516302acc94b60e01b8152808b018c815260ff909516602086015261ffff919091166040850152928b91849182908490829060600103925af19182156102bf576102a1926102a6575b506118e0565b6101fc565b806102b36102b992610980565b806117ad565b3861029b565b6117b8565b8b80fd5b126102d8575b6102a191506118e0565b86546102ec906001600160a01b0316610197565b9161030c6103056103056102ff85611953565b93611976565b61ffff1690565b92803b156102c4578d5163c9b902e360e01b8152808b018c815260ff909316602084015260408301949094528b9184919082908490829060600103925af19182156102bf576102a192610360575b506102ce565b806102b361036d92610980565b3861035a565b5050926103c791945087999892959661038b816123fa565b9160010b8061057a575b506103c28a83016103b861ffff809a166103b3835163ffffffff1690565b611989565b63ffffffff169052565b6122f5565b6103cf578480f35b6002810180546103de8161283b565b608081015161ffff16918683166104d8575b50505050600301918254906104048261283b565b92610414608085015161ffff1690565b918216610422575b50508480f35b836103059361045261044a61045794606061045f990196610445885161ffff1690565b614950565b61ffff168552565b612789565b5161ffff1690565b1561046e575b8080808061041c565b600854610483906001600160a01b0316610197565b905491813b156104d4579351630301ea6560e51b8152938401918252839182908490829060200103925af180156102bf576104c1575b818180610465565b806102b36104ce92610980565b386104b9565b8380fd5b91610457826104fc9461045261044a8a6060610305980196610445885161ffff1690565b1561050a575b8080806103f0565b60085461051f906001600160a01b0316610197565b9054813b15610576578751630301ea6560e51b81528681019182529691879182908490829060200103925af19081156102bf578795600392610563575b5090610502565b806102b361057092610980565b3861055c565b8680fd5b6105af61ffff916104576105a76080870192610598845161ffff1690565b606089015161ffff1690614950565b61ffff168252565b16156105bc575b38610395565b8951602435815281907fd02b8bdc1eb9eb4a85fe2b27c68fbe1eec04f697f660cc4cf3bb2cee4456f49090602090a26105b6565b600854610605906001600160a01b0316610197565b8c519163c9a59e4760e01b8352898380610629602097889483019190602083019252565b0381855afa9182156102bf578b8f8c8f91610653600a8a986106799a86916106be575b501061188d565b5196879586948593630d9778e560e11b8552840160209093929193604081019481520152565b03925af180156102bf57610690575b8891506101f8565b816106af92903d106106b7575b6106a781836109b3565b81019061187e565b503880610688565b503d61069d565b6106d591508a3d8c116106b7576106a781836109b3565b3861064c565b806102b36106e892610980565b386101d1565b6001600160a01b038116036100f757565b346100f7576000608036600319011261081d576004359061071f826106ee565b60243561072b816106ee565b6107366044356106ee565b60643590610743826106ee565b7fc8fcad8db84d3cc18b4c41d551ea0ee66dd599cde068d998e57d5e09332c131c546001600160a01b0391829161077d908316331461174c565b16806001600160601b0360a01b600a541617600a55803b156104d457838091600460405180948193630354740160e31b83525af180156102bf57610804575b506107e49061080193941660018060a01b03166001600160601b0360a01b6005541617600555565b60018060a01b03166001600160601b0360a01b6004541617600455565b80f35b90610801936108156107e493610980565b9350906107bc565b80fd5b9181601f840112156100f7578235916001600160401b0383116100f7576020808501948460051b0101116100f757565b346100f75760603660031901126100f75760048035906001600160401b03906024358281116100f7576108869036908301610820565b9390926044359081116100f7576108a09036908401610820565b93909460018060a01b03906108b98286541633146117c4565b60005b8181106108c557005b60075483166001600160a01b0316906108e76108e2828588611d0c565b611d1c565b916108f3828a8c611d0c565b3592813b156100f7576040805163a41dab8160e01b81526001600160a01b03909216828b01908152602081018a90529081019490945292600091849182908490829060600103925af19182156102bf5761095292610957575b50611a24565b6108bc565b806102b361096492610980565b3861094c565b634e487b7160e01b600052604160045260246000fd5b6001600160401b03811161099357604052565b61096a565b608081019081106001600160401b0382111761099357604052565b90601f801991011681019081106001600160401b0382111761099357604052565b6040519060a082018281106001600160401b0382111761099357604052565b6040519060c082018281106001600160401b0382111761099357604052565b60403660031901126100f757600435610a2a816106ee565b6024356001600160401b03918282116100f757366023830112156100f75781600401359283116109935760405190610a6c601f8501601f1916602001836109b3565b83825236602485850101116100f7576000602085610aaa966024610a9897018387013784010152611807565b60405190151581529081906020820190565b0390f35b346100f75760203660031901126100f757600435610ad760018060a01b036004541633146117c4565b600554610aec906001600160a01b0316610197565b90813b156100f757604051809263216d6a4f60e11b82528160046000958680945af180156102bf57610c57575b50610b2381611db5565b6002610b39826000526001602052604060002090565b805460401c6001600160401b0316610c40575b01610b6d610b6182546001600160401b031690565b6001600160401b031690565b610c2b575b50600954610b88906001600160a01b0316610197565b604051630178fe3f60e01b81526004810183905291602083602481855afa80156102bf5784938491610c0d575b50610bbe575050f35b813b15610c0957604051634848b1a560e01b815260048101919091526000602482015291908290604490829084905af180156102bf57610bfc575080f35b806102b361080192610980565b5050fd5b610c25915060203d81116106b7576106a781836109b3565b38610bb5565b805467ffffffffffffffff1916905538610b72565b805467ffffffffffffffff60401b19168155610b4c565b806102b3610c6492610980565b38610b19565b346100f75760803660031901126100f7576024356001600160401b0380821682036100f7576044359160ff831683036100f757606435928284116100f757366023850112156100f75783600401359283116100f75736602484860101116100f7576024610cdb940191600435611ad9565b005b346100f75760403660031901126100f757600435610d1a60018060a01b03610d0a816004541633146117c4565b600554166001600160a01b031690565b803b156100f7576000809160046040518094819363216d6a4f60e11b83525af180156102bf57610dac575b50610d63610d5d826000526000602052604060002090565b54611db5565b610d7c610d6f826123fa565b60006080820152826122f5565b60405160243581527fd02b8bdc1eb9eb4a85fe2b27c68fbe1eec04f697f660cc4cf3bb2cee4456f49090602090a2005b806102b3610db992610980565b38610d45565b346100f7576101603660031901126100f757602435610ddd36610108565b600480546001600160a01b039290610df890841633146117c4565b610e09610e04856132ed565b6119ab565b600954610e1e906001600160a01b0316610197565b92604093845180916369f648a160e01b825260209182918180610e488c8b83019190602083019252565b03915afa9182156102bf57600092610fd5575b50600654610e71906001600160a01b0316610197565b8187518092630607176160e31b82528180610e948b358c83019190602083019252565b03915afa9081156102bf57610eb492600092610fb8575b505082146119ec565b60005b60088110610f26575050600954610ed992506001600160a01b03169050610197565b803b156100f7579151634848b1a560e01b8152908101928352604435602084015291600091839182908490829060400103925af180156102bf57610f1957005b806102b3610cdb92610980565b600754610f3b906001600160a01b0316610197565b90610f4581611a33565b610f4f8287611923565b35833b156100f7578851637f4c824d60e11b81526001600160a01b0386881616818a019081526000602082018190526040820194909452606081019290925293849182908490829060800103925af19182156102bf57610fb3926109575750611a24565b610eb7565b610fce9250803d106106b7576106a781836109b3565b3880610eab565b81610fed9293503d84116106b7576106a781836109b3565b9038610e5b565b346100f75760603660031901126100f757600435604435611014816100ec565b61102960018060a01b036004541633146117c4565b60055461103e906001600160a01b0316610197565b90813b156100f75760405192839263216d6a4f60e11b84528360046000968780945af19283156102bf5761080193611269575b50611086816000526000602052604060002090565b9061113382549361109685611db5565b866110a0846123fa565b916110d460808401916110ca6110bb610305855161ffff1690565b6001600160401b031660070b90565b9060010b90611a83565b606084015161ffff16838260070b61ffff9283811660070b821361125d575b501361124a575050604051602435815285907fd02b8bdc1eb9eb4a85fe2b27c68fbe1eec04f697f660cc4cf3bb2cee4456f49090602090a2525b826122f5565b600182019161115f61115761115161114c865460ff1690565b611941565b60031690565b8095846129a8565b80928254907f3042d0c278ec3b2d8bf290d27da7bb56226996146c187fc01f6f448b6283da72604051806111a48a82919091602060ff60408301946000845216910152565b0390a46111b082611db5565b61120c6111c882546000526001602052604060002090565b80546111e49060801c6001600160401b0316611aab565b611aab565b815467ffffffffffffffff60801b191660809190911b67ffffffffffffffff60801b16179055565b61123a611223836000526001602052604060002090565b80546111e49060801c6001600160401b0316611ac1565b559060ff1660ff19825416179055565b61125893501661ffff169052565b61112d565b61ffff168552386110f3565b806102b361127692610980565b38611071565b346100f7576101403660031901126100f7576004602435813561129e826106ee565b6112a736610116565b9060018060a01b03926112be8486541633146117c4565b60005b60ff8116906008821015610cdb576112f66103056112f16112ea6112e485611953565b60ff1690565b9488611923565b6119a1565b918261130d575b5061130891506118e0565b6112c1565b600754611322906001600160a01b0316610197565b803b156100f7576040805163a41dab8160e01b81526001600160a01b038716818c019081526020810185905280830187905291929091600091839182908490829060600103925af180156102bf576113089588937f41d17e4a29add7df9dab104b7b914e73209c448b1fd78b8ca04efc5e24df1abb936113b9936113c2575b50519485526020850152868a16939081906040820190565b0390a3386112fd565b806102b36113cf92610980565b386113a1565b346100f75760403660031901126100f75760043560243561140160018060a01b036004541633146117c4565b600554611416906001600160a01b0316610197565b91823b156100f7576000809360046040518096819363216d6a4f60e11b83525af19283156102bf57610cdb9361150b575b5061145c816000526000602052604060002090565b82815461146881611db5565b837f3042d0c278ec3b2d8bf290d27da7bb56226996146c187fc01f6f448b6283da72604051806114a48190600460206040840193600181520152565b0390a460016114b284613b12565b509391505001906114c7825460081c60070b90565b8160070b9060070b126114dc575b5050612dc6565b611504919081549060081b68ffffffffffffffff00169068ffffffffffffffff001916179055565b38806114d5565b806102b361151892610980565b38611447565b346100f7576101403660031901126100f75760243561153c36610116565b90600461155360018060a01b0382541633146117c4565b61155d8135613bc9565b9160005b60ff8116906008821015610cdb5761157f6103056112f18489611923565b611593575b61158e91506118e0565b611561565b6007546115a8906001600160a01b0316610197565b6115be6112f16115b784611953565b9489611923565b813b156100f757604080516311aa10fb60e01b81528088018981526020810188905260ff9096169186019190915261ffff909116606085015292600091849182908490829060800103925af19182156102bf5761158e92611620575b50611584565b806102b361162d92610980565b3861161a565b346100f75760803660031901126100f7576116fc600435611653816106ee565b60243590611660826106ee565b6044359161166d836106ee565b6064359261167a846106ee565b7fc8fcad8db84d3cc18b4c41d551ea0ee66dd599cde068d998e57d5e09332c131c546001600160a01b039283916116b4908316331461174c565b816001600160601b0360a01b9516856006541617600655168360075416176007551690600854161760085560018060a01b03166001600160601b0360a01b6009541617600955565b600160ff1b600052600160205261174460ff61173d7fe209ec102481142efb7be62c549d278b9d65c9410e465059ec2d8758d3fc5cf55b5460d01c60ff1690565b1615611d26565b610cdb6133e1565b1561175357565b60405162461bcd60e51b815260206004820152602c60248201527f4f6e6c79206f776e657220697320616c6c6f77656420746f20706572666f726d60448201526b103a3434b99030b1ba34b7b760a11b6064820152608490fd5b60009103126100f757565b6040513d6000823e3d90fd5b156117cb57565b60405162461bcd60e51b81526020600482015260146024820152732727aa2fa0aaaa2427a924ad22a22fa0a226a4a760611b6044820152606490fd5b600091829161182160018060a01b036004541633146117c4565b6020825192019034905af180156118355790565b60405162461bcd60e51b815260206004820152601160248201527019985a5b1959081d1bc8199bdc9dd85c99607a1b6044820152606490fd5b6000526002602052604060002090565b908160209103126100f7575190565b1561189457565b60405162461bcd60e51b815260206004820152600e60248201526d546f6f206d616e7920676561727360901b6044820152606490fd5b634e487b7160e01b600052601160045260246000fd5b60ff1660ff81146118f15760010190565b6118ca565b634e487b7160e01b600052603260045260246000fd5b600881101561191e5760051b60c40190565b6118f6565b90600881101561191e5760051b0190565b3561193e816100ec565b90565b60ff60029116019060ff82116118f157565b60ff60019116019060ff82116118f157565b60ff166001019060ff82116118f157565b60010b617fff1981146118f15760000390565b91909163ffffffff808094169116019182116118f157565b3561193e816100fc565b156119b257565b60405162461bcd60e51b8152602060048201526012602482015271726f6f6d206973206e6f742061637469766560701b6044820152606490fd5b156119f357565b60405162461bcd60e51b81526020600482015260096024820152683737ba1037bbb732b960b91b6044820152606490fd5b60001981146118f15760010190565b90600182018092116118f157565b906206978082018092116118f157565b919082018092116118f157565b60070b60040190677fffffffffffffff8213677fffffffffffffff198312176118f157565b9060070b9060070b0190677fffffffffffffff198212677fffffffffffffff8313176118f157565b6001600160401b031680156118f1576000190190565b6001600160401b038091169081146118f15760010190565b91909293611af260018060a01b036004541633146117c4565b600093838552602094600c865260408120956001600160401b038093169687835281526040822091611b2e86849060ff1660ff19825416179055565b600180930193851161099357611b4e85611b488654611c56565b86611c90565b8091601f8611600114611bbf5750928480611baf9460ff97947f3553d84d9f5bc81eeb57eac4d5a1fee928d026da4f389c33c1cebfaf3931fda0999793611bb4575b501b906000198460031b1c19161790555b604051938493169783611ce4565b0390a4565b8c0135925038611b90565b601f92919219861690611bd786600052602060002090565b93905b8b838310611c40575050509285927f3553d84d9f5bc81eeb57eac4d5a1fee928d026da4f389c33c1cebfaf3931fda097959260ff97611baf9610611c26575b505082811b019055611ba1565b8b0135600019600386901b60f8161c191690553880611c19565b8401358555938501939283019290810190611bda565b90600182811c92168015611c86575b6020831014611c7057565b634e487b7160e01b600052602260045260246000fd5b91607f1691611c65565b90601f8111611c9e57505050565b600091825260208220906020601f850160051c83019410611cda575b601f0160051c01915b828110611ccf57505050565b818155600101611cc3565b9092508290611cba565b90918060409360208452816020850152848401376000828201840152601f01601f1916010190565b919081101561191e5760051b0190565b3561193e816106ee565b15611d2d57565b60405162461bcd60e51b815260206004820152601760248201527f64756e67656f6e20616c726561647920737461727465640000000000000000006044820152606490fd5b15611d7957565b60405162461bcd60e51b81526020600482015260146024820152731c9bdbdb481b9bdd0818dc99585d1959081e595d60621b6044820152606490fd5b611dc9816000526001602052604060002090565b9081546001600160401b03811692611de2841515611d72565b60ff809260d01c1615611e07575b5050611e059150611e0090614803565b612521565b565b600554611e4e94602091611e23906001600160a01b0316610197565b6040518080988194634a83e9cd60e11b8352600483019190916001600160401b036020820193169052565b03915afa9384156102bf576000946120c0575b5083156120ba57611e7284846120f8565b6001611f6a611f6386867f8850140926f0260fe1b422b7a0d93e7d5734e521eae9ac8969ed512cc3834515611f50611ec688548a8160e81c16908b8160e01c16908c808260d81c169160c01c168888613e7a565b8a5460ff60d01b60d084901b1661ffff60c81b1990911660ff60c81b60c886901b1617178b5595919290611ef986614803565b96611f0e886000526002602052604060002090565b908d611f1f835460ff9060081c1690565b82821691160361209f575b50506040519384938491604091949360ff80926060860197865216602085015216910152565b0390a26000526002602052604060002090565b5460ff1690565b91019384549081611f7d575b5050611df0565b611f9d600591611f96611f8f856123fa565b5160ff1690565b9087613c6e565b9190948416111561202a575b5050600754611fc191506001600160a01b0316610197565b925490833b156100f7576040516302acc94b60e01b81526004810192909252600660248301526044820152916000908390606490829084905af19081156102bf57611e0592611e0092612017575b819281611f76565b806102b361202492610980565b3861200f565b60075461203f906001600160a01b0316610197565b803b156100f7576040516302acc94b60e01b8152600481019390935260ff9390931660248301526044820152906000908290606490829084905af180156102bf5761208c575b8080611fa9565b806102b361209992610980565b38612085565b815461ff00191660089190911b61ff00161790553880611f2a565b50505050565b6120d991945060203d81116106b7576106a781836109b3565b9238611e61565b9060016001600160401b03809316019182116118f157565b61210190614803565b60ff612117826000526002602052604060002090565b541615612122575050565b600660ff6121686121776001600160401b03948560035460401c1696612147826147ac565b80156122ea575b156122195750849283916000526002602052604060002090565b9060ff1660ff19825416179055565b1603612181575050565b8062014370420416809161219d6003546001600160401b031690565b16146121e3576121c491506001600160401b03166001600160401b03196003541617600355565b611e05600160401b67ffffffffffffffff60401b196003541617600355565b506121f0611e05916120e0565b67ffffffffffffffff60401b6003549160401b169067ffffffffffffffff60401b191617600355565b601961222f610b6161222a85614736565b6145e1565b806122dc575b106122d257846122886112e460649360405161227d8161226f60208201948a86909160419282526020820152600360fa1b60408201520190565b03601f1981018352826109b3565b519020612710900690565b16116122be576122ab600561229c83613b12565b5091505060070b078516611965565b9283916000526002602052604060002090565b849283916000526002602052604060002090565b508492839161186e565b6122e590613bba565b612235565b50600a88101561214e565b9061239790612340612391610305608061238761236c61234661232561231f6112e48a5160ff1690565b60f81b90565b61234061233a61030560208c015161ffff1690565b60e81b90565b90611a51565b61234061236661235d60408b015163ffffffff1690565b63ffffffff1690565b60c81b90565b61234061238161030560608a015161ffff1690565b60b81b90565b94015161ffff1690565b60a81b90565b6006549091906123af906001600160a01b0316610197565b91823b156100f757604051634848b1a560e01b815260048101929092526024820152906000908290604490829084905af180156102bf576123ed5750565b806102b3611e0592610980565b60405160a081018181106001600160401b038211176109935761246f9260809260209260405260009381858093528285820152826040820152826060820152015261244f61019760065460018060a01b031690565b6040518080968194630178fe3f60e01b8352600483019190602083019252565b03915afa80156102bf576124f86124bb6124e0926124ed9561193e9591612503575b50908160f81c9161ffff808260e81c169363ffffffff8360c81c1691808460b81c169360a81c1693565b9792959091936124d56124cc6109d4565b60ff909a168a52565b61ffff166020890152565b63ffffffff166040870152565b61ffff166060850152565b61ffff166080830152565b61251b915060203d81116106b7576106a781836109b3565b38612491565b6002612537826000526002602052604060002090565b0180546001600160401b0390811692836125515750505050565b60055461256d94602091611e23906001600160a01b0316610197565b03915afa9384156102bf5760009461265f575b5083156120ba576125f99361259491613dd4565b906125b26125a18261267f565b916000526001602052604060002090565b6002808201946125c986546001600160401b031690565b161415918261263e575b82612635575b5081612624575b50612602575b5050805467ffffffffffffffff19169055565b388080806120ba565b815467ffffffffffffffff19166001600160401b0390911617905538806125e6565b5460d01c60ff1615159050386125e0565b159150386125d9565b9150612658610b6182546001600160401b039060801c1690565b15916125d3565b61267891945060203d81116106b7576106a781836109b3565b9238612580565b6126a6612696826000526001602052604060002090565b5460401c6001600160401b031690565b906001600160401b038216918215612763576005546126ff916020916126d4906001600160a01b0316610197565b6040518080958194634a83e9cd60e11b8352600483019190916001600160401b036020820193169052565b03915afa9081156102bf5760009161276b575b5080156127635761193e92612744610b61612737856000526001602052604060002090565b546001600160401b031690565b149061275d611733846000526001602052604060002090565b92613be8565b505050600090565b612783915060203d81116106b7576106a781836109b3565b38612712565b906127e19061279a815161ffff1690565b906127a9602082015160ff1690565b604082015160ff16606083015161ffff16916127db60a06127cf608087015161ffff1690565b95015163ffffffff1690565b946148df565b6008549091906123af906001600160a01b0316610197565b6040519060c082018281106001600160401b03821117610993576040528160a06000918281528260208201528260408201528260608201528260808201520152565b602061287f916128496127f9565b5060085461285f906001600160a01b0316610197565b6040518080958194630178fe3f60e01b8352600483019190602083019252565b03915afa9081156102bf5761291161291c6128fc6128d46129069561193e95600091612929575b50908160f81c61ffff808460e81c169360ff8160e01c169363ffffffff838360d01c16938360c01c16921690565b9794999291936128f26128e89792976109f3565b61ffff909c168c52565b60ff1660208b0152565b60ff166040890152565b61ffff166060870152565b61ffff166080850152565b63ffffffff1660a0830152565b612941915060203d81116106b7576106a781836109b3565b386128a6565b60070b677fffffffffffffff1981146118f1576000190190565b60070b677fffffffffffffff81146118f15760010190565b80156129965760ff81116118f1576001901b9060ff82116118f157565b50600190565b60ff61193e9116612979565b90916129b383613b12565b5060ff848116969390929190828189612ba35750506129d46129db93612947565b905b613b3b565b946129f0836000526001602052604060002090565b90612a05876000526001602052604060002090565b82546001600160401b0380821693612a35612a30611151612a2a875495861694612979565b9b611941565b61299c565b948181108015612b9b575b15612ad157505050505050612a5a905460ff9060c81c1690565b81841680928583161614612aaa57505050505050505b60405162461bcd60e51b815260206004820152601260248201527163616e74206d6f766520746869732077617960701b6044820152606490fd5b8593600f9160041c161614612ac0575b50505090565b612ac992612c5e565b388181612aba565b90919395509791939711600014612b08575050905460c81c60ff16905081841680928583161614612aaa5750505050505050612a70565b8481979594939716918285838a60c81c161614908115612b88575b50612b375750505050505050505050612a70565b889687871115612b715750505082612b61612b5884935460ff9060c81c1690565b60041c600f1690565b169216911614612ac05750505090565b60cc1c16600f16149250612ac09150505750505090565b60c81c8616851686861614905038612b23565b508115612a40565b60018a03612bba575050916129d66129db93612961565b909360028a03612bd25750506129d46129db93612961565b9150925087600314600014612bed576129d66129db93612947565b60405162461bcd60e51b815260206004820152601460248201527334b6b837b9b9b4b13632903234b932b1ba34b7b760611b6044820152606490fd5b15612c3057565b60405162461bcd60e51b81526020600482015260066024820152656e6f206b657960d01b6044820152606490fd5b909182818111612d9d575b50612c9f612c9b611f6383612c8c87612c8c88600052600b602052604060002090565b90600052602052604060002090565b1590565b612ca857505050565b600754612cbd906001600160a01b0316610197565b604051635986e3e560e11b81526004810184905260076024820152602081604481855afa80156102bf57612cfb91600091612d7f575b501515612c29565b803b156100f75760405163c9b902e360e01b8152600481018490526007602482015260016044820152906000908290606490829084905af19384156102bf57612c8c612d5f94612c8c93611e0597612d6c575b50600052600b602052604060002090565b805460ff19166001179055565b806102b3612d7992610980565b38612d4e565b612d97915060203d81116106b7576106a781836109b3565b38612cf3565b92509138612c69565b8115612db0570690565b634e487b7160e01b600052601260045260246000fd5b612dda816000526000602052604060002090565b612def81546000526001602052604060002090565b92612e04816000526001602052604060002090565b80546001600160401b039590600090878116612fee5750612e258685613772565b612e2e84614803565b966002612e45896000526002602052604060002090565b0190612e5b610b6183546001600160401b031690565b1580612fe3575b612eab575b505050611e05955091612e96612ea69492611223856111e46111df600198546001600160401b039060801c1690565b815501805460ff19166004179055565b6132a1565b80831615612f36575b509261122360019593611e05997f644c4d4ff52c1efcb89d373879c1d7e01d3f8b7e60cc19f9bdf5da38cd90c14d612f2786612f0d612e9698612ea69d9b906001600160401b03166001600160401b0319825416179055565b6040516001600160401b0390911681529081906020820190565b0390a293955081949650612e67565b90949295939150431690612f5461019760055460018060a01b031690565b803b156100f7576000809160046040518094819363338cdca160e01b83525af19687156102bf57611e05997f644c4d4ff52c1efcb89d373879c1d7e01d3f8b7e60cc19f9bdf5da38cd90c14d612f2786612f0d612e969860019c61122398612ea69f612fd0575b50989b9d505050965050509950939550612eb4565b806102b3612fdd92610980565b38612fbb565b506003430615612e62565b604090888082841c16159182613293575b505080613274575b8061320b575b61316e575b61301b85611db5565b6130248561336e565b6001600160a01b03811691821515806130f6575b613045575b505050612e25565b60075461305a906001600160a01b0316610197565b803b156100f757815163a41dab8160e01b81526001600160a01b0393909316600484015260086024840152600160448401526000908390606490829084905af19081156102bf5787927f41d17e4a29add7df9dab104b7b914e73209c448b1fd78b8ca04efc5e24df1abb926130e3575b50516008815260016020820152604090a338808061303d565b806102b36130f092610980565b386130ca565b50600654613134906020908b90613115906001600160a01b0316610197565b84518080958194630607176160e31b8352600483019190602083019252565b03915afa9081156102bf57600091613150575b50831415613038565b613168915060203d81116106b7576106a781836109b3565b38613147565b6005544389169250613188906001600160a01b0316610197565b803b156100f75760008091600484518094819363338cdca160e01b83525af180156102bf576131f8575b5083546131ca9060401c6001600160401b0316610b61565b61301257835467ffffffffffffffff60401b1916604083901b67ffffffffffffffff60401b16178455613012565b806102b361320592610980565b386131b2565b50600954613221906001600160a01b0316610197565b8151630178fe3f60e01b81526004810187905290602090829060249082905afa9081156102bf578391613256575b501561300d565b61326e915060203d81116106b7576106a781836109b3565b3861324f565b5060028861328b828701546001600160401b031690565b161415613007565b60801c161590508838612fff565b6132aa816123fa565b608081019161ffff92838151168460608501511681106132cc575b5050505050565b600101938085116118f1576132e3941690526122f5565b38808080806132c5565b6009546040516331a9108f60e11b815260048101929092526001600160a01b03906020908390602490829085165afa9182156102bf57600092613332575b5016301490565b90916020823d8211613366575b8161334c602093836109b3565b8101031261081d57505161335f816106ee565b903861332b565b3d915061333f565b613377816132ed565b156133db576009546040516369f648a160e01b815260048101929092526001600160a01b0391906020908290602490829086165afa9081156102bf576000916133bf57501690565b6133d7915060203d81116106b7576106a781836109b3565b1690565b50600090565b600160ff1b60005260026020527f273ff7d24090d0ae93766d322996b27de23d70a15bfcdb2567df35a7695e10fd80547f273ff7d24090d0ae93766d322996b27de23d70a15bfcdb2567df35a7695e10fc9080613748575b5060075461344f906001600160a01b0316610197565b90813b156100f75760405163c9b902e360e01b815260006004820181905260086024830152604482018190529283908290606490829084905af180156102bf57613735575b50600160ff1b60005260016020527fe209ec102481142efb7be62c549d278b9d65c9410e465059ec2d8758d3fc5cf5805443604081901b67ffffffffffffffff60401b166001600160401b039190911678ff0000000000000000ffffffffffffffffffffffffffffffff19909216821717600160c21b17808355835460ff60d81b1990911660d09190911b60ff60d81b16178255916135a19061358790805461357d9060181c60ff16613563613549826118e0565b845463ff000000191660189190911b63ff00000016178455565b855460ff60e81b191660e89190911b60ff60e81b16178555565b5460101c60ff1690565b825460ff60e01b191660e09190911b60ff60e01b16178255565b60018101839055600160ff1b938490556005546135c6906001600160a01b0316610197565b803b156104d45783809160046040518094819363338cdca160e01b83525af180156102bf57613722575b50600654613606906001600160a01b0316610197565b604051630607176160e31b81526000600482015290602090829060249082905afa9081156102bf578491613704575b5061363f81613a33565b600954613654906001600160a01b0316610197565b90813b15613700576040516319846a3560e21b8152600160ff1b6004820152602481019190915293908490818381604481015b03925af19081156102bf577fa97399cd19a5b00b49b7d10d188180e100139a0501c9c9b4fe21dab5b915162f936136c8926136ed575b505460c01c60ff1690565b604080516001600160401b03909316835260ff9091166020830152819081015b0390a2565b806102b36136fa92610980565b386136bd565b8480fd5b61371c915060203d81116106b7576106a781836109b3565b38613635565b806102b361372f92610980565b386135f0565b806102b361374292610980565b38613494565b61375190611db5565b805462ff0000600882901c1662ff0000199091161781556000825538613439565b9061377f61186e83614803565b60018101805480613a09575b506007546137a1906001600160a01b0316610197565b926137ab85613da9565b843b156100f75760405163c9b902e360e01b81526004810183905260086024820152604481019190915260009485908290606490829084905af180156102bf576139f6575b5084613806816000526001602052604060002090565b926138da6138c06001600160401b034316966138388888906001600160401b03166001600160401b0319825416179055565b8654600160c21b78ff0000000000000000ffffffffffffffff00000000000000001990911667ffffffffffffffff60401b60408b901b161717808855815460ff60d81b60d09190911b1660ff60d81b19909116178755805461357d9060181c60ff166138a6613549826118e0565b885460ff60e81b191660e89190911b60ff60e81b16178855565b855460ff60e01b191660e09190911b60ff60e01b16178555565b60018401839055556005546138f7906001600160a01b0316610197565b803b15613700579084809260046040518095819363338cdca160e01b83525af19081156102bf57613960926020926139e3575b50600654613940906001600160a01b0316610197565b6040518080958194630607176160e31b8352600483019190602083019252565b03915afa9081156102bf5784916139c5575b5061397c81613a33565b600954613991906001600160a01b0316610197565b90813b15613700576040516319846a3560e21b81526004810187905260248101919091529390849081838160448101613687565b6139dd915060203d81116106b7576106a781836109b3565b38613972565b806102b36139f092610980565b3861392a565b806102b3613a0392610980565b386137f0565b613a1290611db5565b815462ff0000600882901c1662ff000019909116178255600081553861378b565b80151580613aa7575b613a435750565b7fc24affdb20f6529973515c5398461c1f6228edbfac531ab49e56a11433a86c9f6136e8613a7042611a41565b6001600160a01b039093166000818152600d6020526040902090939081905560405191829182919060206040840193600081520152565b50600954613abd906001600160a01b0316610197565b60405163c9a59e4760e01b81526004810183905290602090829060249082905afa9081156102bf57600091613af4575b5015613a3c565b613b0c915060203d81116106b7576106a781836109b3565b38613aed565b6001600160401b039081811660070b92828260401c1660070b928260801c1660070b9160ff1c90565b67ffffffffffffffff60801b608084901b16926001600160401b03908116808504600160801b14901517156118f157600160ff1b92848401948585116118f15767ffffffffffffffff60401b8383169260401b1691808304600160401b14901517156118f15701918383018095116118f1571601018091116118f15790565b6003198101919082116118f157565b600160ff1b8101908082116118f157600360fe1b019081106118f15790565b91909260ff600191160361276357600f90613c66575b60ff60646040516020810190858252866040820152600360f91b606082015260418152613c2a81610998565b51902006911611613c3c575050600090565b613c61916040519160208301526040820152600760f81b606082015260418152610998565b600190565b506019613bfe565b92919091613c85613c7e85614655565b6019900490565b8015613da1575b60405194613ce1613cd8836020890189613cbc8a8784909160419282526020820152601960fa1b60408201520190565b0399613cd0601f199b8c81018352826109b3565b519020612da6565b8360011c611a51565b938415613d98575b60ff169586600214613d7e575b613d4993949560088411613d75575b604080516020810194855290810191909152606560f81b6060820152613d40928492909190613cd09082606181015b039081018352826109b3565b9060011c611a51565b928315613d6c575b600114613d5a57565b9180613d699160021c90611a51565b91565b60019350613d51565b60089350613d05565b613d9085613d49959660021c90611a51565b949350613cf6565b60019450613ce9565b506001613c8c565b600160ff1b8103613dba5750600090565b613dc5601991614655565b04600101806001116118f15790565b613e5f6129d4613e6492613e64613e5f613e6e613e7497613e5460ff6009818160405160208101908b8252876040820152603360f91b606082015260418152613e1c81610998565b51902006169360405160208101918a83526040820152606760f81b606082015260418152613e4981610998565b519020061695613b12565b50999198909861488b565b6145fc565b9060070b90611a83565b9461488b565b90600290565b95949290613f12949260ff6000911680600414600014614079575050600f5b8760405160ff613ee86112e46020840184613eca898884909160419282526020820152606f60f81b60408201520190565b0394613ede601f19968781018352826109b3565b5190206064900690565b60009116603c81101561405b57505060ff60005b1660048110613f165750505060f0175b96614250565b9091565b60038103613f905750613f69613f646112e460ff94613f6e94613f5b6040519182613d348c602083019687909160419282526020820152600760fc1b60408201520190565b51902060031690565b611953565b6148b5565b1660158103613f81575060d0175b613f0c565b601c03613f7c5760b017613f0c565b600281036140055750613fdf613f646112e460ff94613fe494613fd56040519182613d348c602083019687909160419282526020820152600760fc1b60408201520190565b5190206006900690565b6148a0565b16600f8103613ff65750605017613f0c565b601203613f7c5760a017613f0c565b600114614014575b5050613f0c565b6040805160208101938452908101859052600760fc1b60608201526140539261404e92612a30926112e49291613f5b908260618101613d34565b6148ca565b17873861400d565b605a9150106000146140705760ff6001613efc565b60ff6002613efc565b60408051602081018b8152918101859052600160f81b6060820152906140a9906112e49081908460618101613eca565b60571161423f575b60408051602081018c8152918101869052600160f91b6060820152606183810182526140e7926112e4928392613ede90826109b3565b6028116140f6575b5050613e99565b60408051602081018c8152918101869052600360f81b6060820152606183810182528c92614130926112e49283929190613ede90826109b3565b6019111561418357505080158015614179575b156141545750600a175b38806140ef565b8060011490811561416e575b501561414d5760051761414d565b905060031438614160565b5080600214614143565b6040805160208101928352908101869052600360f81b60608201526141b8926112e49283929091613ede908260618101613d34565b6032111561420057806141ce575060081761414d565b600181036141e057506001175b61414d565b600281036141f1575060021761414d565b6003036141db5760041761414d565b8061420e575060021761414d565b6001810361421f575060041761414d565b60028103614230575060081761414d565b6003036141db5760011761414d565b915061424a81612979565b916140b1565b949390600061426961426188614803565b959497613b12565b50509060070b1590816145d5575b501561428b57505050505060016002921790565b959493955b60ff908185169082851682116145cc57509086916142f06112e48a6040516142e68161226f8a8d6020840196879160429391835260ff60f81b9060f81b1660208301526021820152600360f81b60418201520190565b5190206014900690565b91600192838086161415928380946145b8575b15614322575050505061431b915060029617936118e0565b9294614290565b6002949293868616861415808061458a575b1561434e5750505050505061431b915060039617936118e0565b6004969293949587808a16141580948195614515575b501561437f575050505050505061431b9150809617936118e0565b9091929394959650600880809916141595866143be575b5050505050506000146143b2575061431b9060059617936118e0565b61431b915095936118e0565b6003929394959650161493841561450a575b84156144f1575b84156144d8575b84156144bf575b8415614499575b8415614473575b841561444d575b8415614410575b50505050388080808080614396565b604d149350909183614445575b508261443d575b5081614435575b5038808080614401565b90503861442b565b915038614424565b92503861441d565b9350604e84148061446c575b80614465575b936143fa565b508061445f565b5082614459565b9350604e841480614492575b8061448b575b936143f3565b5082614485565b508161447f565b9350604e8414806144b8575b806144b1575b936143ec565b50806144ab565b50816144a5565b9350604f8414806144d1575b936143e5565b50826144cb565b9350604f8414806144ea575b936143de565b50806144e4565b9350604f841480614503575b936143d7565b50816144fd565b6050811494506143d0565b9050818716148015614580575b801561456e575b801561455c575b801561453d575b38614364565b50604e851480614555575b8015614537575081614537565b5082614548565b50604f85148015614530575081614530565b50604f85148015614529575082614529565b5060508514614522565b50848685161480156145ae575b806143345750604f83148015614334575081614334565b5060508314614597565b508282161580614303575060508114614303565b97505050505050565b905060070b1538614277565b9060096001600160401b03809316029182169182036118f157565b60070b6003190190677fffffffffffffff198212677fffffffffffffff8313176118f157565b60070b90677fffffffffffffff198212677fffffffffffffff8313176118f157565b600160ff1b81146118f15760000390565b61466161466a91613b12565b50509190614622565b60070b9060008212614708575b61468090614622565b60070b600081126146fa575b6780000000000000008083136146d7575b81136146b5575b808213156146b0575090565b905090565b600160401b60008282039212818312811691831390151617156146a4576118ca565b91600160401b600082820392128183128116918313901516176118f1579161469d565b61470390614644565b61468c565b9061471561468091614644565b919050614677565b60070b677fffffffffffffff1981146118f15760000390565b61473f90613b12565b50819050826000600782900b1261479a575b5060008160070b1261478a575b508060070b8260070b1360001461477c57506001600160401b031690565b90506001600160401b031690565b614794915061471d565b3861475e565b6147a591935061471d565b9138614751565b6147b590613b12565b505060001960079290920b8281121592836147f4575b50826147e8575b50816147dc575090565b6001915060070b131590565b600112159150386147d2565b600783900b12159250386147cb565b61480f61193e91613b12565b509160079190600081840b1261486c5761482a600991611a5e565b830b05915b600082820b1261484d57614844600992611a5e565b900b0590613b3b565b60099061486461485f6129d49461471d565b611a5e565b900b0561471d565b600961487d61485f6148859361471d565b840b0561471d565b9161482f565b60099060070b02908160070b9182036118f157565b60ff60039116029060ff82169182036118f157565b60ff60079116029060ff82169182036118f157565b60041b90610ff060f08316921682036118f157565b60e81b61ffff60e81b1660f89290921b6001600160f81b0319169182019493929185106118f15760e01b60ff60e01b1684019384106118f15760d01b61ffff60d01b1683019283106118f15760c01b61ffff60c01b1682019182106118f15763ffffffff1681018091116118f15790565b90916149649061ffff80931660070b611a83565b918260070b9082811660070b821361498557506000126133d7575050600090565b925050509056fea26469706673582212201d482d90cfa13a8a50a8ba3e3491fad45a7bb3f1688805ce60486aa90c6f127d64736f6c63430008140033",
  "devdoc": {
    "kind": "dev",
    "methods": {},
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 2986,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_characters",
        "offset": 0,
        "slot": "0",
        "type": "t_mapping(t_uint256,t_struct(Character)2968_storage)"
      },
      {
        "astId": 2991,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_rooms",
        "offset": 0,
        "slot": "1",
        "type": "t_mapping(t_uint256,t_struct(Room)2951_storage)"
      },
      {
        "astId": 2996,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_areas",
        "offset": 0,
        "slot": "2",
        "type": "t_mapping(t_uint256,t_struct(Area)2981_storage)"
      },
      {
        "astId": 3004,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_areaCounter",
        "offset": 0,
        "slot": "3",
        "type": "t_struct(AreaCounter)3001_storage"
      },
      {
        "astId": 3006,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_adminContract",
        "offset": 0,
        "slot": "4",
        "type": "t_address"
      },
      {
        "astId": 3009,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_blockHashRegister",
        "offset": 0,
        "slot": "5",
        "type": "t_contract(BlockHashRegister)12959"
      },
      {
        "astId": 3012,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_charactersContract",
        "offset": 0,
        "slot": "6",
        "type": "t_contract(Characters)464"
      },
      {
        "astId": 3015,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_elementsContract",
        "offset": 0,
        "slot": "7",
        "type": "t_contract(Elements)12693"
      },
      {
        "astId": 3018,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_gearsContract",
        "offset": 0,
        "slot": "8",
        "type": "t_contract(Gears)12712"
      },
      {
        "astId": 3021,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_roomsContract",
        "offset": 0,
        "slot": "9",
        "type": "t_contract(Rooms)12779"
      },
      {
        "astId": 3024,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_playerContract",
        "offset": 0,
        "slot": "10",
        "type": "t_contract(Player)10551"
      },
      {
        "astId": 3032,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_unlockedExits",
        "offset": 0,
        "slot": "11",
        "type": "t_mapping(t_uint256,t_mapping(t_uint256,t_mapping(t_uint256,t_bool)))"
      },
      {
        "astId": 3044,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_quests",
        "offset": 0,
        "slot": "12",
        "type": "t_mapping(t_uint256,t_mapping(t_uint64,t_struct(Quest)3037_storage))"
      },
      {
        "astId": 3048,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_taxDueDate",
        "offset": 0,
        "slot": "13",
        "type": "t_mapping(t_address,t_uint256)"
      },
      {
        "astId": 3052,
        "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
        "label": "_customRoomNames",
        "offset": 0,
        "slot": "14",
        "type": "t_mapping(t_uint256,t_string_storage)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_contract(BlockHashRegister)12959": {
        "encoding": "inplace",
        "label": "contract BlockHashRegister",
        "numberOfBytes": "20"
      },
      "t_contract(Characters)464": {
        "encoding": "inplace",
        "label": "contract Characters",
        "numberOfBytes": "20"
      },
      "t_contract(Elements)12693": {
        "encoding": "inplace",
        "label": "contract Elements",
        "numberOfBytes": "20"
      },
      "t_contract(Gears)12712": {
        "encoding": "inplace",
        "label": "contract Gears",
        "numberOfBytes": "20"
      },
      "t_contract(Player)10551": {
        "encoding": "inplace",
        "label": "contract Player",
        "numberOfBytes": "20"
      },
      "t_contract(Rooms)12779": {
        "encoding": "inplace",
        "label": "contract Rooms",
        "numberOfBytes": "20"
      },
      "t_int64": {
        "encoding": "inplace",
        "label": "int64",
        "numberOfBytes": "8"
      },
      "t_mapping(t_address,t_uint256)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => uint256)",
        "numberOfBytes": "32",
        "value": "t_uint256"
      },
      "t_mapping(t_uint256,t_bool)": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => bool)",
        "numberOfBytes": "32",
        "value": "t_bool"
      },
      "t_mapping(t_uint256,t_mapping(t_uint256,t_bool))": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => mapping(uint256 => bool))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_uint256,t_bool)"
      },
      "t_mapping(t_uint256,t_mapping(t_uint256,t_mapping(t_uint256,t_bool)))": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => mapping(uint256 => mapping(uint256 => bool)))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_uint256,t_mapping(t_uint256,t_bool))"
      },
      "t_mapping(t_uint256,t_mapping(t_uint64,t_struct(Quest)3037_storage))": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => mapping(uint64 => struct DungeonDataLayout.Quest))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_uint64,t_struct(Quest)3037_storage)"
      },
      "t_mapping(t_uint256,t_string_storage)": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => string)",
        "numberOfBytes": "32",
        "value": "t_string_storage"
      },
      "t_mapping(t_uint256,t_struct(Area)2981_storage)": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => struct DungeonDataLayout.Area)",
        "numberOfBytes": "32",
        "value": "t_struct(Area)2981_storage"
      },
      "t_mapping(t_uint256,t_struct(Character)2968_storage)": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => struct DungeonDataLayout.Character)",
        "numberOfBytes": "32",
        "value": "t_struct(Character)2968_storage"
      },
      "t_mapping(t_uint256,t_struct(Room)2951_storage)": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => struct DungeonDataLayout.Room)",
        "numberOfBytes": "32",
        "value": "t_struct(Room)2951_storage"
      },
      "t_mapping(t_uint64,t_struct(Quest)3037_storage)": {
        "encoding": "mapping",
        "key": "t_uint64",
        "label": "mapping(uint64 => struct DungeonDataLayout.Quest)",
        "numberOfBytes": "32",
        "value": "t_struct(Quest)3037_storage"
      },
      "t_string_storage": {
        "encoding": "bytes",
        "label": "string",
        "numberOfBytes": "32"
      },
      "t_struct(Area)2981_storage": {
        "encoding": "inplace",
        "label": "struct DungeonDataLayout.Area",
        "members": [
          {
            "astId": 2970,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "areaType",
            "offset": 0,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 2972,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "discovered",
            "offset": 1,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 2974,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "lastRoomIndex",
            "offset": 2,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 2976,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "currentIndex",
            "offset": 3,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 2978,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "lastRoom",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          },
          {
            "astId": 2980,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "eventBlockNumber",
            "offset": 0,
            "slot": "2",
            "type": "t_uint64"
          }
        ],
        "numberOfBytes": "96"
      },
      "t_struct(AreaCounter)3001_storage": {
        "encoding": "inplace",
        "label": "struct DungeonDataLayout.AreaCounter",
        "members": [
          {
            "astId": 2998,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "lastPeriod",
            "offset": 0,
            "slot": "0",
            "type": "t_uint64"
          },
          {
            "astId": 3000,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "numAreas",
            "offset": 8,
            "slot": "0",
            "type": "t_uint64"
          }
        ],
        "numberOfBytes": "32"
      },
      "t_struct(Character)2968_storage": {
        "encoding": "inplace",
        "label": "struct DungeonDataLayout.Character",
        "members": [
          {
            "astId": 2953,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "location",
            "offset": 0,
            "slot": "0",
            "type": "t_uint256"
          },
          {
            "astId": 2955,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "direction",
            "offset": 0,
            "slot": "1",
            "type": "t_uint8"
          },
          {
            "astId": 2957,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "floors",
            "offset": 1,
            "slot": "1",
            "type": "t_int64"
          },
          {
            "astId": 2959,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "slot_1",
            "offset": 0,
            "slot": "2",
            "type": "t_uint256"
          },
          {
            "astId": 2961,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "slot_2",
            "offset": 0,
            "slot": "3",
            "type": "t_uint256"
          },
          {
            "astId": 2963,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "slot_3",
            "offset": 0,
            "slot": "4",
            "type": "t_uint256"
          },
          {
            "astId": 2965,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "slot_4",
            "offset": 0,
            "slot": "5",
            "type": "t_uint256"
          },
          {
            "astId": 2967,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "slot_5",
            "offset": 0,
            "slot": "6",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "224"
      },
      "t_struct(Quest)3037_storage": {
        "encoding": "inplace",
        "label": "struct DungeonDataLayout.Quest",
        "members": [
          {
            "astId": 3034,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "status",
            "offset": 0,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 3036,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "data",
            "offset": 0,
            "slot": "1",
            "type": "t_string_storage"
          }
        ],
        "numberOfBytes": "64"
      },
      "t_struct(Room)2951_storage": {
        "encoding": "inplace",
        "label": "struct DungeonDataLayout.Room",
        "members": [
          {
            "astId": 2930,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "blockNumber",
            "offset": 0,
            "slot": "0",
            "type": "t_uint64"
          },
          {
            "astId": 2932,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "monsterBlockNumber",
            "offset": 8,
            "slot": "0",
            "type": "t_uint64"
          },
          {
            "astId": 2934,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "numActiveCharacters",
            "offset": 16,
            "slot": "0",
            "type": "t_uint64"
          },
          {
            "astId": 2936,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "direction",
            "offset": 24,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 2938,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "exits",
            "offset": 25,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 2940,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "kind",
            "offset": 26,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 2942,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "areaAtDiscovery",
            "offset": 27,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 2944,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "lastRoomIndex",
            "offset": 28,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 2946,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "index",
            "offset": 29,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 2948,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "discoverer",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          },
          {
            "astId": 2950,
            "contract": "src/dungeon/DungeonAdminFacet.sol:DungeonAdminFacet",
            "label": "randomEvent",
            "offset": 0,
            "slot": "2",
            "type": "t_uint64"
          }
        ],
        "numberOfBytes": "96"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      },
      "t_uint64": {
        "encoding": "inplace",
        "label": "uint64",
        "numberOfBytes": "8"
      },
      "t_uint8": {
        "encoding": "inplace",
        "label": "uint8",
        "numberOfBytes": "1"
      }
    }
  }
}